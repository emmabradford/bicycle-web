{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _config = _interopRequireDefault(require(\"../../core/config\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _empty_template = require(\"../../core/templates/empty_template\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\n\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _support = require(\"../../core/utils/support\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _data_helper = _interopRequireDefault(require(\"../../data_helper\"));\n\nvar _visibility_change = require(\"../../events/visibility_change\");\n\nvar _date2 = _interopRequireDefault(require(\"../../localization/date\"));\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _dialog = require(\"../dialog\");\n\nvar _themes = require(\"../themes\");\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\n\nvar _ui2 = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar _appointmentPopup = _interopRequireDefault(require(\"./appointmentPopup\"));\n\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\n\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\n\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\n\nvar _ui3 = require(\"./ui.loading\");\n\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.appointments\"));\n\nvar _uiSchedulerAppointments = _interopRequireDefault(require(\"./ui.scheduler.appointments.layout_manager\"));\n\nvar _uiScheduler2 = _interopRequireDefault(require(\"./ui.scheduler.appointment_model\"));\n\nvar _uiScheduler3 = _interopRequireDefault(require(\"./ui.scheduler.header\"));\n\nvar _uiScheduler4 = _interopRequireDefault(require(\"./ui.scheduler.resource_manager\"));\n\nvar _uiScheduler5 = _interopRequireDefault(require(\"./ui.scheduler.subscribes\"));\n\nvar _recurrence = require(\"./recurrence\");\n\nvar _utils = _interopRequireDefault(require(\"./utils.timeZone\"));\n\nvar _uiScheduler6 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.agenda\"));\n\nvar _uiScheduler7 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_day\"));\n\nvar _uiScheduler8 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_month\"));\n\nvar _uiScheduler9 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_week\"));\n\nvar _uiScheduler10 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_work_week\"));\n\nvar _uiScheduler11 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_day\"));\n\nvar _uiScheduler12 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_month\"));\n\nvar _uiScheduler13 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_week\"));\n\nvar _uiScheduler14 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_work_week\"));\n\nvar _appointmentAdapter = _interopRequireDefault(require(\"./appointmentAdapter\"));\n\nvar _timeZoneCalculator = require(\"./timeZoneCalculator\");\n\nvar _dataStructures = require(\"./dataStructures\");\n\nvar _appointmentSettingsGenerator = require(\"./appointmentSettingsGenerator\");\n\nvar _utils2 = _interopRequireDefault(require(\"./utils\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else {\n      if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar MINUTES_IN_HOUR = 60;\nvar WIDGET_CLASS = \"dx-scheduler\";\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\nvar WIDGET_SMALL_WIDTH = 400;\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\nvar VIEWS_CONFIG = {\n  day: {\n    workSpace: _uiScheduler11.default,\n    renderingStrategy: \"vertical\"\n  },\n  week: {\n    workSpace: _uiScheduler13.default,\n    renderingStrategy: \"vertical\"\n  },\n  workWeek: {\n    workSpace: _uiScheduler14.default,\n    renderingStrategy: \"vertical\"\n  },\n  month: {\n    workSpace: _uiScheduler12.default,\n    renderingStrategy: \"horizontalMonth\"\n  },\n  timelineDay: {\n    workSpace: _uiScheduler7.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWeek: {\n    workSpace: _uiScheduler9.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWorkWeek: {\n    workSpace: _uiScheduler10.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineMonth: {\n    workSpace: _uiScheduler8.default,\n    renderingStrategy: \"horizontalMonthLine\"\n  },\n  agenda: {\n    workSpace: _uiScheduler6.default,\n    renderingStrategy: \"agenda\"\n  }\n};\nvar StoreEventNames = {\n  ADDING: \"onAppointmentAdding\",\n  ADDED: \"onAppointmentAdded\",\n  DELETING: \"onAppointmentDeleting\",\n  DELETED: \"onAppointmentDeleted\",\n  UPDATING: \"onAppointmentUpdating\",\n  UPDATED: \"onAppointmentUpdated\"\n};\n\nvar Scheduler = function (_Widget) {\n  _inheritsLoose(Scheduler, _Widget);\n\n  function Scheduler() {\n    return _Widget.apply(this, arguments) || this;\n  }\n\n  var _proto = Scheduler.prototype;\n\n  _proto._getDefaultOptions = function () {\n    var defaultOptions = (0, _extend.extend)(_Widget.prototype._getDefaultOptions.call(this), {\n      views: [\"day\", \"week\"],\n      currentView: \"day\",\n      currentDate: _date.default.trimTime(new Date()),\n      min: void 0,\n      max: void 0,\n      dateSerializationFormat: void 0,\n      firstDayOfWeek: void 0,\n      groups: [],\n      resources: [],\n      dataSource: null,\n      customizeDateNavigatorText: void 0,\n      appointmentTemplate: \"item\",\n      dropDownAppointmentTemplate: \"dropDownAppointment\",\n      appointmentCollectorTemplate: \"appointmentCollector\",\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      startDayHour: 0,\n      endDayHour: 24,\n      editing: {\n        allowAdding: true,\n        allowDeleting: true,\n        allowDragging: true,\n        allowResizing: true,\n        allowUpdating: true,\n        allowTimeZoneEditing: false,\n        allowEditingTimeZones: false\n      },\n      showAllDayPanel: true,\n      showCurrentTimeIndicator: true,\n      shadeUntilCurrentTime: false,\n      indicatorUpdateInterval: 3e5,\n      indicatorTime: void 0,\n      recurrenceEditMode: \"dialog\",\n      cellDuration: 30,\n      maxAppointmentsPerCell: \"auto\",\n      selectedCellData: [],\n      groupByDate: false,\n      onAppointmentRendered: null,\n      onAppointmentClick: null,\n      onAppointmentDblClick: null,\n      onAppointmentContextMenu: null,\n      onCellClick: null,\n      onCellContextMenu: null,\n      onAppointmentAdding: null,\n      onAppointmentAdded: null,\n      onAppointmentUpdating: null,\n      onAppointmentUpdated: null,\n      onAppointmentDeleting: null,\n      onAppointmentDeleted: null,\n      onAppointmentFormOpening: null,\n      appointmentTooltipTemplate: \"appointmentTooltip\",\n      appointmentPopupTemplate: \"appointmentPopup\",\n      crossScrollingEnabled: false,\n      useDropDownViewSwitcher: false,\n      startDateExpr: \"startDate\",\n      endDateExpr: \"endDate\",\n      textExpr: \"text\",\n      descriptionExpr: \"description\",\n      allDayExpr: \"allDay\",\n      recurrenceRuleExpr: \"recurrenceRule\",\n      recurrenceExceptionExpr: \"recurrenceException\",\n      disabledExpr: \"disabled\",\n      remoteFiltering: false,\n      timeZone: \"\",\n      startDateTimeZoneExpr: \"startDateTimeZone\",\n      endDateTimeZoneExpr: \"endDateTimeZone\",\n      noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\n      adaptivityEnabled: false,\n      allowMultipleCellSelection: true,\n      scrolling: {\n        mode: \"standard\"\n      },\n      renovateRender: false,\n      _appointmentTooltipOffset: {\n        x: 0,\n        y: 0\n      },\n      _appointmentTooltipButtonsPosition: \"bottom\",\n      _appointmentTooltipOpenButtonText: _message.default.format(\"dxScheduler-openAppointment\"),\n      _dropDownButtonIcon: \"overflow\",\n      _appointmentCountPerCell: 2,\n      _collectorOffset: 0,\n      _appointmentOffset: 26\n    });\n    return (0, _extend.extend)(true, defaultOptions, {\n      integrationOptions: {\n        useDeferUpdateForTemplates: false\n      }\n    });\n  };\n\n  _proto._defaultOptionsRules = function () {\n    return _Widget.prototype._defaultOptionsRules.call(this).concat([{\n      device: function device() {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function device() {\n        return !_devices.default.current().generic;\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        editing: {\n          allowDragging: false,\n          allowResizing: false\n        }\n      }\n    }, {\n      device: function device() {\n        return (0, _themes.isMaterial)();\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        dateCellTemplate: function dateCellTemplate(data, index, element) {\n          var text = data.text;\n          text.split(\" \").forEach(function (text, index) {\n            var span = (0, _renderer.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\n            (0, _renderer.default)(element).append(span);\n\n            if (!index) {\n              (0, _renderer.default)(element).append(\" \");\n            }\n          });\n        },\n        _appointmentTooltipOffset: {\n          x: 0,\n          y: 11\n        },\n        _appointmentTooltipButtonsPosition: \"top\",\n        _appointmentTooltipOpenButtonText: null,\n        _dropDownButtonIcon: \"chevrondown\",\n        _appointmentCountPerCell: 1,\n        _collectorOffset: 20,\n        _appointmentOffset: 30\n      }\n    }]);\n  };\n\n  _proto._setDeprecatedOptions = function () {\n    _Widget.prototype._setDeprecatedOptions.call(this);\n\n    (0, _extend.extend)(this._deprecatedOptions, {\n      dropDownAppointmentTemplate: {\n        since: \"19.2\",\n        message: \"appointmentTooltipTemplate\"\n      },\n      allowEditingTimeZones: {\n        since: \"20.1\",\n        alias: \"allowTimeZoneEditing\"\n      }\n    });\n  };\n\n  _proto._getAppointmentSettingsGenerator = function () {\n    return new _appointmentSettingsGenerator.AppointmentSettingsGenerator(this);\n  };\n\n  _proto._postponeDataSourceLoading = function (promise) {\n    this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise);\n  };\n\n  _proto._postponeResourceLoading = function () {\n    var _this = this;\n\n    var whenLoaded = this.postponedOperations.add(\"_loadResources\", function () {\n      return _this._loadResources();\n    });\n    var resolveCallbacks = new _deferred.Deferred();\n    whenLoaded.done(function (resources) {\n      resolveCallbacks.resolve(resources);\n    });\n\n    this._postponeDataSourceLoading(whenLoaded);\n\n    return resolveCallbacks.promise();\n  };\n\n  _proto._optionChanged = function (args) {\n    var _this2 = this;\n\n    var value = args.value;\n    var name = args.name;\n\n    switch (args.name) {\n      case \"customizeDateNavigatorText\":\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"currentDate\":\n        value = this._dateOption(name);\n        value = _date.default.trimTime(new Date(value));\n        this.option(\"selectedCellData\", []);\n\n        this._workSpace.option(name, new Date(value));\n\n        this._header.option(name, new Date(value));\n\n        this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n        this._appointments.option(\"items\", []);\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case \"dataSource\":\n        this._initDataSource();\n\n        this._appointmentModel.setDataSource(this._dataSource);\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._filterAppointmentsByDate();\n\n          _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"));\n        });\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        value = this._dateOption(name);\n\n        this._updateOption(\"header\", name, new Date(value));\n\n        this._updateOption(\"workSpace\", name, new Date(value));\n\n        break;\n\n      case \"views\":\n        this._processCurrentView();\n\n        if (this._getCurrentViewOptions()) {\n          this.repaint();\n        } else {\n          this._header.option(name, value);\n        }\n\n        break;\n\n      case \"useDropDownViewSwitcher\":\n        this._header.option(name, value);\n\n        break;\n\n      case \"currentView\":\n        this._processCurrentView();\n\n        this.fire(\"validateDayHours\");\n        this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\n\n        this._validateCellDuration();\n\n        this._appointments.option({\n          items: [],\n          allowDrag: this._allowDragging(),\n          allowResize: this._allowResizing(),\n          itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\n        });\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._refreshWorkSpace(resources);\n\n          _this2._updateHeader();\n\n          _this2._filterAppointmentsByDate();\n\n          _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value);\n        });\n\n        break;\n\n      case \"appointmentTemplate\":\n        this._appointments.option(\"itemTemplate\", value);\n\n        break;\n\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"groups\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._refreshWorkSpace(resources);\n\n          _this2._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"resources\":\n        this._resourcesManager.setResources(this.option(\"resources\"));\n\n        this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._appointments.option(\"items\", []);\n\n          _this2._refreshWorkSpace(resources);\n\n          _this2._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"startDayHour\":\n      case \"endDayHour\":\n        this.fire(\"validateDayHours\");\n\n        this._appointments.option(\"items\", []);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.repaint();\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case StoreEventNames.ADDING:\n      case StoreEventNames.ADDED:\n      case StoreEventNames.UPDATING:\n      case StoreEventNames.UPDATED:\n      case StoreEventNames.DELETING:\n      case StoreEventNames.DELETED:\n      case \"onAppointmentFormOpening\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n\n      case \"onAppointmentRendered\":\n        this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\n\n        break;\n\n      case \"onAppointmentClick\":\n        this._appointments.option(\"onItemClick\", this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentDblClick\":\n        this._appointments.option(name, this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentContextMenu\":\n        this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\n\n        break;\n\n      case \"noDataText\":\n      case \"allowMultipleCellSelection\":\n      case \"selectedCellData\":\n      case \"accessKey\":\n      case \"onCellClick\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"onCellContextMenu\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"crossScrollingEnabled\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._appointments.option(\"items\", []);\n\n          _this2._refreshWorkSpace(resources);\n\n          if (_this2._readyToRenderAppointments) {\n            _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint());\n          }\n        });\n\n        break;\n\n      case \"cellDuration\":\n        this._validateCellDuration();\n\n        this._appointments.option(\"items\", []);\n\n        if (this._readyToRenderAppointments) {\n          this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\n\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n        }\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._updateOption(\"header\", name, value);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.option(name, value);\n\n        _Widget.prototype._optionChanged.call(this, args);\n\n        break;\n\n      case \"width\":\n        this._updateOption(\"header\", name, value);\n\n        if (this.option(\"crossScrollingEnabled\")) {\n          this._updateOption(\"workSpace\", \"width\", value);\n        }\n\n        _Widget.prototype._optionChanged.call(this, args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"height\":\n        _Widget.prototype._optionChanged.call(this, args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"editing\":\n        this._initEditing();\n\n        var editing = this._editing;\n\n        this._bringEditingModeToAppointments(editing);\n\n        this.hideAppointmentTooltip();\n\n        this._cleanPopup();\n\n        break;\n\n      case \"showAllDayPanel\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._filterAppointmentsByDate();\n\n          _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\n\n          _this2._updateOption(\"workSpace\", name, value);\n        });\n\n        break;\n\n      case \"showCurrentTimeIndicator\":\n      case \"indicatorTime\":\n      case \"indicatorUpdateInterval\":\n      case \"shadeUntilCurrentTime\":\n      case \"groupByDate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"appointmentDragging\":\n      case \"appointmentTooltipTemplate\":\n      case \"appointmentPopupTemplate\":\n      case \"recurrenceEditMode\":\n      case \"remoteFiltering\":\n      case \"timeZone\":\n      case \"dropDownAppointmentTemplate\":\n      case \"appointmentCollectorTemplate\":\n      case \"_appointmentTooltipOffset\":\n      case \"_appointmentTooltipButtonsPosition\":\n      case \"_appointmentTooltipOpenButtonText\":\n      case \"_dropDownButtonIcon\":\n      case \"_appointmentCountPerCell\":\n      case \"_collectorOffset\":\n      case \"_appointmentOffset\":\n        this.repaint();\n        break;\n\n      case \"dateSerializationFormat\":\n        break;\n\n      case \"maxAppointmentsPerCell\":\n        break;\n\n      case \"startDateExpr\":\n      case \"endDateExpr\":\n      case \"startDateTimeZoneExpr\":\n      case \"endDateTimeZoneExpr\":\n      case \"textExpr\":\n      case \"descriptionExpr\":\n      case \"allDayExpr\":\n      case \"recurrenceRuleExpr\":\n      case \"recurrenceExceptionExpr\":\n      case \"disabledExpr\":\n        this._updateExpression(name, value);\n\n        this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n        this._initAppointmentTemplate();\n\n        this.repaint();\n        break;\n\n      case \"adaptivityEnabled\":\n        this._toggleAdaptiveClass();\n\n        this.repaint();\n        break;\n\n      case \"scrolling\":\n        this._updateOption(\"workSpace\", args.fullName, value);\n\n        break;\n\n      case \"renovateRender\":\n        this._updateOption(\"workSpace\", name, value);\n\n        break;\n\n      default:\n        _Widget.prototype._optionChanged.call(this, args);\n\n    }\n  };\n\n  _proto._updateHeader = function () {\n    var viewCountConfig = this._getViewCountConfig();\n\n    this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\n\n    this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n    this._header.option(\"min\", this._dateOption(\"min\"));\n\n    this._header.option(\"max\", this._dateOption(\"max\"));\n\n    this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\n\n    this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\n\n    this._header.option(\"currentView\", this._currentView);\n  };\n\n  _proto._dateOption = function (optionName) {\n    var optionValue = this._getCurrentViewOption(optionName);\n\n    return _date_serialization.default.deserializeDate(optionValue);\n  };\n\n  _proto._getSerializationFormat = function (optionName) {\n    var value = this._getCurrentViewOption(optionName);\n\n    if (\"number\" === typeof value) {\n      return \"number\";\n    }\n\n    if (!(0, _type.isString)(value)) {\n      return;\n    }\n\n    return _date_serialization.default.getDateSerializationFormat(value);\n  };\n\n  _proto._bringEditingModeToAppointments = function (editing) {\n    var editingConfig = {\n      allowDelete: editing.allowUpdating && editing.allowDeleting\n    };\n\n    if (!this._isAgenda()) {\n      editingConfig.allowDrag = editing.allowDragging;\n      editingConfig.allowResize = editing.allowResizing;\n      editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing();\n    }\n\n    this._appointments.option(editingConfig);\n\n    this.repaint();\n  };\n\n  _proto._isAgenda = function () {\n    return \"agenda\" === this._getAppointmentsRenderingStrategy();\n  };\n\n  _proto._allowDragging = function () {\n    return this._editing.allowDragging && !this._isAgenda();\n  };\n\n  _proto._allowResizing = function () {\n    return this._editing.allowResizing && !this._isAgenda();\n  };\n\n  _proto._allowAllDayResizing = function () {\n    return this._editing.allowResizing && this._supportAllDayResizing();\n  };\n\n  _proto._supportAllDayResizing = function () {\n    return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1;\n  };\n\n  _proto._isAllDayExpanded = function (items) {\n    return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n  };\n\n  _proto._getTimezoneOffsetByOption = function (date) {\n    return _utils.default.calculateTimezoneByValue(this.option(\"timeZone\"), date);\n  };\n\n  _proto._filterAppointmentsByDate = function () {\n    var dateRange = this._workSpace.getDateRange();\n\n    this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"));\n  };\n\n  _proto._loadResources = function () {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    var result = new _deferred.Deferred();\n\n    this._resourcesManager.loadResources(groups).done(function (resources) {\n      this._loadedResources = resources;\n      result.resolve(resources);\n    }.bind(this));\n\n    return result.promise();\n  };\n\n  _proto._reloadDataSource = function () {\n    var result = new _deferred.Deferred();\n\n    if (this._dataSource) {\n      this._dataSource.load().done(function () {\n        (0, _ui3.hide)();\n\n        this._fireContentReadyAction(result);\n      }.bind(this)).fail(function () {\n        (0, _ui3.hide)();\n        result.reject();\n      });\n\n      this._dataSource.isLoading() && (0, _ui3.show)({\n        container: this.$element(),\n        position: {\n          of: this.$element()\n        }\n      });\n    } else {\n      this._fireContentReadyAction(result);\n    }\n\n    return result.promise();\n  };\n\n  _proto._fireContentReadyAction = function (result) {\n    var contentReadyBase = _Widget.prototype._fireContentReadyAction.bind(this);\n\n    var fireContentReady = function fireContentReady() {\n      contentReadyBase();\n      null === result || void 0 === result ? void 0 : result.resolve();\n    };\n\n    if (this._workSpaceRecalculation) {\n      var _this$_workSpaceRecal;\n\n      null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(function () {\n        fireContentReady();\n      });\n    } else {\n      fireContentReady();\n    }\n  };\n\n  _proto._dimensionChanged = function () {\n    var filteredItems = this.getFilteredItems();\n\n    this._toggleSmallClass();\n\n    if (!this._isAgenda() && filteredItems && this._isVisible()) {\n      this._workSpace._cleanAllowedPositions();\n\n      this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\n\n      this._workSpace._dimensionChanged();\n\n      var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\n\n      this._appointments.option(\"items\", appointments);\n    }\n\n    this.hideAppointmentTooltip();\n\n    this._appointmentPopup.triggerResize();\n\n    this._appointmentPopup.updatePopupFullScreenMode();\n  };\n\n  _proto._clean = function () {\n    this._cleanPopup();\n\n    _Widget.prototype._clean.call(this);\n  };\n\n  _proto._toggleSmallClass = function () {\n    var width = (0, _position.getBoundingRect)(this.$element().get(0)).width;\n    this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH);\n  };\n\n  _proto._toggleAdaptiveClass = function () {\n    this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"));\n  };\n\n  _proto._visibilityChanged = function (visible) {\n    visible && this._dimensionChanged();\n  };\n\n  _proto._dataSourceOptions = function () {\n    return {\n      paginate: false\n    };\n  };\n\n  _proto._init = function () {\n    var _this3 = this;\n\n    this._initExpressions({\n      startDate: this.option(\"startDateExpr\"),\n      endDate: this.option(\"endDateExpr\"),\n      startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\n      endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\n      allDay: this.option(\"allDayExpr\"),\n      text: this.option(\"textExpr\"),\n      description: this.option(\"descriptionExpr\"),\n      recurrenceRule: this.option(\"recurrenceRuleExpr\"),\n      recurrenceException: this.option(\"recurrenceExceptionExpr\"),\n      disabled: this.option(\"disabledExpr\")\n    });\n\n    _Widget.prototype._init.call(this);\n\n    this._initDataSource();\n\n    this._loadedResources = [];\n    this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser.default.msie && _support.touch));\n\n    this._initEditing();\n\n    this._resourcesManager = new _uiScheduler4.default(this.option(\"resources\"));\n\n    var combinedDataAccessors = this._combineDataAccessors();\n\n    this._appointmentModel = new _uiScheduler2.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\n\n    this._initActions();\n\n    this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\n    this._asyncTemplatesTimers = [];\n    this._dataSourceLoadedCallback = (0, _callbacks.default)();\n    this._subscribes = _uiScheduler5.default;\n    this.timeZoneCalculator = new _timeZoneCalculator.TimeZoneCalculator({\n      getClientOffset: function getClientOffset(date) {\n        return _utils.default.getClientTimezoneOffset(date);\n      },\n      getCommonOffset: function getCommonOffset(date, timeZone) {\n        return _utils.default.calculateTimezoneByValue(timeZone || _this3.option(\"timeZone\"), date);\n      },\n      getAppointmentOffset: function getAppointmentOffset(date, appointmentTimezone) {\n        return _utils.default.calculateTimezoneByValue(appointmentTimezone, date);\n      }\n    });\n  };\n\n  _proto._initTemplates = function () {\n    this._initAppointmentTemplate();\n\n    this._templateManager.addDefaultTemplates({\n      appointmentTooltip: new _empty_template.EmptyTemplate(),\n      dropDownAppointment: new _empty_template.EmptyTemplate()\n    });\n\n    _Widget.prototype._initTemplates.call(this);\n  };\n\n  _proto._initAppointmentTemplate = function () {\n    var _this4 = this;\n\n    var expr = this._dataAccessors.expr;\n\n    var createGetter = function createGetter(property) {\n      return (0, _data.compileGetter)(\"appointmentData.\".concat(property));\n    };\n\n    var getDate = function getDate(getter) {\n      return function (data) {\n        var value = getter(data);\n\n        if (value instanceof Date) {\n          return value.valueOf();\n        }\n\n        return value;\n      };\n    };\n\n    this._templateManager.addDefaultTemplates(_defineProperty({}, \"item\", new _bindable_template.BindableTemplate(function ($container, data, model) {\n      return _this4.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model);\n    }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\n      text: createGetter(expr.textExpr),\n      startDate: getDate(createGetter(expr.startDateExpr)),\n      endDate: getDate(createGetter(expr.endDateExpr)),\n      startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\n      endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\n      allDay: createGetter(expr.allDayExpr),\n      recurrenceRule: createGetter(expr.recurrenceRuleExpr)\n    })));\n  };\n\n  _proto._combineDataAccessors = function () {\n    var resourcesDataAccessors = this._resourcesManager._dataAccessors;\n    var result = (0, _extend.extend)(true, {}, this._dataAccessors);\n    (0, _iterator.each)(resourcesDataAccessors, function (type, accessor) {\n      result[type].resources = accessor;\n    }.bind(this));\n    return result;\n  };\n\n  _proto._renderContent = function () {\n    this._renderContentImpl();\n  };\n\n  _proto._dataSourceChangedHandler = function (result) {\n    if (this._readyToRenderAppointments) {\n      this._workSpaceRecalculation.done(function () {\n        this._renderAppointments();\n\n        if (this._isAgenda()) {\n          this._workSpace._renderView();\n\n          this._dataSourceLoadedCallback.fireWith(this, [this.getFilteredItems()]);\n        }\n      }.bind(this));\n    }\n  };\n\n  _proto.isVirtualScrolling = function () {\n    var _this$getWorkSpace;\n\n    return null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.isVirtualScrolling();\n  };\n\n  _proto._filterAppointments = function () {\n    var prerenderFilterName = this.isVirtualScrolling() ? \"prerenderFilterVirtual\" : \"prerenderFilter\";\n    return this.fire(prerenderFilterName);\n  };\n\n  _proto._renderAppointments = function () {\n    this._filteredItems = this._filterAppointments();\n\n    this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\n\n    if (this._isAgenda()) {\n      this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true);\n    }\n\n    if (this._filteredItems.length && this._isVisible()) {\n      this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n\n      this._appointmentModel.cleanModelState();\n    } else {\n      this._appointments.option(\"items\", []);\n    }\n  };\n\n  _proto._getAppointmentsToRepaint = function () {\n    var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\n\n    return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"));\n  };\n\n  _proto._initExpressions = function (fields) {\n    var isDateField = function isDateField(field) {\n      return \"startDate\" === field || \"endDate\" === field;\n    };\n\n    if (!this._dataAccessors) {\n      this._dataAccessors = {\n        getter: {},\n        setter: {},\n        expr: {}\n      };\n    }\n\n    (0, _iterator.each)(fields, function (name, expr) {\n      if (expr) {\n        var getter = (0, _data.compileGetter)(expr);\n        var setter = (0, _data.compileSetter)(expr);\n        var dateGetter;\n        var dateSetter;\n\n        if (isDateField(name)) {\n          var that = this;\n\n          dateGetter = function dateGetter() {\n            var value = getter.apply(this, arguments);\n\n            if ((0, _config.default)().forceIsoDateParsing) {\n              if (!that.option(\"dateSerializationFormat\")) {\n                var format = _date_serialization.default.getDateSerializationFormat(value);\n\n                if (format) {\n                  that.option(\"dateSerializationFormat\", format);\n                }\n              }\n\n              value = _date_serialization.default.deserializeDate(value);\n            }\n\n            return value;\n          };\n\n          dateSetter = function dateSetter(object, value) {\n            if ((0, _config.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\n              value = _date_serialization.default.serializeDate(value, that.option(\"dateSerializationFormat\"));\n            }\n\n            setter.call(this, object, value);\n          };\n        }\n\n        this._dataAccessors.getter[name] = dateGetter || getter;\n        this._dataAccessors.setter[name] = dateSetter || setter;\n        this._dataAccessors.expr[name + \"Expr\"] = expr;\n      } else {\n        delete this._dataAccessors.getter[name];\n        delete this._dataAccessors.setter[name];\n        delete this._dataAccessors.expr[name + \"Expr\"];\n      }\n    }.bind(this));\n  };\n\n  _proto._updateExpression = function (name, value) {\n    var exprObj = {};\n    exprObj[name.replace(\"Expr\", \"\")] = value;\n\n    this._initExpressions(exprObj);\n  };\n\n  _proto._initEditing = function () {\n    var editing = this.option(\"editing\");\n    this._editing = {\n      allowAdding: !!editing,\n      allowUpdating: !!editing,\n      allowDeleting: !!editing,\n      allowResizing: !!editing,\n      allowDragging: !!editing\n    };\n\n    if ((0, _type.isObject)(editing)) {\n      this._editing = (0, _extend.extend)(this._editing, editing);\n    }\n\n    this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\n    this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\n    this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly());\n  };\n\n  _proto._isReadOnly = function () {\n    var result = true;\n    var editing = this._editing;\n\n    for (var prop in editing) {\n      if (Object.prototype.hasOwnProperty.call(editing, prop)) {\n        result = result && !editing[prop];\n      }\n    }\n\n    return result;\n  };\n\n  _proto._dispose = function () {\n    this._appointmentTooltip && this._appointmentTooltip.dispose();\n    this.hideAppointmentPopup();\n    this.hideAppointmentTooltip();\n\n    this._asyncTemplatesTimers.forEach(clearTimeout);\n\n    this._asyncTemplatesTimers = [];\n\n    _Widget.prototype._dispose.call(this);\n  };\n\n  _proto._initActions = function () {\n    this._actions = {\n      onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\n      onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\n      onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\n      onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\n      onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\n      onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\n      onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\n    };\n  };\n\n  _proto._getAppointmentRenderedAction = function () {\n    return this._createActionByOption(\"onAppointmentRendered\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  };\n\n  _proto._renderFocusTarget = function () {\n    return (0, _common.noop)();\n  };\n\n  _proto._initMarkup = function () {\n    _Widget.prototype._initMarkup.call(this);\n\n    this.fire(\"validateDayHours\");\n\n    this._validateCellDuration();\n\n    this._processCurrentView();\n\n    this._renderHeader();\n\n    this._layoutManager = new _uiSchedulerAppointments.default(this, this._getAppointmentsRenderingStrategy());\n    this._appointments = this._createComponent(\"<div>\", _uiScheduler.default, this._appointmentsConfig());\n\n    this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\n\n    this._appointmentTooltip = new (this.option(\"adaptivityEnabled\") ? _mobileTooltipStrategy.MobileTooltipStrategy : _desktopTooltipStrategy.DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\n    this._appointmentPopup = new _appointmentPopup.default(this);\n\n    if (this._isLoaded() || this._isDataSourceLoading()) {\n      this._initMarkupCore(this._loadedResources);\n\n      this._dataSourceChangedHandler(this._dataSource.items());\n\n      this._fireContentReadyAction();\n    } else {\n      this._loadResources().done(function (resources) {\n        this._initMarkupCore(resources);\n\n        this._reloadDataSource();\n      }.bind(this));\n    }\n  };\n\n  _proto._getAppointmentTooltipOptions = function () {\n    var _this5 = this;\n\n    var that = this;\n    return {\n      createComponent: that._createComponent.bind(that),\n      container: that.$element(),\n      getScrollableContainer: that.getWorkSpaceScrollableContainer.bind(that),\n      addDefaultTemplates: that._templateManager.addDefaultTemplates.bind(that._templateManager),\n      getAppointmentTemplate: that._getAppointmentTemplate.bind(that),\n      showAppointmentPopup: that.showAppointmentPopup.bind(that),\n      checkAndDeleteAppointment: that.checkAndDeleteAppointment.bind(that),\n      isAppointmentInAllDayPanel: that.isAppointmentInAllDayPanel.bind(that),\n      createFormattedDateText: function createFormattedDateText(appointment, targetedAppointment, format) {\n        return _this5.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format);\n      },\n      getAppointmentDisabled: function getAppointmentDisabled(appointment) {\n        return _this5.createAppointmentAdapter(appointment).disabled;\n      }\n    };\n  };\n\n  _proto.checkAndDeleteAppointment = function (appointment, targetedAppointment) {\n    var _this6 = this;\n\n    var targetedAdapter = this.createAppointmentAdapter(targetedAppointment);\n\n    this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, function () {\n      _this6.deleteAppointment(appointment);\n    }, true);\n  };\n\n  _proto._getExtraAppointmentTooltipOptions = function () {\n    return {\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      editing: this.option(\"editing\"),\n      offset: this.option(\"_appointmentTooltipOffset\")\n    };\n  };\n\n  _proto.isAppointmentInAllDayPanel = function (appointmentData) {\n    var workSpace = this._workSpace;\n    var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\n    return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\");\n  };\n\n  _proto._initMarkupCore = function (resources) {\n    var _this7 = this;\n\n    this._readyToRenderAppointments = (0, _window.hasWindow)();\n    this._workSpace && this._cleanWorkspace();\n\n    this._renderWorkSpace(resources);\n\n    this._appointments.option({\n      fixedContainer: this._workSpace.getFixedContainer(),\n      allDayContainer: this._workSpace.getAllDayContainer()\n    });\n\n    this._waitAsyncTemplate(function () {\n      var _this7$_workSpaceReca;\n\n      return null === (_this7$_workSpaceReca = _this7._workSpaceRecalculation) || void 0 === _this7$_workSpaceReca ? void 0 : _this7$_workSpaceReca.resolve();\n    });\n\n    this._filterAppointmentsByDate();\n  };\n\n  _proto._isLoaded = function () {\n    return this._isResourcesLoaded() && this._isDataSourceLoaded();\n  };\n\n  _proto._isResourcesLoaded = function () {\n    return (0, _type.isDefined)(this._loadedResources);\n  };\n\n  _proto._isDataSourceLoaded = function () {\n    return this._dataSource && this._dataSource.isLoaded();\n  };\n\n  _proto._render = function () {\n    this._toggleSmallClass();\n\n    this._toggleAdaptiveClass();\n\n    _Widget.prototype._render.call(this);\n  };\n\n  _proto._renderHeader = function () {\n    var $header = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n    this._header = this._createComponent($header, _uiScheduler3.default, this._headerConfig());\n  };\n\n  _proto._headerConfig = function () {\n    var _this8 = this;\n\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var countConfig = this._getViewCountConfig();\n\n    var result = (0, _extend.extend)({\n      isAdaptive: this.option(\"adaptivityEnabled\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      currentView: this._currentView,\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      width: this.option(\"width\"),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\n      _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\n      customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.views = this.option(\"views\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n\n    result.todayDate = function () {\n      var result = _this8.timeZoneCalculator.createDate(new Date(), {\n        path: \"toGrid\"\n      });\n\n      return result;\n    };\n\n    return result;\n  };\n\n  _proto._appointmentsConfig = function () {\n    var that = this;\n    var config = {\n      observer: this,\n      onItemRendered: this._getAppointmentRenderedAction(),\n      onItemClick: this._createActionByOption(\"onAppointmentClick\"),\n      onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\n      onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      allowDrag: this._allowDragging(),\n      allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\n      allowResize: this._allowResizing(),\n      allowAllDayResize: this._allowAllDayResizing(),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      currentView: this.option(\"currentView\"),\n      onContentReady: function onContentReady() {\n        that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()));\n      }\n    };\n    return config;\n  };\n\n  _proto.getCollectorOffset = function () {\n    if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\n      return this.option(\"_collectorOffset\");\n    } else {\n      return 0;\n    }\n  };\n\n  _proto.getAppointmentDurationInMinutes = function () {\n    return this._getCurrentViewOption(\"cellDuration\");\n  };\n\n  _proto._processCurrentView = function () {\n    var views = this.option(\"views\");\n    var currentView = this.option(\"currentView\");\n    var that = this;\n    this._currentView = currentView;\n    (0, _iterator.each)(views, function (_, view) {\n      var isViewIsObject = (0, _type.isObject)(view);\n      var viewName = isViewIsObject ? view.name : view;\n      var viewType = view.type;\n\n      if (currentView === viewName || currentView === viewType) {\n        that._currentView = view;\n        return false;\n      }\n    });\n  };\n\n  _proto._validateCellDuration = function () {\n    var endDayHour = this._getCurrentViewOption(\"endDayHour\");\n\n    var startDayHour = this._getCurrentViewOption(\"startDayHour\");\n\n    var cellDuration = this._getCurrentViewOption(\"cellDuration\");\n\n    if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\n      _ui.default.log(\"W1015\");\n    }\n  };\n\n  _proto._getCurrentViewType = function () {\n    return this._currentView.type || this._currentView;\n  };\n\n  _proto._getAppointmentsRenderingStrategy = function () {\n    return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy;\n  };\n\n  _proto._renderWorkSpace = function (groups) {\n    this._readyToRenderAppointments && this._toggleSmallClass();\n    var $workSpace = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\n\n    var countConfig = this._getViewCountConfig();\n\n    var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\n\n    var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\n\n    this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\n    this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\n\n    this._workSpace._attachTablesEvents();\n\n    this._workSpace.getWorkArea().append(this._appointments.$element());\n\n    this._recalculateWorkspace();\n\n    countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\n\n    this._appointments.option(\"_collectorOffset\", this.getCollectorOffset());\n  };\n\n  _proto._getViewCountConfig = function () {\n    var currentView = this.option(\"currentView\");\n\n    var view = this._getViewByName(currentView);\n\n    var viewCount = view && view.intervalCount || 1;\n    var startDate = view && view.startDate || null;\n    return {\n      intervalCount: viewCount,\n      startDate: startDate\n    };\n  };\n\n  _proto._getViewByName = function (name) {\n    var views = this.option(\"views\");\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].name === name || views[i].type === name || views[i] === name) {\n        return views[i];\n      }\n    }\n  };\n\n  _proto._recalculateWorkspace = function () {\n    var _this9 = this;\n\n    this._workSpaceRecalculation = new _deferred.Deferred();\n\n    this._waitAsyncTemplate(function () {\n      (0, _visibility_change.triggerResizeEvent)(_this9._workSpace.$element());\n\n      _this9._workSpace._refreshDateTimeIndication();\n    });\n  };\n\n  _proto._workSpaceConfig = function (groups, countConfig) {\n    var _currentViewOptions$s,\n        _this10 = this;\n\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var scrolling = this.option(\"scrolling\");\n    var result = (0, _extend.extend)({\n      noDataText: this.option(\"noDataText\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      tabIndex: this.option(\"tabIndex\"),\n      accessKey: this.option(\"accessKey\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      cellDuration: this.option(\"cellDuration\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\n      indicatorTime: this.option(\"indicatorTime\"),\n      indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\n      shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\n      allDayExpanded: this._appointments.option(\"items\"),\n      crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\n      dataCellTemplate: this.option(\"dataCellTemplate\"),\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      dateCellTemplate: this.option(\"dateCellTemplate\"),\n      allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\n      selectedCellData: this.option(\"selectedCellData\"),\n      onSelectionChanged: function onSelectionChanged(args) {\n        _this10.option(\"selectedCellData\", args.selectedCellData);\n      },\n      groupByDate: this._getCurrentViewOption(\"groupByDate\"),\n      scrolling: scrolling,\n      renovateRender: this.option(\"renovateRender\") || \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode)\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.startDate = countConfig.startDate;\n    result.groups = groups;\n    result.onCellClick = this._createActionByOption(\"onCellClick\");\n    result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.hoursInterval = result.cellDuration / 60;\n    result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\n    result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\n    result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\n    result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\n    result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\n    return result;\n  };\n\n  _proto._waitAsyncTemplate = function (callback) {\n    if (this._options.silent(\"templatesRenderAsynchronously\")) {\n      var timer = setTimeout(function () {\n        callback();\n        clearTimeout(timer);\n      });\n\n      this._asyncTemplatesTimers.push(timer);\n    } else {\n      callback();\n    }\n  };\n\n  _proto._getCurrentViewOptions = function () {\n    return this._currentView;\n  };\n\n  _proto._getCurrentViewOption = function (optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\n      return currentViewOptions[optionName];\n    }\n\n    return this.option(optionName);\n  };\n\n  _proto._getAppointmentTemplate = function (optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && currentViewOptions[optionName]) {\n      return this._getTemplate(currentViewOptions[optionName]);\n    }\n\n    return this._getTemplateByOption(optionName);\n  };\n\n  _proto._updateOption = function (viewName, optionName, value) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (!currentViewOptions || !(0, _type.isDefined)(currentViewOptions[optionName])) {\n      this[\"_\" + viewName].option(optionName, value);\n    }\n  };\n\n  _proto._refreshWorkSpace = function (groups) {\n    var _this11 = this;\n\n    this._cleanWorkspace();\n\n    delete this._workSpace;\n\n    this._renderWorkSpace(groups);\n\n    if (this._readyToRenderAppointments) {\n      this._appointments.option({\n        fixedContainer: this._workSpace.getFixedContainer(),\n        allDayContainer: this._workSpace.getAllDayContainer()\n      });\n\n      this._waitAsyncTemplate(function () {\n        return _this11._workSpaceRecalculation.resolve();\n      });\n    }\n  };\n\n  _proto._cleanWorkspace = function () {\n    this._appointments.$element().detach();\n\n    this._workSpace._dispose();\n\n    this._workSpace.$element().remove();\n\n    this.option(\"selectedCellData\", []);\n  };\n\n  _proto.getWorkSpaceScrollable = function () {\n    return this._workSpace.getScrollable();\n  };\n\n  _proto.getWorkSpaceScrollableScrollTop = function (allDay) {\n    return this._workSpace.getGroupedScrollableScrollTop(allDay);\n  };\n\n  _proto.getWorkSpaceScrollableScrollLeft = function () {\n    return this._workSpace.getScrollableScrollLeft();\n  };\n\n  _proto.getWorkSpaceScrollableContainer = function () {\n    return this._workSpace.getScrollableContainer();\n  };\n\n  _proto.getWorkSpaceAllDayHeight = function () {\n    return this._workSpace.getAllDayHeight();\n  };\n\n  _proto.getWorkSpaceAllDayOffset = function () {\n    return this._workSpace.getAllDayOffset();\n  };\n\n  _proto.getWorkSpaceHeaderPanelHeight = function () {\n    return this._workSpace.getHeaderPanelHeight();\n  };\n\n  _proto.getWorkSpaceDateTableOffset = function () {\n    return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0;\n  };\n\n  _proto.getWorkSpace = function () {\n    return this._workSpace;\n  };\n\n  _proto.getAppointmentModel = function () {\n    return this._appointmentModel;\n  };\n\n  _proto.getHeader = function () {\n    return this._header;\n  };\n\n  _proto.getMaxAppointmentsPerCell = function () {\n    return this._getCurrentViewOption(\"maxAppointmentsPerCell\");\n  };\n\n  _proto._cleanPopup = function () {\n    this._appointmentPopup && this._appointmentPopup.dispose();\n  };\n\n  _proto._checkRecurringAppointment = function (targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent) {\n    var _this12 = this;\n\n    delete this._updatedRecAppointment;\n    var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\n\n    if (!(0, _recurrence.getRecurrenceProcessor)().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\n      callback();\n      return;\n    }\n\n    var editMode = this.option(\"recurrenceEditMode\");\n\n    switch (editMode) {\n      case \"series\":\n        callback();\n        break;\n\n      case \"occurrence\":\n        this._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n\n        break;\n\n      default:\n        if (dragEvent) {\n          dragEvent.cancel = new _deferred.Deferred();\n        }\n\n        this._showRecurrenceChangeConfirm(isDeleted).done(function (result) {\n          result && callback();\n          !result && _this12._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\n        }).fail(function () {\n          return _this12._appointments.moveAppointmentBack(dragEvent);\n        });\n\n    }\n  };\n\n  _proto._excludeAppointmentFromSeries = function (rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\n    var _this13 = this;\n\n    var appointment = this.createAppointmentAdapter(_objectSpread({}, rawAppointment));\n    var newAppointment = this.createAppointmentAdapter(newRawAppointment);\n    newAppointment.recurrenceRule = \"\";\n    newAppointment.recurrenceException = \"\";\n    var canCreateNewAppointment = !isDeleted && !isPopupEditing;\n\n    if (canCreateNewAppointment) {\n      var keyPropertyName = this._appointmentModel.keyName;\n      delete newRawAppointment[keyPropertyName];\n      this.addAppointment(newRawAppointment);\n    }\n\n    appointment.recurrenceException = this._createRecurrenceException(appointment, exceptionDate);\n\n    if (isPopupEditing) {\n      this._updatedRecAppointment = appointment.source();\n\n      this._appointmentPopup.show(newRawAppointment, true);\n\n      this._editAppointmentData = rawAppointment;\n    } else {\n      this._updateAppointment(rawAppointment, appointment.source(), function () {\n        _this13._appointments.moveAppointmentBack(dragEvent);\n      }, dragEvent);\n    }\n  };\n\n  _proto._createRecurrenceException = function (appointment, exceptionDate) {\n    var result = [];\n\n    if (appointment.recurrenceException) {\n      result.push(appointment.recurrenceException);\n    }\n\n    result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\n    return result.join();\n  };\n\n  _proto._getSerializedDate = function (date, startDate, isAllDay) {\n    isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\n    return _date_serialization.default.serializeDate(date, UTC_FULL_DATE_FORMAT);\n  };\n\n  _proto._showRecurrenceChangeConfirm = function (isDeleted) {\n    var message = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\n\n    var seriesText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\n\n    var occurrenceText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\n\n    return (0, _dialog.custom)({\n      messageHtml: message,\n      showCloseButton: true,\n      showTitle: true,\n      buttons: [{\n        text: seriesText,\n        onClick: function onClick() {\n          return true;\n        }\n      }, {\n        text: occurrenceText,\n        onClick: function onClick() {\n          return false;\n        }\n      }]\n    }).show();\n  };\n\n  _proto._getUpdatedData = function (rawAppointment) {\n    var _this14 = this;\n\n    var getConvertedFromGrid = function getConvertedFromGrid(date) {\n      return date ? _this14.timeZoneCalculator.createDate(date, {\n        path: \"fromGrid\"\n      }) : void 0;\n    };\n\n    var isValidDate = function isValidDate(date) {\n      return !isNaN(new Date(date).getTime());\n    };\n\n    var targetCell = this.getTargetCellData();\n    var appointment = this.createAppointmentAdapter(rawAppointment);\n    var cellStartDate = getConvertedFromGrid(targetCell.startDate);\n    var cellEndDate = getConvertedFromGrid(targetCell.endDate);\n    var appointmentStartDate = new Date(appointment.startDate);\n    var appointmentEndDate = new Date(appointment.endDate);\n    var resultedStartDate = cellStartDate || appointmentStartDate;\n\n    if (!isValidDate(appointmentStartDate)) {\n      appointmentStartDate = resultedStartDate;\n    }\n\n    if (!isValidDate(appointmentEndDate)) {\n      appointmentEndDate = cellEndDate;\n    }\n\n    var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\n    var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\n\n    if (isKeepAppointmentHours) {\n      var trimTime = _date.default.trimTime;\n      var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\n        path: \"toGrid\"\n      });\n      var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\n      resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\n      resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\n        path: \"fromGrid\"\n      });\n    }\n\n    var result = this.createAppointmentAdapter({});\n\n    if (void 0 !== targetCell.allDay) {\n      result.allDay = targetCell.allDay;\n    }\n\n    result.startDate = resultedStartDate;\n    var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\n\n    if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\n      resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate);\n    }\n\n    if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\n      var dateCopy = new Date(resultedStartDate);\n      dateCopy.setHours(0);\n      resultedEndDate = new Date(dateCopy.getTime() + duration);\n\n      if (0 !== resultedEndDate.getHours()) {\n        resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"));\n      }\n    }\n\n    var timeZoneOffset = _utils.default.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\n\n    result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\n    var rawResult = result.source();\n\n    this._resourcesManager.setResourcesToItem(rawResult, targetCell.groups);\n\n    return rawResult;\n  };\n\n  _proto.getTargetedAppointment = function (appointment, element) {\n    var settings = _utils2.default.dataAccessors.getAppointmentSettings(element);\n\n    var info = _utils2.default.dataAccessors.getAppointmentInfo(element);\n\n    var appointmentIndex = (0, _renderer.default)(element).data(this._appointments._itemIndexKey());\n    var adapter = this.createAppointmentAdapter(appointment);\n    var targetedAdapter = adapter.clone();\n\n    if (this._isAgenda() && adapter.isRecurrent) {\n      var getStartDate = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\n      var newStartDate = getStartDate((0, _renderer.default)(element), adapter.startDate).startDate;\n      targetedAdapter.startDate = newStartDate;\n      targetedAdapter.endDate = new Date(newStartDate.getTime() + adapter.duration);\n    } else {\n      if (settings) {\n        targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\n        targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate;\n      }\n    }\n\n    var rawTargetedAppointment = targetedAdapter.source();\n\n    if (element) {\n      this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex);\n    }\n\n    return rawTargetedAppointment;\n  };\n\n  _proto.subscribe = function (subject, action) {\n    this._subscribes[subject] = _uiScheduler5.default[subject] = action;\n  };\n\n  _proto.fire = function (subject) {\n    var callback = this._subscribes[subject];\n    var args = Array.prototype.slice.call(arguments);\n\n    if (!(0, _type.isFunction)(callback)) {\n      throw _ui.default.Error(\"E1031\", subject);\n    }\n\n    return callback.apply(this, args.slice(1));\n  };\n\n  _proto.getTargetCellData = function () {\n    return this._workSpace.getDataByDroppableCell();\n  };\n\n  _proto._updateAppointment = function (target, rawAppointment, onUpdatePrevented, dragEvent) {\n    var updatingOptions = {\n      newData: rawAppointment,\n      oldData: (0, _extend.extend)({}, target),\n      cancel: false\n    };\n\n    var performFailAction = function (err) {\n      if (onUpdatePrevented) {\n        onUpdatePrevented.call(this);\n      }\n\n      if (err && \"Error\" === err.name) {\n        throw err;\n      }\n    }.bind(this);\n\n    this._actions[StoreEventNames.UPDATING](updatingOptions);\n\n    if (dragEvent && !(0, _type.isDeferred)(dragEvent.cancel)) {\n      dragEvent.cancel = new _deferred.Deferred();\n    }\n\n    return this._processActionResult(updatingOptions, function (canceled) {\n      var _this15 = this;\n\n      var deferred = new _deferred.Deferred();\n\n      if (!canceled) {\n        this._expandAllDayPanel(rawAppointment);\n\n        try {\n          deferred = this._appointmentModel.update(target, rawAppointment).done(function () {\n            dragEvent && dragEvent.cancel.resolve(false);\n          }).always(function (storeAppointment) {\n            return _this15._onDataPromiseCompleted(StoreEventNames.UPDATED, storeAppointment);\n          }).fail(function () {\n            return performFailAction();\n          });\n        } catch (err) {\n          performFailAction(err);\n          deferred.resolve();\n        }\n      } else {\n        performFailAction();\n        deferred.resolve();\n      }\n\n      return deferred.promise();\n    });\n  };\n\n  _proto._processActionResult = function (actionOptions, callback) {\n    var _this16 = this;\n\n    var deferred = new _deferred.Deferred();\n\n    var resolveCallback = function resolveCallback(callbackResult) {\n      (0, _deferred.when)((0, _deferred.fromPromise)(callbackResult)).always(deferred.resolve);\n    };\n\n    if ((0, _type.isPromise)(actionOptions.cancel)) {\n      (0, _deferred.when)((0, _deferred.fromPromise)(actionOptions.cancel)).always(function (cancel) {\n        if (!(0, _type.isDefined)(cancel)) {\n          cancel = \"rejected\" === actionOptions.cancel.state();\n        }\n\n        resolveCallback(callback.call(_this16, cancel));\n      });\n    } else {\n      resolveCallback(callback.call(this, actionOptions.cancel));\n    }\n\n    return deferred.promise();\n  };\n\n  _proto._expandAllDayPanel = function (appointment) {\n    if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\n      this._workSpace.option(\"allDayExpanded\", true);\n    }\n  };\n\n  _proto._onDataPromiseCompleted = function (handlerName, storeAppointment, appointment) {\n    var args = {\n      appointmentData: appointment || storeAppointment\n    };\n\n    if (storeAppointment instanceof Error) {\n      args.error = storeAppointment;\n    } else {\n      this._appointmentPopup.isVisible() && this._appointmentPopup.hide();\n    }\n\n    this._actions[handlerName](args);\n\n    this._fireContentReadyAction();\n  };\n\n  _proto.getAppointmentPopup = function () {\n    return this._appointmentPopup.getPopup();\n  };\n\n  _proto.getUpdatedAppointment = function () {\n    return this._appointmentModel.getUpdatedAppointment();\n  };\n\n  _proto.getUpdatedAppointmentKeys = function () {\n    return this._appointmentModel.getUpdatedAppointmentKeys();\n  };\n\n  _proto.getAppointmentsInstance = function () {\n    return this._appointments;\n  };\n\n  _proto.getResourceManager = function () {\n    return this._resourcesManager;\n  };\n\n  _proto.getLayoutManager = function () {\n    return this._layoutManager;\n  };\n\n  _proto.getRenderingStrategyInstance = function () {\n    return this._layoutManager.getRenderingStrategyInstance();\n  };\n\n  _proto.getFilteredItems = function () {\n    return this._filteredItems;\n  };\n\n  _proto.getActions = function () {\n    return this._actions;\n  };\n\n  _proto.appointmentTakesAllDay = function (appointment) {\n    return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n  };\n\n  _proto._getRecurrenceException = function (rawAppointment) {\n    var appointment = this.createAppointmentAdapter(rawAppointment);\n    var recurrenceException = appointment.recurrenceException;\n\n    if (recurrenceException) {\n      var exceptions = recurrenceException.split(\",\");\n\n      for (var i = 0; i < exceptions.length; i++) {\n        exceptions[i] = this._convertRecurrenceException(exceptions[i], appointment.startDate);\n      }\n\n      return exceptions.join();\n    }\n\n    return recurrenceException;\n  };\n\n  _proto._convertRecurrenceException = function (exceptionString, startDate) {\n    var _this17 = this;\n\n    exceptionString = exceptionString.replace(/\\s/g, \"\");\n\n    var getConvertedToTimeZone = function getConvertedToTimeZone(date) {\n      return _this17.timeZoneCalculator.createDate(date, {\n        path: \"toGrid\"\n      });\n    };\n\n    var exceptionDate = _date_serialization.default.deserializeDate(exceptionString);\n\n    var convertedStartDate = getConvertedToTimeZone(startDate);\n    var convertedExceptionDate = getConvertedToTimeZone(exceptionDate);\n    convertedExceptionDate = _utils.default.correctRecurrenceExceptionByTimezone(convertedExceptionDate, convertedStartDate, this.option(\"timeZone\"));\n    exceptionString = _date_serialization.default.serializeDate(convertedExceptionDate, FULL_DATE_FORMAT);\n    return exceptionString;\n  };\n\n  _proto.dayHasAppointment = function (day, rawAppointment, trimTime) {\n    var _this18 = this;\n\n    var getConvertedToTimeZone = function getConvertedToTimeZone(date) {\n      return _this18.timeZoneCalculator.createDate(date, {\n        path: \"toGrid\"\n      });\n    };\n\n    var appointment = this.createAppointmentAdapter(rawAppointment);\n    var startDate = new Date(appointment.startDate);\n    var endDate = new Date(appointment.endDate);\n    startDate = getConvertedToTimeZone(startDate);\n    endDate = getConvertedToTimeZone(endDate);\n\n    if (day.getTime() === endDate.getTime()) {\n      return startDate.getTime() === endDate.getTime();\n    }\n\n    if (trimTime) {\n      day = _date.default.trimTime(day);\n      startDate = _date.default.trimTime(startDate);\n      endDate = _date.default.trimTime(endDate);\n    }\n\n    var dayTimeStamp = day.getTime();\n    var startDateTimeStamp = startDate.getTime();\n    var endDateTimeStamp = endDate.getTime();\n    return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp;\n  };\n\n  _proto.setTargetedAppointmentResources = function (rawAppointment, element, appointmentIndex) {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    if (null !== groups && void 0 !== groups && groups.length) {\n      var resourcesSetter = this._resourcesManager._dataAccessors.setter;\n      var workSpace = this._workSpace;\n      var getGroups;\n      var setResourceCallback;\n\n      if (this._isAgenda()) {\n        getGroups = function getGroups() {\n          var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\n\n          return workSpace._getCellGroups(apptSettings[0].groupIndex);\n        };\n\n        setResourceCallback = function setResourceCallback(_, group) {\n          resourcesSetter[group.name](rawAppointment, group.id);\n        };\n      } else {\n        getGroups = function getGroups() {\n          var setting = _utils2.default.dataAccessors.getAppointmentSettings(element) || {};\n          return workSpace.getCellDataByCoordinates({\n            left: setting.left,\n            top: setting.top\n          }).groups;\n        };\n\n        setResourceCallback = function setResourceCallback(field, value) {\n          resourcesSetter[field](rawAppointment, value);\n        };\n      }\n\n      (0, _iterator.each)(getGroups.call(this), setResourceCallback);\n    }\n  };\n\n  _proto.getStartViewDate = function () {\n    return this._workSpace.getStartViewDate();\n  };\n\n  _proto.getEndViewDate = function () {\n    return this._workSpace.getEndViewDate();\n  };\n\n  _proto.showAppointmentPopup = function (rawAppointment, createNewAppointment, rawTargetedAppointment) {\n    var _this19 = this;\n\n    var appointment = this.createAppointmentAdapter(rawTargetedAppointment || rawAppointment);\n    var newTargetedAppointment = (0, _extend.extend)({}, rawAppointment, rawTargetedAppointment);\n\n    this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, function () {\n      if (createNewAppointment || (0, _type.isEmptyObject)(rawAppointment)) {\n        delete _this19._editAppointmentData;\n        _this19._editing.allowAdding && _this19._appointmentPopup.show(rawAppointment, true);\n      } else {\n        _this19._editAppointmentData = rawAppointment;\n\n        _this19._appointmentPopup.show(rawAppointment, _this19._editing.allowUpdating);\n      }\n    }, false, true);\n  };\n\n  _proto.hideAppointmentPopup = function (saveChanges) {\n    if (this._appointmentPopup && this._appointmentPopup.isVisible()) {\n      saveChanges && this._appointmentPopup.saveChanges();\n\n      this._appointmentPopup.hide();\n    }\n  };\n\n  _proto.showAppointmentTooltip = function (appointment, target, targetedAppointment) {\n    if (appointment) {\n      var info = new _dataStructures.AppointmentTooltipInfo(appointment, targetedAppointment, this._appointments._tryGetAppointmentColor(target));\n      this.showAppointmentTooltipCore(target, [info]);\n    }\n  };\n\n  _proto.showAppointmentTooltipCore = function (target, data, options) {\n    if (this._appointmentTooltip.isAlreadyShown(target)) {\n      this.hideAppointmentTooltip();\n    } else {\n      this._appointmentTooltip.show(target, data, (0, _extend.extend)(this._getExtraAppointmentTooltipOptions(), options));\n    }\n  };\n\n  _proto.hideAppointmentTooltip = function () {\n    this._appointmentTooltip && this._appointmentTooltip.hide();\n  };\n\n  _proto.scrollToTime = function (hours, minutes, date) {\n    this._workSpace.scrollToTime(hours, minutes, date);\n  };\n\n  _proto.scrollTo = function (date, groups, allDay) {\n    this._workSpace.scrollTo(date, groups, allDay);\n  };\n\n  _proto.addAppointment = function (rawAppointment) {\n    var _this20 = this;\n\n    var appointment = this.createAppointmentAdapter(rawAppointment);\n    appointment.text = appointment.text || \"\";\n    var serializedAppointment = appointment.source(true);\n    var addingOptions = {\n      appointmentData: serializedAppointment,\n      cancel: false\n    };\n\n    this._actions[StoreEventNames.ADDING](addingOptions);\n\n    return this._processActionResult(addingOptions, function (canceled) {\n      if (canceled) {\n        return new _deferred.Deferred().resolve();\n      }\n\n      _this20._expandAllDayPanel(serializedAppointment);\n\n      return _this20._appointmentModel.add(serializedAppointment).always(function (storeAppointment) {\n        return _this20._onDataPromiseCompleted(StoreEventNames.ADDED, storeAppointment);\n      });\n    });\n  };\n\n  _proto.updateAppointment = function (target, appointment) {\n    return this._updateAppointment(target, appointment);\n  };\n\n  _proto.deleteAppointment = function (rawAppointment) {\n    var deletingOptions = {\n      appointmentData: rawAppointment,\n      cancel: false\n    };\n\n    this._actions[StoreEventNames.DELETING](deletingOptions);\n\n    this._processActionResult(deletingOptions, function (canceled) {\n      var _this21 = this;\n\n      if (!canceled) {\n        this._appointmentModel.remove(rawAppointment).always(function (storeAppointment) {\n          return _this21._onDataPromiseCompleted(StoreEventNames.DELETED, storeAppointment, rawAppointment);\n        });\n      }\n    });\n  };\n\n  _proto.focus = function () {\n    if (this._editAppointmentData) {\n      this._appointments.focus();\n    } else {\n      this._workSpace.focus();\n    }\n  };\n\n  _proto.getFirstDayOfWeek = function () {\n    return (0, _type.isDefined)(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date2.default.firstDayOfWeekIndex();\n  };\n\n  _proto.createAppointmentAdapter = function (rawAppointment) {\n    var _this22 = this;\n\n    var options = {\n      getField: function getField(rawAppointment, property) {\n        return _this22.fire(\"getField\", property, rawAppointment);\n      },\n      setField: function setField(rawAppointment, property, value) {\n        return _this22.fire(\"setField\", property, rawAppointment, value);\n      },\n      getTimeZoneCalculator: function getTimeZoneCalculator() {\n        return _this22.timeZoneCalculator;\n      }\n    };\n    return new _appointmentAdapter.default(rawAppointment, options);\n  };\n\n  return Scheduler;\n}(_ui2.default);\n\nScheduler.include(_data_helper.default);\n(0, _component_registrator.default)(\"dxScheduler\", Scheduler);\nvar _default = Scheduler;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/scheduler/ui.scheduler.js"],"names":["exports","default","_component_registrator","_interopRequireDefault","require","_config","_devices","_renderer","_bindable_template","_empty_template","_array","_browser","_callbacks","_common","_data","_position","_date","_date_serialization","_deferred","_extend","_iterator","_support","_type","_window","_data_helper","_visibility_change","_date2","_message","_dialog","_themes","_ui","_ui2","_appointmentPopup","_compactAppointmentsHelper","_desktopTooltipStrategy","_mobileTooltipStrategy","_ui3","_uiScheduler","_uiSchedulerAppointments","_uiScheduler2","_uiScheduler3","_uiScheduler4","_uiScheduler5","_recurrence","_utils","_uiScheduler6","_uiScheduler7","_uiScheduler8","_uiScheduler9","_uiScheduler10","_uiScheduler11","_uiScheduler12","_uiScheduler13","_uiScheduler14","_appointmentAdapter","_timeZoneCalculator","_dataStructures","_appointmentSettingsGenerator","_utils2","obj","__esModule","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","configurable","writable","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","MINUTES_IN_HOUR","WIDGET_CLASS","WIDGET_SMALL_CLASS","concat","WIDGET_ADAPTIVE_CLASS","WIDGET_WIN_NO_TOUCH_CLASS","WIDGET_READONLY_CLASS","WIDGET_SMALL_WIDTH","FULL_DATE_FORMAT","UTC_FULL_DATE_FORMAT","VIEWS_CONFIG","day","workSpace","renderingStrategy","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda","StoreEventNames","ADDING","ADDED","DELETING","DELETED","UPDATING","UPDATED","Scheduler","_Widget","_proto","_getDefaultOptions","defaultOptions","extend","call","views","currentView","currentDate","trimTime","Date","min","max","dateSerializationFormat","firstDayOfWeek","groups","resources","dataSource","customizeDateNavigatorText","appointmentTemplate","dropDownAppointmentTemplate","appointmentCollectorTemplate","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","startDayHour","endDayHour","editing","allowAdding","allowDeleting","allowDragging","allowResizing","allowUpdating","allowTimeZoneEditing","allowEditingTimeZones","showAllDayPanel","showCurrentTimeIndicator","shadeUntilCurrentTime","indicatorUpdateInterval","indicatorTime","recurrenceEditMode","cellDuration","maxAppointmentsPerCell","selectedCellData","groupByDate","onAppointmentRendered","onAppointmentClick","onAppointmentDblClick","onAppointmentContextMenu","onCellClick","onCellContextMenu","onAppointmentAdding","onAppointmentAdded","onAppointmentUpdating","onAppointmentUpdated","onAppointmentDeleting","onAppointmentDeleted","onAppointmentFormOpening","appointmentTooltipTemplate","appointmentPopupTemplate","crossScrollingEnabled","useDropDownViewSwitcher","startDateExpr","endDateExpr","textExpr","descriptionExpr","allDayExpr","recurrenceRuleExpr","recurrenceExceptionExpr","disabledExpr","remoteFiltering","timeZone","startDateTimeZoneExpr","endDateTimeZoneExpr","noDataText","format","adaptivityEnabled","allowMultipleCellSelection","scrolling","mode","renovateRender","_appointmentTooltipOffset","x","y","_appointmentTooltipButtonsPosition","_appointmentTooltipOpenButtonText","_dropDownButtonIcon","_appointmentCountPerCell","_collectorOffset","_appointmentOffset","integrationOptions","useDeferUpdateForTemplates","_defaultOptionsRules","device","real","deviceType","isSimulator","options","focusStateEnabled","current","generic","isMaterial","data","index","element","text","split","span","addClass","append","_setDeprecatedOptions","_deprecatedOptions","since","message","alias","_getAppointmentSettingsGenerator","AppointmentSettingsGenerator","_postponeDataSourceLoading","promise","postponedOperations","add","_reloadDataSource","bind","_postponeResourceLoading","_this","whenLoaded","_loadResources","resolveCallbacks","Deferred","done","resolve","_optionChanged","args","_this2","name","_updateOption","_dateOption","option","_workSpace","_header","_getViewStartByOptions","_appointments","_filterAppointmentsByDate","_initDataSource","_appointmentModel","setDataSource","_dataSource","_processCurrentView","_getCurrentViewOptions","repaint","fire","getLayoutManager","initRenderingStrategy","_getAppointmentsRenderingStrategy","_validateCellDuration","items","allowDrag","_allowDragging","allowResize","_allowResizing","itemTemplate","_getAppointmentTemplate","_refreshWorkSpace","_updateHeader","_resourcesManager","setResources","setDataAccessors","_combineDataAccessors","_actions","_createActionByOption","_getAppointmentRenderedAction","_readyToRenderAppointments","_getAppointmentsToRepaint","_dimensionChanged","_initEditing","_editing","_bringEditingModeToAppointments","hideAppointmentTooltip","_cleanPopup","_updateExpression","_initAppointmentTemplate","_toggleAdaptiveClass","fullName","viewCountConfig","_getViewCountConfig","intervalCount","_getCurrentViewOption","_currentView","optionName","optionValue","deserializeDate","_getSerializationFormat","isString","getDateSerializationFormat","editingConfig","allowDelete","_isAgenda","allowAllDayResize","_supportAllDayResizing","_allowAllDayResizing","_getCurrentViewType","_isAllDayExpanded","hasAllDayAppointments","_getTimezoneOffsetByOption","date","calculateTimezoneByValue","dateRange","getDateRange","filterByDate","result","loadResources","_loadedResources","load","hide","_fireContentReadyAction","fail","reject","isLoading","show","container","$element","position","of","contentReadyBase","fireContentReady","_workSpaceRecalculation","_this$_workSpaceRecal","filteredItems","getFilteredItems","_toggleSmallClass","_isVisible","_cleanAllowedPositions","appointments","_layoutManager","createAppointmentsMap","triggerResize","updatePopupFullScreenMode","_clean","width","getBoundingRect","get","toggleClass","_visibilityChanged","visible","_dataSourceOptions","paginate","_init","_this3","_initExpressions","startDate","endDate","startDateTimeZone","endDateTimeZone","allDay","description","recurrenceRule","recurrenceException","disabled","msie","touch","combinedDataAccessors","getAppointmentDurationInMinutes","_initActions","CompactAppointmentsHelper","_asyncTemplatesTimers","_dataSourceLoadedCallback","_subscribes","timeZoneCalculator","TimeZoneCalculator","getClientOffset","getClientTimezoneOffset","getCommonOffset","getAppointmentOffset","appointmentTimezone","_initTemplates","_templateManager","addDefaultTemplates","appointmentTooltip","EmptyTemplate","dropDownAppointment","_this4","expr","_dataAccessors","createGetter","property","compileGetter","getDate","getter","valueOf","BindableTemplate","$container","model","getAppointmentsInstance","_renderAppointmentTemplate","resourcesDataAccessors","each","type","accessor","_renderContent","_renderContentImpl","_dataSourceChangedHandler","_renderAppointments","_renderView","fireWith","isVirtualScrolling","_this$getWorkSpace","getWorkSpace","_filterAppointments","prerenderFilterName","_filteredItems","getRenderingStrategyInstance","calculateRows","cleanModelState","getRepaintedAppointments","fields","isDateField","field","setter","compileSetter","dateGetter","dateSetter","that","forceIsoDateParsing","serializeDate","exprObj","replace","isObject","_isReadOnly","prop","hasOwnProperty","_dispose","_appointmentTooltip","dispose","hideAppointmentPopup","clearTimeout","excludeValidators","_renderFocusTarget","noop","_initMarkup","_renderHeader","_createComponent","_appointmentsConfig","MobileTooltipStrategy","DesktopTooltipStrategy","_getAppointmentTooltipOptions","_isLoaded","_isDataSourceLoading","_initMarkupCore","_this5","createComponent","getScrollableContainer","getWorkSpaceScrollableContainer","getAppointmentTemplate","showAppointmentPopup","checkAndDeleteAppointment","isAppointmentInAllDayPanel","createFormattedDateText","appointment","targetedAppointment","getAppointmentDisabled","createAppointmentAdapter","_this6","targetedAdapter","_checkRecurringAppointment","deleteAppointment","_getExtraAppointmentTooltipOptions","rtlEnabled","offset","appointmentData","itTakesAllDay","appointmentTakesAllDay","supportAllDayRow","_this7","hasWindow","_cleanWorkspace","_renderWorkSpace","fixedContainer","getFixedContainer","allDayContainer","getAllDayContainer","_waitAsyncTemplate","_this7$_workSpaceReca","_isResourcesLoaded","_isDataSourceLoaded","isDefined","isLoaded","_render","$header","appendTo","_headerConfig","_this8","currentViewOptions","countConfig","isAdaptive","tabIndex","observer","todayDate","createDate","path","config","onItemRendered","onItemClick","onItemContextMenu","onContentReady","getCollectorOffset","needApplyCollectorOffset","_","view","isViewIsObject","viewName","viewType","log","$workSpace","workSpaceComponent","workSpaceConfig","_workSpaceConfig","initDragBehavior","_all","_attachTablesEvents","getWorkArea","_recalculateWorkspace","_getHeaderDate","_getViewByName","viewCount","_this9","triggerResizeEvent","_refreshDateTimeIndication","_currentViewOptions$s","_this10","accessKey","allDayExpanded","onSelectionChanged","hoursInterval","_getTemplate","callback","_options","silent","timer","setTimeout","_getTemplateByOption","_this11","detach","remove","getWorkSpaceScrollable","getScrollable","getWorkSpaceScrollableScrollTop","getGroupedScrollableScrollTop","getWorkSpaceScrollableScrollLeft","getScrollableScrollLeft","getWorkSpaceAllDayHeight","getAllDayHeight","getWorkSpaceAllDayOffset","getAllDayOffset","getWorkSpaceHeaderPanelHeight","getHeaderPanelHeight","getWorkSpaceDateTableOffset","getWorkSpaceLeftOffset","getAppointmentModel","getHeader","getMaxAppointmentsPerCell","targetAppointment","singleAppointment","exceptionDate","isDeleted","isPopupEditing","dragEvent","_this12","_updatedRecAppointment","getRecurrenceProcessor","evalRecurrenceRule","isValid","editMode","_excludeAppointmentFromSeries","cancel","_showRecurrenceChangeConfirm","moveAppointmentBack","rawAppointment","newRawAppointment","_this13","newAppointment","canCreateNewAppointment","keyPropertyName","keyName","addAppointment","_createRecurrenceException","_editAppointmentData","_updateAppointment","_getSerializedDate","join","isAllDay","setHours","getHours","getMinutes","getSeconds","getMilliseconds","seriesText","occurrenceText","custom","messageHtml","showCloseButton","showTitle","buttons","onClick","_getUpdatedData","_this14","getConvertedFromGrid","isValidDate","isNaN","getTime","targetCell","getTargetCellData","cellStartDate","cellEndDate","appointmentStartDate","appointmentEndDate","resultedStartDate","duration","isKeepAppointmentHours","keepOriginalHours","timeInMs","resultedEndDate","calculateEndDate","dateCopy","timeZoneOffset","getTimezoneOffsetChangeInMs","rawResult","setResourcesToItem","getTargetedAppointment","settings","dataAccessors","getAppointmentSettings","info","getAppointmentInfo","appointmentIndex","_itemIndexKey","adapter","clone","isRecurrent","getStartDate","getAppointmentDataCalculator","newStartDate","sourceAppointment","rawTargetedAppointment","setTargetedAppointmentResources","subscribe","subject","action","Array","slice","isFunction","Error","getDataByDroppableCell","onUpdatePrevented","updatingOptions","newData","oldData","performFailAction","err","isDeferred","_processActionResult","canceled","_this15","deferred","_expandAllDayPanel","update","always","storeAppointment","_onDataPromiseCompleted","actionOptions","_this16","resolveCallback","callbackResult","when","fromPromise","isPromise","state","handlerName","error","isVisible","getAppointmentPopup","getPopup","getUpdatedAppointment","getUpdatedAppointmentKeys","getResourceManager","getActions","_getRecurrenceException","exceptions","_convertRecurrenceException","exceptionString","_this17","getConvertedToTimeZone","convertedStartDate","convertedExceptionDate","correctRecurrenceExceptionByTimezone","dayHasAppointment","_this18","dayTimeStamp","startDateTimeStamp","endDateTimeStamp","inArray","resourcesSetter","getGroups","setResourceCallback","apptSettings","_positionMap","_getCellGroups","groupIndex","group","id","setting","getCellDataByCoordinates","left","top","getStartViewDate","getEndViewDate","createNewAppointment","_this19","newTargetedAppointment","isEmptyObject","saveChanges","showAppointmentTooltip","AppointmentTooltipInfo","_tryGetAppointmentColor","showAppointmentTooltipCore","isAlreadyShown","scrollToTime","hours","minutes","scrollTo","_this20","serializedAppointment","addingOptions","updateAppointment","deletingOptions","_this21","focus","getFirstDayOfWeek","firstDayOfWeekIndex","_this22","getField","setField","getTimeZoneCalculator","include","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _config = _interopRequireDefault(require(\"../../core/config\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _empty_template = require(\"../../core/templates/empty_template\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _callbacks = _interopRequireDefault(require(\"../../core/utils/callbacks\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\r\nvar _date_serialization = _interopRequireDefault(require(\"../../core/utils/date_serialization\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _support = require(\"../../core/utils/support\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _data_helper = _interopRequireDefault(require(\"../../data_helper\"));\r\nvar _visibility_change = require(\"../../events/visibility_change\");\r\nvar _date2 = _interopRequireDefault(require(\"../../localization/date\"));\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _dialog = require(\"../dialog\");\r\nvar _themes = require(\"../themes\");\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.errors\"));\r\nvar _ui2 = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar _appointmentPopup = _interopRequireDefault(require(\"./appointmentPopup\"));\r\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\r\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\r\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\r\nvar _ui3 = require(\"./ui.loading\");\r\nvar _uiScheduler = _interopRequireDefault(require(\"./ui.scheduler.appointments\"));\r\nvar _uiSchedulerAppointments = _interopRequireDefault(require(\"./ui.scheduler.appointments.layout_manager\"));\r\nvar _uiScheduler2 = _interopRequireDefault(require(\"./ui.scheduler.appointment_model\"));\r\nvar _uiScheduler3 = _interopRequireDefault(require(\"./ui.scheduler.header\"));\r\nvar _uiScheduler4 = _interopRequireDefault(require(\"./ui.scheduler.resource_manager\"));\r\nvar _uiScheduler5 = _interopRequireDefault(require(\"./ui.scheduler.subscribes\"));\r\nvar _recurrence = require(\"./recurrence\");\r\nvar _utils = _interopRequireDefault(require(\"./utils.timeZone\"));\r\nvar _uiScheduler6 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.agenda\"));\r\nvar _uiScheduler7 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_day\"));\r\nvar _uiScheduler8 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_month\"));\r\nvar _uiScheduler9 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_week\"));\r\nvar _uiScheduler10 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.timeline_work_week\"));\r\nvar _uiScheduler11 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_day\"));\r\nvar _uiScheduler12 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_month\"));\r\nvar _uiScheduler13 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_week\"));\r\nvar _uiScheduler14 = _interopRequireDefault(require(\"./workspaces/ui.scheduler.work_space_work_week\"));\r\nvar _appointmentAdapter = _interopRequireDefault(require(\"./appointmentAdapter\"));\r\nvar _timeZoneCalculator = require(\"./timeZoneCalculator\");\r\nvar _dataStructures = require(\"./dataStructures\");\r\nvar _appointmentSettingsGenerator = require(\"./appointmentSettingsGenerator\");\r\nvar _utils2 = _interopRequireDefault(require(\"./utils\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction ownKeys(object, enumerableOnly) {\r\n    var keys = Object.keys(object);\r\n    if (Object.getOwnPropertySymbols) {\r\n        var symbols = Object.getOwnPropertySymbols(object);\r\n        if (enumerableOnly) {\r\n            symbols = symbols.filter(function(sym) {\r\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable\r\n            })\r\n        }\r\n        keys.push.apply(keys, symbols)\r\n    }\r\n    return keys\r\n}\r\n\r\nfunction _objectSpread(target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var source = null != arguments[i] ? arguments[i] : {};\r\n        if (i % 2) {\r\n            ownKeys(Object(source), true).forEach(function(key) {\r\n                _defineProperty(target, key, source[key])\r\n            })\r\n        } else {\r\n            if (Object.getOwnPropertyDescriptors) {\r\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))\r\n            } else {\r\n                ownKeys(Object(source)).forEach(function(key) {\r\n                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))\r\n                })\r\n            }\r\n        }\r\n    }\r\n    return target\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar MINUTES_IN_HOUR = 60;\r\nvar WIDGET_CLASS = \"dx-scheduler\";\r\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\r\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\r\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\r\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\r\nvar WIDGET_SMALL_WIDTH = 400;\r\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\r\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\r\nvar VIEWS_CONFIG = {\r\n    day: {\r\n        workSpace: _uiScheduler11.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    week: {\r\n        workSpace: _uiScheduler13.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    workWeek: {\r\n        workSpace: _uiScheduler14.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    month: {\r\n        workSpace: _uiScheduler12.default,\r\n        renderingStrategy: \"horizontalMonth\"\r\n    },\r\n    timelineDay: {\r\n        workSpace: _uiScheduler7.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWeek: {\r\n        workSpace: _uiScheduler9.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWorkWeek: {\r\n        workSpace: _uiScheduler10.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineMonth: {\r\n        workSpace: _uiScheduler8.default,\r\n        renderingStrategy: \"horizontalMonthLine\"\r\n    },\r\n    agenda: {\r\n        workSpace: _uiScheduler6.default,\r\n        renderingStrategy: \"agenda\"\r\n    }\r\n};\r\nvar StoreEventNames = {\r\n    ADDING: \"onAppointmentAdding\",\r\n    ADDED: \"onAppointmentAdded\",\r\n    DELETING: \"onAppointmentDeleting\",\r\n    DELETED: \"onAppointmentDeleted\",\r\n    UPDATING: \"onAppointmentUpdating\",\r\n    UPDATED: \"onAppointmentUpdated\"\r\n};\r\nvar Scheduler = function(_Widget) {\r\n    _inheritsLoose(Scheduler, _Widget);\r\n\r\n    function Scheduler() {\r\n        return _Widget.apply(this, arguments) || this\r\n    }\r\n    var _proto = Scheduler.prototype;\r\n    _proto._getDefaultOptions = function() {\r\n        var defaultOptions = (0, _extend.extend)(_Widget.prototype._getDefaultOptions.call(this), {\r\n            views: [\"day\", \"week\"],\r\n            currentView: \"day\",\r\n            currentDate: _date.default.trimTime(new Date),\r\n            min: void 0,\r\n            max: void 0,\r\n            dateSerializationFormat: void 0,\r\n            firstDayOfWeek: void 0,\r\n            groups: [],\r\n            resources: [],\r\n            dataSource: null,\r\n            customizeDateNavigatorText: void 0,\r\n            appointmentTemplate: \"item\",\r\n            dropDownAppointmentTemplate: \"dropDownAppointment\",\r\n            appointmentCollectorTemplate: \"appointmentCollector\",\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            editing: {\r\n                allowAdding: true,\r\n                allowDeleting: true,\r\n                allowDragging: true,\r\n                allowResizing: true,\r\n                allowUpdating: true,\r\n                allowTimeZoneEditing: false,\r\n                allowEditingTimeZones: false\r\n            },\r\n            showAllDayPanel: true,\r\n            showCurrentTimeIndicator: true,\r\n            shadeUntilCurrentTime: false,\r\n            indicatorUpdateInterval: 3e5,\r\n            indicatorTime: void 0,\r\n            recurrenceEditMode: \"dialog\",\r\n            cellDuration: 30,\r\n            maxAppointmentsPerCell: \"auto\",\r\n            selectedCellData: [],\r\n            groupByDate: false,\r\n            onAppointmentRendered: null,\r\n            onAppointmentClick: null,\r\n            onAppointmentDblClick: null,\r\n            onAppointmentContextMenu: null,\r\n            onCellClick: null,\r\n            onCellContextMenu: null,\r\n            onAppointmentAdding: null,\r\n            onAppointmentAdded: null,\r\n            onAppointmentUpdating: null,\r\n            onAppointmentUpdated: null,\r\n            onAppointmentDeleting: null,\r\n            onAppointmentDeleted: null,\r\n            onAppointmentFormOpening: null,\r\n            appointmentTooltipTemplate: \"appointmentTooltip\",\r\n            appointmentPopupTemplate: \"appointmentPopup\",\r\n            crossScrollingEnabled: false,\r\n            useDropDownViewSwitcher: false,\r\n            startDateExpr: \"startDate\",\r\n            endDateExpr: \"endDate\",\r\n            textExpr: \"text\",\r\n            descriptionExpr: \"description\",\r\n            allDayExpr: \"allDay\",\r\n            recurrenceRuleExpr: \"recurrenceRule\",\r\n            recurrenceExceptionExpr: \"recurrenceException\",\r\n            disabledExpr: \"disabled\",\r\n            remoteFiltering: false,\r\n            timeZone: \"\",\r\n            startDateTimeZoneExpr: \"startDateTimeZone\",\r\n            endDateTimeZoneExpr: \"endDateTimeZone\",\r\n            noDataText: _message.default.format(\"dxCollectionWidget-noDataText\"),\r\n            adaptivityEnabled: false,\r\n            allowMultipleCellSelection: true,\r\n            scrolling: {\r\n                mode: \"standard\"\r\n            },\r\n            renovateRender: false,\r\n            _appointmentTooltipOffset: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            _appointmentTooltipButtonsPosition: \"bottom\",\r\n            _appointmentTooltipOpenButtonText: _message.default.format(\"dxScheduler-openAppointment\"),\r\n            _dropDownButtonIcon: \"overflow\",\r\n            _appointmentCountPerCell: 2,\r\n            _collectorOffset: 0,\r\n            _appointmentOffset: 26\r\n        });\r\n        return (0, _extend.extend)(true, defaultOptions, {\r\n            integrationOptions: {\r\n                useDeferUpdateForTemplates: false\r\n            }\r\n        })\r\n    };\r\n    _proto._defaultOptionsRules = function() {\r\n        return _Widget.prototype._defaultOptionsRules.call(this).concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !_devices.default.current().generic\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                editing: {\r\n                    allowDragging: false,\r\n                    allowResizing: false\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return (0, _themes.isMaterial)()\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                dateCellTemplate: function(data, index, element) {\r\n                    var text = data.text;\r\n                    text.split(\" \").forEach(function(text, index) {\r\n                        var span = (0, _renderer.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\r\n                        (0, _renderer.default)(element).append(span);\r\n                        if (!index) {\r\n                            (0, _renderer.default)(element).append(\" \")\r\n                        }\r\n                    })\r\n                },\r\n                _appointmentTooltipOffset: {\r\n                    x: 0,\r\n                    y: 11\r\n                },\r\n                _appointmentTooltipButtonsPosition: \"top\",\r\n                _appointmentTooltipOpenButtonText: null,\r\n                _dropDownButtonIcon: \"chevrondown\",\r\n                _appointmentCountPerCell: 1,\r\n                _collectorOffset: 20,\r\n                _appointmentOffset: 30\r\n            }\r\n        }])\r\n    };\r\n    _proto._setDeprecatedOptions = function() {\r\n        _Widget.prototype._setDeprecatedOptions.call(this);\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            dropDownAppointmentTemplate: {\r\n                since: \"19.2\",\r\n                message: \"appointmentTooltipTemplate\"\r\n            },\r\n            allowEditingTimeZones: {\r\n                since: \"20.1\",\r\n                alias: \"allowTimeZoneEditing\"\r\n            }\r\n        })\r\n    };\r\n    _proto._getAppointmentSettingsGenerator = function() {\r\n        return new _appointmentSettingsGenerator.AppointmentSettingsGenerator(this)\r\n    };\r\n    _proto._postponeDataSourceLoading = function(promise) {\r\n        this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise)\r\n    };\r\n    _proto._postponeResourceLoading = function() {\r\n        var _this = this;\r\n        var whenLoaded = this.postponedOperations.add(\"_loadResources\", function() {\r\n            return _this._loadResources()\r\n        });\r\n        var resolveCallbacks = new _deferred.Deferred;\r\n        whenLoaded.done(function(resources) {\r\n            resolveCallbacks.resolve(resources)\r\n        });\r\n        this._postponeDataSourceLoading(whenLoaded);\r\n        return resolveCallbacks.promise()\r\n    };\r\n    _proto._optionChanged = function(args) {\r\n        var _this2 = this;\r\n        var value = args.value;\r\n        var name = args.name;\r\n        switch (args.name) {\r\n            case \"customizeDateNavigatorText\":\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"currentDate\":\r\n                value = this._dateOption(name);\r\n                value = _date.default.trimTime(new Date(value));\r\n                this.option(\"selectedCellData\", []);\r\n                this._workSpace.option(name, new Date(value));\r\n                this._header.option(name, new Date(value));\r\n                this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n                this._appointments.option(\"items\", []);\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"dataSource\":\r\n                this._initDataSource();\r\n                this._appointmentModel.setDataSource(this._dataSource);\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"))\r\n                });\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                value = this._dateOption(name);\r\n                this._updateOption(\"header\", name, new Date(value));\r\n                this._updateOption(\"workSpace\", name, new Date(value));\r\n                break;\r\n            case \"views\":\r\n                this._processCurrentView();\r\n                if (this._getCurrentViewOptions()) {\r\n                    this.repaint()\r\n                } else {\r\n                    this._header.option(name, value)\r\n                }\r\n                break;\r\n            case \"useDropDownViewSwitcher\":\r\n                this._header.option(name, value);\r\n                break;\r\n            case \"currentView\":\r\n                this._processCurrentView();\r\n                this.fire(\"validateDayHours\");\r\n                this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\r\n                this._validateCellDuration();\r\n                this._appointments.option({\r\n                    items: [],\r\n                    allowDrag: this._allowDragging(),\r\n                    allowResize: this._allowResizing(),\r\n                    itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\r\n                });\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._updateHeader();\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value)\r\n                });\r\n                break;\r\n            case \"appointmentTemplate\":\r\n                this._appointments.option(\"itemTemplate\", value);\r\n                break;\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"groups\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"resources\":\r\n                this._resourcesManager.setResources(this.option(\"resources\"));\r\n                this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._appointments.option(\"items\", []);\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"startDayHour\":\r\n            case \"endDayHour\":\r\n                this.fire(\"validateDayHours\");\r\n                this._appointments.option(\"items\", []);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.repaint();\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case StoreEventNames.ADDING:\r\n            case StoreEventNames.ADDED:\r\n            case StoreEventNames.UPDATING:\r\n            case StoreEventNames.UPDATED:\r\n            case StoreEventNames.DELETING:\r\n            case StoreEventNames.DELETED:\r\n            case \"onAppointmentFormOpening\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            case \"onAppointmentRendered\":\r\n                this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\r\n                break;\r\n            case \"onAppointmentClick\":\r\n                this._appointments.option(\"onItemClick\", this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentDblClick\":\r\n                this._appointments.option(name, this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentContextMenu\":\r\n                this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\r\n                break;\r\n            case \"noDataText\":\r\n            case \"allowMultipleCellSelection\":\r\n            case \"selectedCellData\":\r\n            case \"accessKey\":\r\n            case \"onCellClick\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"onCellContextMenu\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._appointments.option(\"items\", []);\r\n                    _this2._refreshWorkSpace(resources);\r\n                    if (_this2._readyToRenderAppointments) {\r\n                        _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint())\r\n                    }\r\n                });\r\n                break;\r\n            case \"cellDuration\":\r\n                this._validateCellDuration();\r\n                this._appointments.option(\"items\", []);\r\n                if (this._readyToRenderAppointments) {\r\n                    this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                }\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._updateOption(\"header\", name, value);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(name, value);\r\n                _Widget.prototype._optionChanged.call(this, args);\r\n                break;\r\n            case \"width\":\r\n                this._updateOption(\"header\", name, value);\r\n                if (this.option(\"crossScrollingEnabled\")) {\r\n                    this._updateOption(\"workSpace\", \"width\", value)\r\n                }\r\n                _Widget.prototype._optionChanged.call(this, args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"height\":\r\n                _Widget.prototype._optionChanged.call(this, args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"editing\":\r\n                this._initEditing();\r\n                var editing = this._editing;\r\n                this._bringEditingModeToAppointments(editing);\r\n                this.hideAppointmentTooltip();\r\n                this._cleanPopup();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\r\n                    _this2._updateOption(\"workSpace\", name, value)\r\n                });\r\n                break;\r\n            case \"showCurrentTimeIndicator\":\r\n            case \"indicatorTime\":\r\n            case \"indicatorUpdateInterval\":\r\n            case \"shadeUntilCurrentTime\":\r\n            case \"groupByDate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"appointmentDragging\":\r\n            case \"appointmentTooltipTemplate\":\r\n            case \"appointmentPopupTemplate\":\r\n            case \"recurrenceEditMode\":\r\n            case \"remoteFiltering\":\r\n            case \"timeZone\":\r\n            case \"dropDownAppointmentTemplate\":\r\n            case \"appointmentCollectorTemplate\":\r\n            case \"_appointmentTooltipOffset\":\r\n            case \"_appointmentTooltipButtonsPosition\":\r\n            case \"_appointmentTooltipOpenButtonText\":\r\n            case \"_dropDownButtonIcon\":\r\n            case \"_appointmentCountPerCell\":\r\n            case \"_collectorOffset\":\r\n            case \"_appointmentOffset\":\r\n                this.repaint();\r\n                break;\r\n            case \"dateSerializationFormat\":\r\n                break;\r\n            case \"maxAppointmentsPerCell\":\r\n                break;\r\n            case \"startDateExpr\":\r\n            case \"endDateExpr\":\r\n            case \"startDateTimeZoneExpr\":\r\n            case \"endDateTimeZoneExpr\":\r\n            case \"textExpr\":\r\n            case \"descriptionExpr\":\r\n            case \"allDayExpr\":\r\n            case \"recurrenceRuleExpr\":\r\n            case \"recurrenceExceptionExpr\":\r\n            case \"disabledExpr\":\r\n                this._updateExpression(name, value);\r\n                this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                this._initAppointmentTemplate();\r\n                this.repaint();\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                this._toggleAdaptiveClass();\r\n                this.repaint();\r\n                break;\r\n            case \"scrolling\":\r\n                this._updateOption(\"workSpace\", args.fullName, value);\r\n                break;\r\n            case \"renovateRender\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                break;\r\n            default:\r\n                _Widget.prototype._optionChanged.call(this, args)\r\n        }\r\n    };\r\n    _proto._updateHeader = function() {\r\n        var viewCountConfig = this._getViewCountConfig();\r\n        this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\r\n        this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n        this._header.option(\"min\", this._dateOption(\"min\"));\r\n        this._header.option(\"max\", this._dateOption(\"max\"));\r\n        this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\r\n        this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\r\n        this._header.option(\"currentView\", this._currentView)\r\n    };\r\n    _proto._dateOption = function(optionName) {\r\n        var optionValue = this._getCurrentViewOption(optionName);\r\n        return _date_serialization.default.deserializeDate(optionValue)\r\n    };\r\n    _proto._getSerializationFormat = function(optionName) {\r\n        var value = this._getCurrentViewOption(optionName);\r\n        if (\"number\" === typeof value) {\r\n            return \"number\"\r\n        }\r\n        if (!(0, _type.isString)(value)) {\r\n            return\r\n        }\r\n        return _date_serialization.default.getDateSerializationFormat(value)\r\n    };\r\n    _proto._bringEditingModeToAppointments = function(editing) {\r\n        var editingConfig = {\r\n            allowDelete: editing.allowUpdating && editing.allowDeleting\r\n        };\r\n        if (!this._isAgenda()) {\r\n            editingConfig.allowDrag = editing.allowDragging;\r\n            editingConfig.allowResize = editing.allowResizing;\r\n            editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing()\r\n        }\r\n        this._appointments.option(editingConfig);\r\n        this.repaint()\r\n    };\r\n    _proto._isAgenda = function() {\r\n        return \"agenda\" === this._getAppointmentsRenderingStrategy()\r\n    };\r\n    _proto._allowDragging = function() {\r\n        return this._editing.allowDragging && !this._isAgenda()\r\n    };\r\n    _proto._allowResizing = function() {\r\n        return this._editing.allowResizing && !this._isAgenda()\r\n    };\r\n    _proto._allowAllDayResizing = function() {\r\n        return this._editing.allowResizing && this._supportAllDayResizing()\r\n    };\r\n    _proto._supportAllDayResizing = function() {\r\n        return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1\r\n    };\r\n    _proto._isAllDayExpanded = function(items) {\r\n        return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n    };\r\n    _proto._getTimezoneOffsetByOption = function(date) {\r\n        return _utils.default.calculateTimezoneByValue(this.option(\"timeZone\"), date)\r\n    };\r\n    _proto._filterAppointmentsByDate = function() {\r\n        var dateRange = this._workSpace.getDateRange();\r\n        this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"))\r\n    };\r\n    _proto._loadResources = function() {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        var result = new _deferred.Deferred;\r\n        this._resourcesManager.loadResources(groups).done(function(resources) {\r\n            this._loadedResources = resources;\r\n            result.resolve(resources)\r\n        }.bind(this));\r\n        return result.promise()\r\n    };\r\n    _proto._reloadDataSource = function() {\r\n        var result = new _deferred.Deferred;\r\n        if (this._dataSource) {\r\n            this._dataSource.load().done(function() {\r\n                (0, _ui3.hide)();\r\n                this._fireContentReadyAction(result)\r\n            }.bind(this)).fail(function() {\r\n                (0, _ui3.hide)();\r\n                result.reject()\r\n            });\r\n            this._dataSource.isLoading() && (0, _ui3.show)({\r\n                container: this.$element(),\r\n                position: {\r\n                    of: this.$element()\r\n                }\r\n            })\r\n        } else {\r\n            this._fireContentReadyAction(result)\r\n        }\r\n        return result.promise()\r\n    };\r\n    _proto._fireContentReadyAction = function(result) {\r\n        var contentReadyBase = _Widget.prototype._fireContentReadyAction.bind(this);\r\n        var fireContentReady = function() {\r\n            contentReadyBase();\r\n            null === result || void 0 === result ? void 0 : result.resolve()\r\n        };\r\n        if (this._workSpaceRecalculation) {\r\n            var _this$_workSpaceRecal;\r\n            null === (_this$_workSpaceRecal = this._workSpaceRecalculation) || void 0 === _this$_workSpaceRecal ? void 0 : _this$_workSpaceRecal.done(function() {\r\n                fireContentReady()\r\n            })\r\n        } else {\r\n            fireContentReady()\r\n        }\r\n    };\r\n    _proto._dimensionChanged = function() {\r\n        var filteredItems = this.getFilteredItems();\r\n        this._toggleSmallClass();\r\n        if (!this._isAgenda() && filteredItems && this._isVisible()) {\r\n            this._workSpace._cleanAllowedPositions();\r\n            this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\r\n            this._workSpace._dimensionChanged();\r\n            var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\r\n            this._appointments.option(\"items\", appointments)\r\n        }\r\n        this.hideAppointmentTooltip();\r\n        this._appointmentPopup.triggerResize();\r\n        this._appointmentPopup.updatePopupFullScreenMode()\r\n    };\r\n    _proto._clean = function() {\r\n        this._cleanPopup();\r\n        _Widget.prototype._clean.call(this)\r\n    };\r\n    _proto._toggleSmallClass = function() {\r\n        var width = (0, _position.getBoundingRect)(this.$element().get(0)).width;\r\n        this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH)\r\n    };\r\n    _proto._toggleAdaptiveClass = function() {\r\n        this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"))\r\n    };\r\n    _proto._visibilityChanged = function(visible) {\r\n        visible && this._dimensionChanged()\r\n    };\r\n    _proto._dataSourceOptions = function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    };\r\n    _proto._init = function() {\r\n        var _this3 = this;\r\n        this._initExpressions({\r\n            startDate: this.option(\"startDateExpr\"),\r\n            endDate: this.option(\"endDateExpr\"),\r\n            startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\r\n            endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\r\n            allDay: this.option(\"allDayExpr\"),\r\n            text: this.option(\"textExpr\"),\r\n            description: this.option(\"descriptionExpr\"),\r\n            recurrenceRule: this.option(\"recurrenceRuleExpr\"),\r\n            recurrenceException: this.option(\"recurrenceExceptionExpr\"),\r\n            disabled: this.option(\"disabledExpr\")\r\n        });\r\n        _Widget.prototype._init.call(this);\r\n        this._initDataSource();\r\n        this._loadedResources = [];\r\n        this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser.default.msie && _support.touch));\r\n        this._initEditing();\r\n        this._resourcesManager = new _uiScheduler4.default(this.option(\"resources\"));\r\n        var combinedDataAccessors = this._combineDataAccessors();\r\n        this._appointmentModel = new _uiScheduler2.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\r\n        this._initActions();\r\n        this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\r\n        this._asyncTemplatesTimers = [];\r\n        this._dataSourceLoadedCallback = (0, _callbacks.default)();\r\n        this._subscribes = _uiScheduler5.default;\r\n        this.timeZoneCalculator = new _timeZoneCalculator.TimeZoneCalculator({\r\n            getClientOffset: function(date) {\r\n                return _utils.default.getClientTimezoneOffset(date)\r\n            },\r\n            getCommonOffset: function(date, timeZone) {\r\n                return _utils.default.calculateTimezoneByValue(timeZone || _this3.option(\"timeZone\"), date)\r\n            },\r\n            getAppointmentOffset: function(date, appointmentTimezone) {\r\n                return _utils.default.calculateTimezoneByValue(appointmentTimezone, date)\r\n            }\r\n        })\r\n    };\r\n    _proto._initTemplates = function() {\r\n        this._initAppointmentTemplate();\r\n        this._templateManager.addDefaultTemplates({\r\n            appointmentTooltip: new _empty_template.EmptyTemplate,\r\n            dropDownAppointment: new _empty_template.EmptyTemplate\r\n        });\r\n        _Widget.prototype._initTemplates.call(this)\r\n    };\r\n    _proto._initAppointmentTemplate = function() {\r\n        var _this4 = this;\r\n        var expr = this._dataAccessors.expr;\r\n        var createGetter = function(property) {\r\n            return (0, _data.compileGetter)(\"appointmentData.\".concat(property))\r\n        };\r\n        var getDate = function(getter) {\r\n            return function(data) {\r\n                var value = getter(data);\r\n                if (value instanceof Date) {\r\n                    return value.valueOf()\r\n                }\r\n                return value\r\n            }\r\n        };\r\n        this._templateManager.addDefaultTemplates(_defineProperty({}, \"item\", new _bindable_template.BindableTemplate(function($container, data, model) {\r\n            return _this4.getAppointmentsInstance()._renderAppointmentTemplate($container, data, model)\r\n        }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\r\n            text: createGetter(expr.textExpr),\r\n            startDate: getDate(createGetter(expr.startDateExpr)),\r\n            endDate: getDate(createGetter(expr.endDateExpr)),\r\n            startDateTimeZone: createGetter(expr.startDateTimeZoneExpr),\r\n            endDateTimeZone: createGetter(expr.endDateTimeZoneExpr),\r\n            allDay: createGetter(expr.allDayExpr),\r\n            recurrenceRule: createGetter(expr.recurrenceRuleExpr)\r\n        })))\r\n    };\r\n    _proto._combineDataAccessors = function() {\r\n        var resourcesDataAccessors = this._resourcesManager._dataAccessors;\r\n        var result = (0, _extend.extend)(true, {}, this._dataAccessors);\r\n        (0, _iterator.each)(resourcesDataAccessors, function(type, accessor) {\r\n            result[type].resources = accessor\r\n        }.bind(this));\r\n        return result\r\n    };\r\n    _proto._renderContent = function() {\r\n        this._renderContentImpl()\r\n    };\r\n    _proto._dataSourceChangedHandler = function(result) {\r\n        if (this._readyToRenderAppointments) {\r\n            this._workSpaceRecalculation.done(function() {\r\n                this._renderAppointments();\r\n                if (this._isAgenda()) {\r\n                    this._workSpace._renderView();\r\n                    this._dataSourceLoadedCallback.fireWith(this, [this.getFilteredItems()])\r\n                }\r\n            }.bind(this))\r\n        }\r\n    };\r\n    _proto.isVirtualScrolling = function() {\r\n        var _this$getWorkSpace;\r\n        return null === (_this$getWorkSpace = this.getWorkSpace()) || void 0 === _this$getWorkSpace ? void 0 : _this$getWorkSpace.isVirtualScrolling()\r\n    };\r\n    _proto._filterAppointments = function() {\r\n        var prerenderFilterName = this.isVirtualScrolling() ? \"prerenderFilterVirtual\" : \"prerenderFilter\";\r\n        return this.fire(prerenderFilterName)\r\n    };\r\n    _proto._renderAppointments = function() {\r\n        this._filteredItems = this._filterAppointments();\r\n        this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\r\n        if (this._isAgenda()) {\r\n            this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true)\r\n        }\r\n        if (this._filteredItems.length && this._isVisible()) {\r\n            this._appointments.option(\"items\", this._getAppointmentsToRepaint());\r\n            this._appointmentModel.cleanModelState()\r\n        } else {\r\n            this._appointments.option(\"items\", [])\r\n        }\r\n    };\r\n    _proto._getAppointmentsToRepaint = function() {\r\n        var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\r\n        return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"))\r\n    };\r\n    _proto._initExpressions = function(fields) {\r\n        var isDateField = function(field) {\r\n            return \"startDate\" === field || \"endDate\" === field\r\n        };\r\n        if (!this._dataAccessors) {\r\n            this._dataAccessors = {\r\n                getter: {},\r\n                setter: {},\r\n                expr: {}\r\n            }\r\n        }(0, _iterator.each)(fields, function(name, expr) {\r\n            if (expr) {\r\n                var getter = (0, _data.compileGetter)(expr);\r\n                var setter = (0, _data.compileSetter)(expr);\r\n                var dateGetter;\r\n                var dateSetter;\r\n                if (isDateField(name)) {\r\n                    var that = this;\r\n                    dateGetter = function() {\r\n                        var value = getter.apply(this, arguments);\r\n                        if ((0, _config.default)().forceIsoDateParsing) {\r\n                            if (!that.option(\"dateSerializationFormat\")) {\r\n                                var format = _date_serialization.default.getDateSerializationFormat(value);\r\n                                if (format) {\r\n                                    that.option(\"dateSerializationFormat\", format)\r\n                                }\r\n                            }\r\n                            value = _date_serialization.default.deserializeDate(value)\r\n                        }\r\n                        return value\r\n                    };\r\n                    dateSetter = function(object, value) {\r\n                        if ((0, _config.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\r\n                            value = _date_serialization.default.serializeDate(value, that.option(\"dateSerializationFormat\"))\r\n                        }\r\n                        setter.call(this, object, value)\r\n                    }\r\n                }\r\n                this._dataAccessors.getter[name] = dateGetter || getter;\r\n                this._dataAccessors.setter[name] = dateSetter || setter;\r\n                this._dataAccessors.expr[name + \"Expr\"] = expr\r\n            } else {\r\n                delete this._dataAccessors.getter[name];\r\n                delete this._dataAccessors.setter[name];\r\n                delete this._dataAccessors.expr[name + \"Expr\"]\r\n            }\r\n        }.bind(this))\r\n    };\r\n    _proto._updateExpression = function(name, value) {\r\n        var exprObj = {};\r\n        exprObj[name.replace(\"Expr\", \"\")] = value;\r\n        this._initExpressions(exprObj)\r\n    };\r\n    _proto._initEditing = function() {\r\n        var editing = this.option(\"editing\");\r\n        this._editing = {\r\n            allowAdding: !!editing,\r\n            allowUpdating: !!editing,\r\n            allowDeleting: !!editing,\r\n            allowResizing: !!editing,\r\n            allowDragging: !!editing\r\n        };\r\n        if ((0, _type.isObject)(editing)) {\r\n            this._editing = (0, _extend.extend)(this._editing, editing)\r\n        }\r\n        this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\r\n        this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\r\n        this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly())\r\n    };\r\n    _proto._isReadOnly = function() {\r\n        var result = true;\r\n        var editing = this._editing;\r\n        for (var prop in editing) {\r\n            if (Object.prototype.hasOwnProperty.call(editing, prop)) {\r\n                result = result && !editing[prop]\r\n            }\r\n        }\r\n        return result\r\n    };\r\n    _proto._dispose = function() {\r\n        this._appointmentTooltip && this._appointmentTooltip.dispose();\r\n        this.hideAppointmentPopup();\r\n        this.hideAppointmentTooltip();\r\n        this._asyncTemplatesTimers.forEach(clearTimeout);\r\n        this._asyncTemplatesTimers = [];\r\n        _Widget.prototype._dispose.call(this)\r\n    };\r\n    _proto._initActions = function() {\r\n        this._actions = {\r\n            onAppointmentAdding: this._createActionByOption(StoreEventNames.ADDING),\r\n            onAppointmentAdded: this._createActionByOption(StoreEventNames.ADDED),\r\n            onAppointmentUpdating: this._createActionByOption(StoreEventNames.UPDATING),\r\n            onAppointmentUpdated: this._createActionByOption(StoreEventNames.UPDATED),\r\n            onAppointmentDeleting: this._createActionByOption(StoreEventNames.DELETING),\r\n            onAppointmentDeleted: this._createActionByOption(StoreEventNames.DELETED),\r\n            onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\r\n        }\r\n    };\r\n    _proto._getAppointmentRenderedAction = function() {\r\n        return this._createActionByOption(\"onAppointmentRendered\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    };\r\n    _proto._renderFocusTarget = function() {\r\n        return (0, _common.noop)()\r\n    };\r\n    _proto._initMarkup = function() {\r\n        _Widget.prototype._initMarkup.call(this);\r\n        this.fire(\"validateDayHours\");\r\n        this._validateCellDuration();\r\n        this._processCurrentView();\r\n        this._renderHeader();\r\n        this._layoutManager = new _uiSchedulerAppointments.default(this, this._getAppointmentsRenderingStrategy());\r\n        this._appointments = this._createComponent(\"<div>\", _uiScheduler.default, this._appointmentsConfig());\r\n        this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\r\n        this._appointmentTooltip = new(this.option(\"adaptivityEnabled\") ? _mobileTooltipStrategy.MobileTooltipStrategy : _desktopTooltipStrategy.DesktopTooltipStrategy)(this._getAppointmentTooltipOptions());\r\n        this._appointmentPopup = new _appointmentPopup.default(this);\r\n        if (this._isLoaded() || this._isDataSourceLoading()) {\r\n            this._initMarkupCore(this._loadedResources);\r\n            this._dataSourceChangedHandler(this._dataSource.items());\r\n            this._fireContentReadyAction()\r\n        } else {\r\n            this._loadResources().done(function(resources) {\r\n                this._initMarkupCore(resources);\r\n                this._reloadDataSource()\r\n            }.bind(this))\r\n        }\r\n    };\r\n    _proto._getAppointmentTooltipOptions = function() {\r\n        var _this5 = this;\r\n        var that = this;\r\n        return {\r\n            createComponent: that._createComponent.bind(that),\r\n            container: that.$element(),\r\n            getScrollableContainer: that.getWorkSpaceScrollableContainer.bind(that),\r\n            addDefaultTemplates: that._templateManager.addDefaultTemplates.bind(that._templateManager),\r\n            getAppointmentTemplate: that._getAppointmentTemplate.bind(that),\r\n            showAppointmentPopup: that.showAppointmentPopup.bind(that),\r\n            checkAndDeleteAppointment: that.checkAndDeleteAppointment.bind(that),\r\n            isAppointmentInAllDayPanel: that.isAppointmentInAllDayPanel.bind(that),\r\n            createFormattedDateText: function(appointment, targetedAppointment, format) {\r\n                return _this5.fire(\"getTextAndFormatDate\", appointment, targetedAppointment, format)\r\n            },\r\n            getAppointmentDisabled: function(appointment) {\r\n                return _this5.createAppointmentAdapter(appointment).disabled\r\n            }\r\n        }\r\n    };\r\n    _proto.checkAndDeleteAppointment = function(appointment, targetedAppointment) {\r\n        var _this6 = this;\r\n        var targetedAdapter = this.createAppointmentAdapter(targetedAppointment);\r\n        this._checkRecurringAppointment(appointment, targetedAppointment, targetedAdapter.startDate, function() {\r\n            _this6.deleteAppointment(appointment)\r\n        }, true)\r\n    };\r\n    _proto._getExtraAppointmentTooltipOptions = function() {\r\n        return {\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            editing: this.option(\"editing\"),\r\n            offset: this.option(\"_appointmentTooltipOffset\")\r\n        }\r\n    };\r\n    _proto.isAppointmentInAllDayPanel = function(appointmentData) {\r\n        var workSpace = this._workSpace;\r\n        var itTakesAllDay = this.appointmentTakesAllDay(appointmentData);\r\n        return itTakesAllDay && workSpace.supportAllDayRow() && workSpace.option(\"showAllDayPanel\")\r\n    };\r\n    _proto._initMarkupCore = function(resources) {\r\n        var _this7 = this;\r\n        this._readyToRenderAppointments = (0, _window.hasWindow)();\r\n        this._workSpace && this._cleanWorkspace();\r\n        this._renderWorkSpace(resources);\r\n        this._appointments.option({\r\n            fixedContainer: this._workSpace.getFixedContainer(),\r\n            allDayContainer: this._workSpace.getAllDayContainer()\r\n        });\r\n        this._waitAsyncTemplate(function() {\r\n            var _this7$_workSpaceReca;\r\n            return null === (_this7$_workSpaceReca = _this7._workSpaceRecalculation) || void 0 === _this7$_workSpaceReca ? void 0 : _this7$_workSpaceReca.resolve()\r\n        });\r\n        this._filterAppointmentsByDate()\r\n    };\r\n    _proto._isLoaded = function() {\r\n        return this._isResourcesLoaded() && this._isDataSourceLoaded()\r\n    };\r\n    _proto._isResourcesLoaded = function() {\r\n        return (0, _type.isDefined)(this._loadedResources)\r\n    };\r\n    _proto._isDataSourceLoaded = function() {\r\n        return this._dataSource && this._dataSource.isLoaded()\r\n    };\r\n    _proto._render = function() {\r\n        this._toggleSmallClass();\r\n        this._toggleAdaptiveClass();\r\n        _Widget.prototype._render.call(this)\r\n    };\r\n    _proto._renderHeader = function() {\r\n        var $header = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\r\n        this._header = this._createComponent($header, _uiScheduler3.default, this._headerConfig())\r\n    };\r\n    _proto._headerConfig = function() {\r\n        var _this8 = this;\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var countConfig = this._getViewCountConfig();\r\n        var result = (0, _extend.extend)({\r\n            isAdaptive: this.option(\"adaptivityEnabled\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            currentView: this._currentView,\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            width: this.option(\"width\"),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\r\n            _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\r\n            customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.views = this.option(\"views\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.todayDate = function() {\r\n            var result = _this8.timeZoneCalculator.createDate(new Date, {\r\n                path: \"toGrid\"\r\n            });\r\n            return result\r\n        };\r\n        return result\r\n    };\r\n    _proto._appointmentsConfig = function() {\r\n        var that = this;\r\n        var config = {\r\n            observer: this,\r\n            onItemRendered: this._getAppointmentRenderedAction(),\r\n            onItemClick: this._createActionByOption(\"onAppointmentClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\r\n            onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            allowDrag: this._allowDragging(),\r\n            allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\r\n            allowResize: this._allowResizing(),\r\n            allowAllDayResize: this._allowAllDayResizing(),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            currentView: this.option(\"currentView\"),\r\n            onContentReady: function() {\r\n                that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()))\r\n            }\r\n        };\r\n        return config\r\n    };\r\n    _proto.getCollectorOffset = function() {\r\n        if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\r\n            return this.option(\"_collectorOffset\")\r\n        } else {\r\n            return 0\r\n        }\r\n    };\r\n    _proto.getAppointmentDurationInMinutes = function() {\r\n        return this._getCurrentViewOption(\"cellDuration\")\r\n    };\r\n    _proto._processCurrentView = function() {\r\n        var views = this.option(\"views\");\r\n        var currentView = this.option(\"currentView\");\r\n        var that = this;\r\n        this._currentView = currentView;\r\n        (0, _iterator.each)(views, function(_, view) {\r\n            var isViewIsObject = (0, _type.isObject)(view);\r\n            var viewName = isViewIsObject ? view.name : view;\r\n            var viewType = view.type;\r\n            if (currentView === viewName || currentView === viewType) {\r\n                that._currentView = view;\r\n                return false\r\n            }\r\n        })\r\n    };\r\n    _proto._validateCellDuration = function() {\r\n        var endDayHour = this._getCurrentViewOption(\"endDayHour\");\r\n        var startDayHour = this._getCurrentViewOption(\"startDayHour\");\r\n        var cellDuration = this._getCurrentViewOption(\"cellDuration\");\r\n        if ((endDayHour - startDayHour) * MINUTES_IN_HOUR % cellDuration !== 0) {\r\n            _ui.default.log(\"W1015\")\r\n        }\r\n    };\r\n    _proto._getCurrentViewType = function() {\r\n        return this._currentView.type || this._currentView\r\n    };\r\n    _proto._getAppointmentsRenderingStrategy = function() {\r\n        return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy\r\n    };\r\n    _proto._renderWorkSpace = function(groups) {\r\n        this._readyToRenderAppointments && this._toggleSmallClass();\r\n        var $workSpace = (0, _renderer.default)(\"<div>\").appendTo(this.$element());\r\n        var countConfig = this._getViewCountConfig();\r\n        var workSpaceComponent = VIEWS_CONFIG[this._getCurrentViewType()].workSpace;\r\n        var workSpaceConfig = this._workSpaceConfig(groups, countConfig);\r\n        this._workSpace = this._createComponent($workSpace, workSpaceComponent, workSpaceConfig);\r\n        this._allowDragging() && this._workSpace.initDragBehavior(this, this._all);\r\n        this._workSpace._attachTablesEvents();\r\n        this._workSpace.getWorkArea().append(this._appointments.$element());\r\n        this._recalculateWorkspace();\r\n        countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\r\n        this._appointments.option(\"_collectorOffset\", this.getCollectorOffset())\r\n    };\r\n    _proto._getViewCountConfig = function() {\r\n        var currentView = this.option(\"currentView\");\r\n        var view = this._getViewByName(currentView);\r\n        var viewCount = view && view.intervalCount || 1;\r\n        var startDate = view && view.startDate || null;\r\n        return {\r\n            intervalCount: viewCount,\r\n            startDate: startDate\r\n        }\r\n    };\r\n    _proto._getViewByName = function(name) {\r\n        var views = this.option(\"views\");\r\n        for (var i = 0; i < views.length; i++) {\r\n            if (views[i].name === name || views[i].type === name || views[i] === name) {\r\n                return views[i]\r\n            }\r\n        }\r\n    };\r\n    _proto._recalculateWorkspace = function() {\r\n        var _this9 = this;\r\n        this._workSpaceRecalculation = new _deferred.Deferred;\r\n        this._waitAsyncTemplate(function() {\r\n            (0, _visibility_change.triggerResizeEvent)(_this9._workSpace.$element());\r\n            _this9._workSpace._refreshDateTimeIndication()\r\n        })\r\n    };\r\n    _proto._workSpaceConfig = function(groups, countConfig) {\r\n        var _currentViewOptions$s, _this10 = this;\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var scrolling = this.option(\"scrolling\");\r\n        var result = (0, _extend.extend)({\r\n            noDataText: this.option(\"noDataText\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            accessKey: this.option(\"accessKey\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            cellDuration: this.option(\"cellDuration\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\r\n            indicatorTime: this.option(\"indicatorTime\"),\r\n            indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\r\n            shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\r\n            allDayExpanded: this._appointments.option(\"items\"),\r\n            crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\r\n            dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n            allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\r\n            selectedCellData: this.option(\"selectedCellData\"),\r\n            onSelectionChanged: function(args) {\r\n                _this10.option(\"selectedCellData\", args.selectedCellData)\r\n            },\r\n            groupByDate: this._getCurrentViewOption(\"groupByDate\"),\r\n            scrolling: scrolling,\r\n            renovateRender: this.option(\"renovateRender\") || \"virtual\" === scrolling.mode || \"virtual\" === (null === (_currentViewOptions$s = currentViewOptions.scrolling) || void 0 === _currentViewOptions$s ? void 0 : _currentViewOptions$s.mode)\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.startDate = countConfig.startDate;\r\n        result.groups = groups;\r\n        result.onCellClick = this._createActionByOption(\"onCellClick\");\r\n        result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = _date.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.hoursInterval = result.cellDuration / 60;\r\n        result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\r\n        result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\r\n        result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\r\n        result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\r\n        result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\r\n        return result\r\n    };\r\n    _proto._waitAsyncTemplate = function(callback) {\r\n        if (this._options.silent(\"templatesRenderAsynchronously\")) {\r\n            var timer = setTimeout(function() {\r\n                callback();\r\n                clearTimeout(timer)\r\n            });\r\n            this._asyncTemplatesTimers.push(timer)\r\n        } else {\r\n            callback()\r\n        }\r\n    };\r\n    _proto._getCurrentViewOptions = function() {\r\n        return this._currentView\r\n    };\r\n    _proto._getCurrentViewOption = function(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\r\n            return currentViewOptions[optionName]\r\n        }\r\n        return this.option(optionName)\r\n    };\r\n    _proto._getAppointmentTemplate = function(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && currentViewOptions[optionName]) {\r\n            return this._getTemplate(currentViewOptions[optionName])\r\n        }\r\n        return this._getTemplateByOption(optionName)\r\n    };\r\n    _proto._updateOption = function(viewName, optionName, value) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (!currentViewOptions || !(0, _type.isDefined)(currentViewOptions[optionName])) {\r\n            this[\"_\" + viewName].option(optionName, value)\r\n        }\r\n    };\r\n    _proto._refreshWorkSpace = function(groups) {\r\n        var _this11 = this;\r\n        this._cleanWorkspace();\r\n        delete this._workSpace;\r\n        this._renderWorkSpace(groups);\r\n        if (this._readyToRenderAppointments) {\r\n            this._appointments.option({\r\n                fixedContainer: this._workSpace.getFixedContainer(),\r\n                allDayContainer: this._workSpace.getAllDayContainer()\r\n            });\r\n            this._waitAsyncTemplate(function() {\r\n                return _this11._workSpaceRecalculation.resolve()\r\n            })\r\n        }\r\n    };\r\n    _proto._cleanWorkspace = function() {\r\n        this._appointments.$element().detach();\r\n        this._workSpace._dispose();\r\n        this._workSpace.$element().remove();\r\n        this.option(\"selectedCellData\", [])\r\n    };\r\n    _proto.getWorkSpaceScrollable = function() {\r\n        return this._workSpace.getScrollable()\r\n    };\r\n    _proto.getWorkSpaceScrollableScrollTop = function(allDay) {\r\n        return this._workSpace.getGroupedScrollableScrollTop(allDay)\r\n    };\r\n    _proto.getWorkSpaceScrollableScrollLeft = function() {\r\n        return this._workSpace.getScrollableScrollLeft()\r\n    };\r\n    _proto.getWorkSpaceScrollableContainer = function() {\r\n        return this._workSpace.getScrollableContainer()\r\n    };\r\n    _proto.getWorkSpaceAllDayHeight = function() {\r\n        return this._workSpace.getAllDayHeight()\r\n    };\r\n    _proto.getWorkSpaceAllDayOffset = function() {\r\n        return this._workSpace.getAllDayOffset()\r\n    };\r\n    _proto.getWorkSpaceHeaderPanelHeight = function() {\r\n        return this._workSpace.getHeaderPanelHeight()\r\n    };\r\n    _proto.getWorkSpaceDateTableOffset = function() {\r\n        return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0\r\n    };\r\n    _proto.getWorkSpace = function() {\r\n        return this._workSpace\r\n    };\r\n    _proto.getAppointmentModel = function() {\r\n        return this._appointmentModel\r\n    };\r\n    _proto.getHeader = function() {\r\n        return this._header\r\n    };\r\n    _proto.getMaxAppointmentsPerCell = function() {\r\n        return this._getCurrentViewOption(\"maxAppointmentsPerCell\")\r\n    };\r\n    _proto._cleanPopup = function() {\r\n        this._appointmentPopup && this._appointmentPopup.dispose()\r\n    };\r\n    _proto._checkRecurringAppointment = function(targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing, dragEvent) {\r\n        var _this12 = this;\r\n        delete this._updatedRecAppointment;\r\n        var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\r\n        if (!(0, _recurrence.getRecurrenceProcessor)().evalRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\r\n            callback();\r\n            return\r\n        }\r\n        var editMode = this.option(\"recurrenceEditMode\");\r\n        switch (editMode) {\r\n            case \"series\":\r\n                callback();\r\n                break;\r\n            case \"occurrence\":\r\n                this._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent);\r\n                break;\r\n            default:\r\n                if (dragEvent) {\r\n                    dragEvent.cancel = new _deferred.Deferred\r\n                }\r\n                this._showRecurrenceChangeConfirm(isDeleted).done(function(result) {\r\n                    result && callback();\r\n                    !result && _this12._excludeAppointmentFromSeries(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent)\r\n                }).fail(function() {\r\n                    return _this12._appointments.moveAppointmentBack(dragEvent)\r\n                })\r\n        }\r\n    };\r\n    _proto._excludeAppointmentFromSeries = function(rawAppointment, newRawAppointment, exceptionDate, isDeleted, isPopupEditing, dragEvent) {\r\n        var _this13 = this;\r\n        var appointment = this.createAppointmentAdapter(_objectSpread({}, rawAppointment));\r\n        var newAppointment = this.createAppointmentAdapter(newRawAppointment);\r\n        newAppointment.recurrenceRule = \"\";\r\n        newAppointment.recurrenceException = \"\";\r\n        var canCreateNewAppointment = !isDeleted && !isPopupEditing;\r\n        if (canCreateNewAppointment) {\r\n            var keyPropertyName = this._appointmentModel.keyName;\r\n            delete newRawAppointment[keyPropertyName];\r\n            this.addAppointment(newRawAppointment)\r\n        }\r\n        appointment.recurrenceException = this._createRecurrenceException(appointment, exceptionDate);\r\n        if (isPopupEditing) {\r\n            this._updatedRecAppointment = appointment.source();\r\n            this._appointmentPopup.show(newRawAppointment, true);\r\n            this._editAppointmentData = rawAppointment\r\n        } else {\r\n            this._updateAppointment(rawAppointment, appointment.source(), function() {\r\n                _this13._appointments.moveAppointmentBack(dragEvent)\r\n            }, dragEvent)\r\n        }\r\n    };\r\n    _proto._createRecurrenceException = function(appointment, exceptionDate) {\r\n        var result = [];\r\n        if (appointment.recurrenceException) {\r\n            result.push(appointment.recurrenceException)\r\n        }\r\n        result.push(this._getSerializedDate(exceptionDate, appointment.startDate, appointment.allDay));\r\n        return result.join()\r\n    };\r\n    _proto._getSerializedDate = function(date, startDate, isAllDay) {\r\n        isAllDay && date.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds(), startDate.getMilliseconds());\r\n        return _date_serialization.default.serializeDate(date, UTC_FULL_DATE_FORMAT)\r\n    };\r\n    _proto._showRecurrenceChangeConfirm = function(isDeleted) {\r\n        var message = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\r\n        var seriesText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\r\n        var occurrenceText = _message.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\r\n        return (0, _dialog.custom)({\r\n            messageHtml: message,\r\n            showCloseButton: true,\r\n            showTitle: true,\r\n            buttons: [{\r\n                text: seriesText,\r\n                onClick: function() {\r\n                    return true\r\n                }\r\n            }, {\r\n                text: occurrenceText,\r\n                onClick: function() {\r\n                    return false\r\n                }\r\n            }]\r\n        }).show()\r\n    };\r\n    _proto._getUpdatedData = function(rawAppointment) {\r\n        var _this14 = this;\r\n        var getConvertedFromGrid = function(date) {\r\n            return date ? _this14.timeZoneCalculator.createDate(date, {\r\n                path: \"fromGrid\"\r\n            }) : void 0\r\n        };\r\n        var isValidDate = function(date) {\r\n            return !isNaN(new Date(date).getTime())\r\n        };\r\n        var targetCell = this.getTargetCellData();\r\n        var appointment = this.createAppointmentAdapter(rawAppointment);\r\n        var cellStartDate = getConvertedFromGrid(targetCell.startDate);\r\n        var cellEndDate = getConvertedFromGrid(targetCell.endDate);\r\n        var appointmentStartDate = new Date(appointment.startDate);\r\n        var appointmentEndDate = new Date(appointment.endDate);\r\n        var resultedStartDate = cellStartDate || appointmentStartDate;\r\n        if (!isValidDate(appointmentStartDate)) {\r\n            appointmentStartDate = resultedStartDate\r\n        }\r\n        if (!isValidDate(appointmentEndDate)) {\r\n            appointmentEndDate = cellEndDate\r\n        }\r\n        var duration = appointmentEndDate.getTime() - appointmentStartDate.getTime();\r\n        var isKeepAppointmentHours = this._workSpace.keepOriginalHours() && isValidDate(appointment.startDate) && isValidDate(cellStartDate);\r\n        if (isKeepAppointmentHours) {\r\n            var trimTime = _date.default.trimTime;\r\n            var startDate = this.timeZoneCalculator.createDate(appointment.startDate, {\r\n                path: \"toGrid\"\r\n            });\r\n            var timeInMs = startDate.getTime() - trimTime(startDate).getTime();\r\n            resultedStartDate = new Date(trimTime(targetCell.startDate).getTime() + timeInMs);\r\n            resultedStartDate = this.timeZoneCalculator.createDate(resultedStartDate, {\r\n                path: \"fromGrid\"\r\n            })\r\n        }\r\n        var result = this.createAppointmentAdapter({});\r\n        if (void 0 !== targetCell.allDay) {\r\n            result.allDay = targetCell.allDay\r\n        }\r\n        result.startDate = resultedStartDate;\r\n        var resultedEndDate = new Date(resultedStartDate.getTime() + duration);\r\n        if (this.appointmentTakesAllDay(rawAppointment) && !result.allDay && this._workSpace.supportAllDayRow()) {\r\n            resultedEndDate = this._workSpace.calculateEndDate(resultedStartDate)\r\n        }\r\n        if (appointment.allDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\r\n            var dateCopy = new Date(resultedStartDate);\r\n            dateCopy.setHours(0);\r\n            resultedEndDate = new Date(dateCopy.getTime() + duration);\r\n            if (0 !== resultedEndDate.getHours()) {\r\n                resultedEndDate.setHours(this._getCurrentViewOption(\"endDayHour\"))\r\n            }\r\n        }\r\n        var timeZoneOffset = _utils.default.getTimezoneOffsetChangeInMs(appointmentStartDate, appointmentEndDate, resultedStartDate, resultedEndDate);\r\n        result.endDate = new Date(resultedEndDate.getTime() - timeZoneOffset);\r\n        var rawResult = result.source();\r\n        this._resourcesManager.setResourcesToItem(rawResult, targetCell.groups);\r\n        return rawResult\r\n    };\r\n    _proto.getTargetedAppointment = function(appointment, element) {\r\n        var settings = _utils2.default.dataAccessors.getAppointmentSettings(element);\r\n        var info = _utils2.default.dataAccessors.getAppointmentInfo(element);\r\n        var appointmentIndex = (0, _renderer.default)(element).data(this._appointments._itemIndexKey());\r\n        var adapter = this.createAppointmentAdapter(appointment);\r\n        var targetedAdapter = adapter.clone();\r\n        if (this._isAgenda() && adapter.isRecurrent) {\r\n            var getStartDate = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\r\n            var newStartDate = getStartDate((0, _renderer.default)(element), adapter.startDate).startDate;\r\n            targetedAdapter.startDate = newStartDate;\r\n            targetedAdapter.endDate = new Date(newStartDate.getTime() + adapter.duration)\r\n        } else {\r\n            if (settings) {\r\n                targetedAdapter.startDate = info ? info.sourceAppointment.startDate : adapter.startDate;\r\n                targetedAdapter.endDate = info ? info.sourceAppointment.endDate : adapter.endDate\r\n            }\r\n        }\r\n        var rawTargetedAppointment = targetedAdapter.source();\r\n        if (element) {\r\n            this.setTargetedAppointmentResources(rawTargetedAppointment, element, appointmentIndex)\r\n        }\r\n        return rawTargetedAppointment\r\n    };\r\n    _proto.subscribe = function(subject, action) {\r\n        this._subscribes[subject] = _uiScheduler5.default[subject] = action\r\n    };\r\n    _proto.fire = function(subject) {\r\n        var callback = this._subscribes[subject];\r\n        var args = Array.prototype.slice.call(arguments);\r\n        if (!(0, _type.isFunction)(callback)) {\r\n            throw _ui.default.Error(\"E1031\", subject)\r\n        }\r\n        return callback.apply(this, args.slice(1))\r\n    };\r\n    _proto.getTargetCellData = function() {\r\n        return this._workSpace.getDataByDroppableCell()\r\n    };\r\n    _proto._updateAppointment = function(target, rawAppointment, onUpdatePrevented, dragEvent) {\r\n        var updatingOptions = {\r\n            newData: rawAppointment,\r\n            oldData: (0, _extend.extend)({}, target),\r\n            cancel: false\r\n        };\r\n        var performFailAction = function(err) {\r\n            if (onUpdatePrevented) {\r\n                onUpdatePrevented.call(this)\r\n            }\r\n            if (err && \"Error\" === err.name) {\r\n                throw err\r\n            }\r\n        }.bind(this);\r\n        this._actions[StoreEventNames.UPDATING](updatingOptions);\r\n        if (dragEvent && !(0, _type.isDeferred)(dragEvent.cancel)) {\r\n            dragEvent.cancel = new _deferred.Deferred\r\n        }\r\n        return this._processActionResult(updatingOptions, function(canceled) {\r\n            var _this15 = this;\r\n            var deferred = new _deferred.Deferred;\r\n            if (!canceled) {\r\n                this._expandAllDayPanel(rawAppointment);\r\n                try {\r\n                    deferred = this._appointmentModel.update(target, rawAppointment).done(function() {\r\n                        dragEvent && dragEvent.cancel.resolve(false)\r\n                    }).always(function(storeAppointment) {\r\n                        return _this15._onDataPromiseCompleted(StoreEventNames.UPDATED, storeAppointment)\r\n                    }).fail(function() {\r\n                        return performFailAction()\r\n                    })\r\n                } catch (err) {\r\n                    performFailAction(err);\r\n                    deferred.resolve()\r\n                }\r\n            } else {\r\n                performFailAction();\r\n                deferred.resolve()\r\n            }\r\n            return deferred.promise()\r\n        })\r\n    };\r\n    _proto._processActionResult = function(actionOptions, callback) {\r\n        var _this16 = this;\r\n        var deferred = new _deferred.Deferred;\r\n        var resolveCallback = function(callbackResult) {\r\n            (0, _deferred.when)((0, _deferred.fromPromise)(callbackResult)).always(deferred.resolve)\r\n        };\r\n        if ((0, _type.isPromise)(actionOptions.cancel)) {\r\n            (0, _deferred.when)((0, _deferred.fromPromise)(actionOptions.cancel)).always(function(cancel) {\r\n                if (!(0, _type.isDefined)(cancel)) {\r\n                    cancel = \"rejected\" === actionOptions.cancel.state()\r\n                }\r\n                resolveCallback(callback.call(_this16, cancel))\r\n            })\r\n        } else {\r\n            resolveCallback(callback.call(this, actionOptions.cancel))\r\n        }\r\n        return deferred.promise()\r\n    };\r\n    _proto._expandAllDayPanel = function(appointment) {\r\n        if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\r\n            this._workSpace.option(\"allDayExpanded\", true)\r\n        }\r\n    };\r\n    _proto._onDataPromiseCompleted = function(handlerName, storeAppointment, appointment) {\r\n        var args = {\r\n            appointmentData: appointment || storeAppointment\r\n        };\r\n        if (storeAppointment instanceof Error) {\r\n            args.error = storeAppointment\r\n        } else {\r\n            this._appointmentPopup.isVisible() && this._appointmentPopup.hide()\r\n        }\r\n        this._actions[handlerName](args);\r\n        this._fireContentReadyAction()\r\n    };\r\n    _proto.getAppointmentPopup = function() {\r\n        return this._appointmentPopup.getPopup()\r\n    };\r\n    _proto.getUpdatedAppointment = function() {\r\n        return this._appointmentModel.getUpdatedAppointment()\r\n    };\r\n    _proto.getUpdatedAppointmentKeys = function() {\r\n        return this._appointmentModel.getUpdatedAppointmentKeys()\r\n    };\r\n    _proto.getAppointmentsInstance = function() {\r\n        return this._appointments\r\n    };\r\n    _proto.getResourceManager = function() {\r\n        return this._resourcesManager\r\n    };\r\n    _proto.getLayoutManager = function() {\r\n        return this._layoutManager\r\n    };\r\n    _proto.getRenderingStrategyInstance = function() {\r\n        return this._layoutManager.getRenderingStrategyInstance()\r\n    };\r\n    _proto.getFilteredItems = function() {\r\n        return this._filteredItems\r\n    };\r\n    _proto.getActions = function() {\r\n        return this._actions\r\n    };\r\n    _proto.appointmentTakesAllDay = function(appointment) {\r\n        return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n    };\r\n    _proto._getRecurrenceException = function(rawAppointment) {\r\n        var appointment = this.createAppointmentAdapter(rawAppointment);\r\n        var recurrenceException = appointment.recurrenceException;\r\n        if (recurrenceException) {\r\n            var exceptions = recurrenceException.split(\",\");\r\n            for (var i = 0; i < exceptions.length; i++) {\r\n                exceptions[i] = this._convertRecurrenceException(exceptions[i], appointment.startDate)\r\n            }\r\n            return exceptions.join()\r\n        }\r\n        return recurrenceException\r\n    };\r\n    _proto._convertRecurrenceException = function(exceptionString, startDate) {\r\n        var _this17 = this;\r\n        exceptionString = exceptionString.replace(/\\s/g, \"\");\r\n        var getConvertedToTimeZone = function(date) {\r\n            return _this17.timeZoneCalculator.createDate(date, {\r\n                path: \"toGrid\"\r\n            })\r\n        };\r\n        var exceptionDate = _date_serialization.default.deserializeDate(exceptionString);\r\n        var convertedStartDate = getConvertedToTimeZone(startDate);\r\n        var convertedExceptionDate = getConvertedToTimeZone(exceptionDate);\r\n        convertedExceptionDate = _utils.default.correctRecurrenceExceptionByTimezone(convertedExceptionDate, convertedStartDate, this.option(\"timeZone\"));\r\n        exceptionString = _date_serialization.default.serializeDate(convertedExceptionDate, FULL_DATE_FORMAT);\r\n        return exceptionString\r\n    };\r\n    _proto.dayHasAppointment = function(day, rawAppointment, trimTime) {\r\n        var _this18 = this;\r\n        var getConvertedToTimeZone = function(date) {\r\n            return _this18.timeZoneCalculator.createDate(date, {\r\n                path: \"toGrid\"\r\n            })\r\n        };\r\n        var appointment = this.createAppointmentAdapter(rawAppointment);\r\n        var startDate = new Date(appointment.startDate);\r\n        var endDate = new Date(appointment.endDate);\r\n        startDate = getConvertedToTimeZone(startDate);\r\n        endDate = getConvertedToTimeZone(endDate);\r\n        if (day.getTime() === endDate.getTime()) {\r\n            return startDate.getTime() === endDate.getTime()\r\n        }\r\n        if (trimTime) {\r\n            day = _date.default.trimTime(day);\r\n            startDate = _date.default.trimTime(startDate);\r\n            endDate = _date.default.trimTime(endDate)\r\n        }\r\n        var dayTimeStamp = day.getTime();\r\n        var startDateTimeStamp = startDate.getTime();\r\n        var endDateTimeStamp = endDate.getTime();\r\n        return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp\r\n    };\r\n    _proto.setTargetedAppointmentResources = function(rawAppointment, element, appointmentIndex) {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        if (null !== groups && void 0 !== groups && groups.length) {\r\n            var resourcesSetter = this._resourcesManager._dataAccessors.setter;\r\n            var workSpace = this._workSpace;\r\n            var getGroups;\r\n            var setResourceCallback;\r\n            if (this._isAgenda()) {\r\n                getGroups = function() {\r\n                    var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\r\n                    return workSpace._getCellGroups(apptSettings[0].groupIndex)\r\n                };\r\n                setResourceCallback = function(_, group) {\r\n                    resourcesSetter[group.name](rawAppointment, group.id)\r\n                }\r\n            } else {\r\n                getGroups = function() {\r\n                    var setting = _utils2.default.dataAccessors.getAppointmentSettings(element) || {};\r\n                    return workSpace.getCellDataByCoordinates({\r\n                        left: setting.left,\r\n                        top: setting.top\r\n                    }).groups\r\n                };\r\n                setResourceCallback = function(field, value) {\r\n                    resourcesSetter[field](rawAppointment, value)\r\n                }\r\n            }(0, _iterator.each)(getGroups.call(this), setResourceCallback)\r\n        }\r\n    };\r\n    _proto.getStartViewDate = function() {\r\n        return this._workSpace.getStartViewDate()\r\n    };\r\n    _proto.getEndViewDate = function() {\r\n        return this._workSpace.getEndViewDate()\r\n    };\r\n    _proto.showAppointmentPopup = function(rawAppointment, createNewAppointment, rawTargetedAppointment) {\r\n        var _this19 = this;\r\n        var appointment = this.createAppointmentAdapter(rawTargetedAppointment || rawAppointment);\r\n        var newTargetedAppointment = (0, _extend.extend)({}, rawAppointment, rawTargetedAppointment);\r\n        this._checkRecurringAppointment(rawAppointment, newTargetedAppointment, appointment.startDate, function() {\r\n            if (createNewAppointment || (0, _type.isEmptyObject)(rawAppointment)) {\r\n                delete _this19._editAppointmentData;\r\n                _this19._editing.allowAdding && _this19._appointmentPopup.show(rawAppointment, true)\r\n            } else {\r\n                _this19._editAppointmentData = rawAppointment;\r\n                _this19._appointmentPopup.show(rawAppointment, _this19._editing.allowUpdating)\r\n            }\r\n        }, false, true)\r\n    };\r\n    _proto.hideAppointmentPopup = function(saveChanges) {\r\n        if (this._appointmentPopup && this._appointmentPopup.isVisible()) {\r\n            saveChanges && this._appointmentPopup.saveChanges();\r\n            this._appointmentPopup.hide()\r\n        }\r\n    };\r\n    _proto.showAppointmentTooltip = function(appointment, target, targetedAppointment) {\r\n        if (appointment) {\r\n            var info = new _dataStructures.AppointmentTooltipInfo(appointment, targetedAppointment, this._appointments._tryGetAppointmentColor(target));\r\n            this.showAppointmentTooltipCore(target, [info])\r\n        }\r\n    };\r\n    _proto.showAppointmentTooltipCore = function(target, data, options) {\r\n        if (this._appointmentTooltip.isAlreadyShown(target)) {\r\n            this.hideAppointmentTooltip()\r\n        } else {\r\n            this._appointmentTooltip.show(target, data, (0, _extend.extend)(this._getExtraAppointmentTooltipOptions(), options))\r\n        }\r\n    };\r\n    _proto.hideAppointmentTooltip = function() {\r\n        this._appointmentTooltip && this._appointmentTooltip.hide()\r\n    };\r\n    _proto.scrollToTime = function(hours, minutes, date) {\r\n        this._workSpace.scrollToTime(hours, minutes, date)\r\n    };\r\n    _proto.scrollTo = function(date, groups, allDay) {\r\n        this._workSpace.scrollTo(date, groups, allDay)\r\n    };\r\n    _proto.addAppointment = function(rawAppointment) {\r\n        var _this20 = this;\r\n        var appointment = this.createAppointmentAdapter(rawAppointment);\r\n        appointment.text = appointment.text || \"\";\r\n        var serializedAppointment = appointment.source(true);\r\n        var addingOptions = {\r\n            appointmentData: serializedAppointment,\r\n            cancel: false\r\n        };\r\n        this._actions[StoreEventNames.ADDING](addingOptions);\r\n        return this._processActionResult(addingOptions, function(canceled) {\r\n            if (canceled) {\r\n                return (new _deferred.Deferred).resolve()\r\n            }\r\n            _this20._expandAllDayPanel(serializedAppointment);\r\n            return _this20._appointmentModel.add(serializedAppointment).always(function(storeAppointment) {\r\n                return _this20._onDataPromiseCompleted(StoreEventNames.ADDED, storeAppointment)\r\n            })\r\n        })\r\n    };\r\n    _proto.updateAppointment = function(target, appointment) {\r\n        return this._updateAppointment(target, appointment)\r\n    };\r\n    _proto.deleteAppointment = function(rawAppointment) {\r\n        var deletingOptions = {\r\n            appointmentData: rawAppointment,\r\n            cancel: false\r\n        };\r\n        this._actions[StoreEventNames.DELETING](deletingOptions);\r\n        this._processActionResult(deletingOptions, function(canceled) {\r\n            var _this21 = this;\r\n            if (!canceled) {\r\n                this._appointmentModel.remove(rawAppointment).always(function(storeAppointment) {\r\n                    return _this21._onDataPromiseCompleted(StoreEventNames.DELETED, storeAppointment, rawAppointment)\r\n                })\r\n            }\r\n        })\r\n    };\r\n    _proto.focus = function() {\r\n        if (this._editAppointmentData) {\r\n            this._appointments.focus()\r\n        } else {\r\n            this._workSpace.focus()\r\n        }\r\n    };\r\n    _proto.getFirstDayOfWeek = function() {\r\n        return (0, _type.isDefined)(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date2.default.firstDayOfWeekIndex()\r\n    };\r\n    _proto.createAppointmentAdapter = function(rawAppointment) {\r\n        var _this22 = this;\r\n        var options = {\r\n            getField: function(rawAppointment, property) {\r\n                return _this22.fire(\"getField\", property, rawAppointment)\r\n            },\r\n            setField: function(rawAppointment, property, value) {\r\n                return _this22.fire(\"setField\", property, rawAppointment, value)\r\n            },\r\n            getTimeZoneCalculator: function() {\r\n                return _this22.timeZoneCalculator\r\n            }\r\n        };\r\n        return new _appointmentAdapter.default(rawAppointment, options)\r\n    };\r\n    return Scheduler\r\n}(_ui2.default);\r\nScheduler.include(_data_helper.default);\r\n(0, _component_registrator.default)(\"dxScheduler\", Scheduler);\r\nvar _default = Scheduler;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}