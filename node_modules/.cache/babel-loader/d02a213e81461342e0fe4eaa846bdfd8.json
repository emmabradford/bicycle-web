{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month_line.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _uiSchedulerAppointmentsStrategy = _interopRequireDefault(require(\"./ui.scheduler.appointments.strategy.horizontal\"));\n\nvar _date = _interopRequireDefault(require(\"../../../core/utils/date\"));\n\nvar _query = _interopRequireDefault(require(\"../../../data/query\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar HOURS_IN_DAY = 24;\nvar MINUTES_IN_HOUR = 60;\nvar MILLISECONDS_IN_MINUTE = 6e4;\nvar ZERO_APPOINTMENT_DURATION_IN_DAYS = 1;\n\nvar HorizontalMonthLineRenderingStrategy = function (_HorizontalAppointmen) {\n  _inheritsLoose(HorizontalMonthLineRenderingStrategy, _HorizontalAppointmen);\n\n  function HorizontalMonthLineRenderingStrategy() {\n    return _HorizontalAppointmen.apply(this, arguments) || this;\n  }\n\n  var _proto = HorizontalMonthLineRenderingStrategy.prototype;\n\n  _proto.calculateAppointmentWidth = function (appointment, position) {\n    var startDate = _date.default.trimTime(position.info.appointment.startDate);\n\n    var endDate = this.normalizeEndDateByViewEnd(appointment, position.info.appointment.endDate);\n    var cellWidth = this.getDefaultCellWidth() || this.getAppointmentMinSize();\n\n    var duration = this._getDurationInDays(startDate, endDate);\n\n    var width = this.cropAppointmentWidth(Math.ceil(duration) * cellWidth, cellWidth);\n    return width;\n  };\n\n  _proto._getDurationInDays = function (startDate, endDate) {\n    var adjustedDuration = this._adjustDurationByDaylightDiff(endDate.getTime() - startDate.getTime(), startDate, endDate);\n\n    return adjustedDuration / _date.default.dateToMilliseconds(\"day\") || ZERO_APPOINTMENT_DURATION_IN_DAYS;\n  };\n\n  _proto.getDeltaTime = function (args, initialSize) {\n    return HOURS_IN_DAY * MINUTES_IN_HOUR * MILLISECONDS_IN_MINUTE * this._getDeltaWidth(args, initialSize);\n  };\n\n  _proto.isAllDay = function () {\n    return false;\n  };\n\n  _proto.createTaskPositionMap = function (items, skipSorting) {\n    if (!skipSorting) {\n      this.instance.getAppointmentsInstance()._sortAppointmentsByStartDate(items);\n    }\n\n    return _HorizontalAppointmen.prototype.createTaskPositionMap.call(this, items);\n  };\n\n  _proto._getSortedPositions = function (map, skipSorting) {\n    var result = _HorizontalAppointmen.prototype._getSortedPositions.call(this, map);\n\n    if (!skipSorting) {\n      result = (0, _query.default)(result).sortBy(\"top\").thenBy(\"left\").thenBy(\"cellPosition\").thenBy(\"i\").toArray();\n    }\n\n    return result;\n  };\n\n  _proto.needCorrectAppointmentDates = function () {\n    return false;\n  };\n\n  return HorizontalMonthLineRenderingStrategy;\n}(_uiSchedulerAppointmentsStrategy.default);\n\nvar _default = HorizontalMonthLineRenderingStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month_line.js"],"names":["exports","default","_uiSchedulerAppointmentsStrategy","_interopRequireDefault","require","_date","_query","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","HOURS_IN_DAY","MINUTES_IN_HOUR","MILLISECONDS_IN_MINUTE","ZERO_APPOINTMENT_DURATION_IN_DAYS","HorizontalMonthLineRenderingStrategy","_HorizontalAppointmen","apply","arguments","_proto","calculateAppointmentWidth","appointment","position","startDate","trimTime","info","endDate","normalizeEndDateByViewEnd","cellWidth","getDefaultCellWidth","getAppointmentMinSize","duration","_getDurationInDays","width","cropAppointmentWidth","Math","ceil","adjustedDuration","_adjustDurationByDaylightDiff","getTime","dateToMilliseconds","getDeltaTime","args","initialSize","_getDeltaWidth","isAllDay","createTaskPositionMap","items","skipSorting","instance","getAppointmentsInstance","_sortAppointmentsByStartDate","call","_getSortedPositions","map","result","sortBy","thenBy","toArray","needCorrectAppointmentDates","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month_line.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _uiSchedulerAppointmentsStrategy = _interopRequireDefault(require(\"./ui.scheduler.appointments.strategy.horizontal\"));\r\nvar _date = _interopRequireDefault(require(\"../../../core/utils/date\"));\r\nvar _query = _interopRequireDefault(require(\"../../../data/query\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar HOURS_IN_DAY = 24;\r\nvar MINUTES_IN_HOUR = 60;\r\nvar MILLISECONDS_IN_MINUTE = 6e4;\r\nvar ZERO_APPOINTMENT_DURATION_IN_DAYS = 1;\r\nvar HorizontalMonthLineRenderingStrategy = function(_HorizontalAppointmen) {\r\n    _inheritsLoose(HorizontalMonthLineRenderingStrategy, _HorizontalAppointmen);\r\n\r\n    function HorizontalMonthLineRenderingStrategy() {\r\n        return _HorizontalAppointmen.apply(this, arguments) || this\r\n    }\r\n    var _proto = HorizontalMonthLineRenderingStrategy.prototype;\r\n    _proto.calculateAppointmentWidth = function(appointment, position) {\r\n        var startDate = _date.default.trimTime(position.info.appointment.startDate);\r\n        var endDate = this.normalizeEndDateByViewEnd(appointment, position.info.appointment.endDate);\r\n        var cellWidth = this.getDefaultCellWidth() || this.getAppointmentMinSize();\r\n        var duration = this._getDurationInDays(startDate, endDate);\r\n        var width = this.cropAppointmentWidth(Math.ceil(duration) * cellWidth, cellWidth);\r\n        return width\r\n    };\r\n    _proto._getDurationInDays = function(startDate, endDate) {\r\n        var adjustedDuration = this._adjustDurationByDaylightDiff(endDate.getTime() - startDate.getTime(), startDate, endDate);\r\n        return adjustedDuration / _date.default.dateToMilliseconds(\"day\") || ZERO_APPOINTMENT_DURATION_IN_DAYS\r\n    };\r\n    _proto.getDeltaTime = function(args, initialSize) {\r\n        return HOURS_IN_DAY * MINUTES_IN_HOUR * MILLISECONDS_IN_MINUTE * this._getDeltaWidth(args, initialSize)\r\n    };\r\n    _proto.isAllDay = function() {\r\n        return false\r\n    };\r\n    _proto.createTaskPositionMap = function(items, skipSorting) {\r\n        if (!skipSorting) {\r\n            this.instance.getAppointmentsInstance()._sortAppointmentsByStartDate(items)\r\n        }\r\n        return _HorizontalAppointmen.prototype.createTaskPositionMap.call(this, items)\r\n    };\r\n    _proto._getSortedPositions = function(map, skipSorting) {\r\n        var result = _HorizontalAppointmen.prototype._getSortedPositions.call(this, map);\r\n        if (!skipSorting) {\r\n            result = (0, _query.default)(result).sortBy(\"top\").thenBy(\"left\").thenBy(\"cellPosition\").thenBy(\"i\").toArray()\r\n        }\r\n        return result\r\n    };\r\n    _proto.needCorrectAppointmentDates = function() {\r\n        return false\r\n    };\r\n    return HorizontalMonthLineRenderingStrategy\r\n}(_uiSchedulerAppointmentsStrategy.default);\r\nvar _default = HorizontalMonthLineRenderingStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}