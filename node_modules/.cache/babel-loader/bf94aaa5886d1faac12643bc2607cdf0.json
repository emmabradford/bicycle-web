{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_button.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\n\nvar _button = _interopRequireDefault(require(\"../text_box/texteditor_button_collection/button\"));\n\nvar _button2 = _interopRequireDefault(require(\"../button\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DROP_DOWN_EDITOR_BUTTON_CLASS = \"dx-dropdowneditor-button\";\nvar DROP_DOWN_EDITOR_BUTTON_VISIBLE = \"dx-dropdowneditor-button-visible\";\nvar BUTTON_MESSAGE = \"dxDropDownEditor-selectLabel\";\n\nvar DropDownButton = function (_TextEditorButton) {\n  _inheritsLoose(DropDownButton, _TextEditorButton);\n\n  function DropDownButton(name, editor, options) {\n    var _this;\n\n    _this = _TextEditorButton.call(this, name, editor, options) || this;\n    _this.currentTemplate = null;\n    return _this;\n  }\n\n  var _proto = DropDownButton.prototype;\n\n  _proto._attachEvents = function (instance) {\n    var editor = this.editor;\n    instance.option(\"onClick\", function (e) {\n      !editor.option(\"openOnFieldClick\") && editor._openHandler(e);\n    });\n\n    _events_engine.default.on(instance.$element(), \"mousedown\", function (e) {\n      if (editor.$element().is(\".dx-state-focused\")) {\n        e.preventDefault();\n      }\n    });\n  };\n\n  _proto._create = function () {\n    var editor = this.editor;\n    var $element = (0, _renderer.default)(\"<div>\");\n\n    var options = this._getOptions();\n\n    this._addToContainer($element);\n\n    var instance = editor._createComponent($element, _button2.default, (0, _extend.extend)({}, options, {\n      elementAttr: {\n        \"aria-label\": _message.default.format(BUTTON_MESSAGE)\n      }\n    }));\n\n    this._legacyRender(editor.$element(), $element, options.visible);\n\n    return {\n      $element: $element,\n      instance: instance\n    };\n  };\n\n  _proto._getOptions = function () {\n    var editor = this.editor;\n\n    var visible = this._isVisible();\n\n    var isReadOnly = editor.option(\"readOnly\");\n    var options = {\n      focusStateEnabled: false,\n      hoverStateEnabled: false,\n      activeStateEnabled: false,\n      useInkRipple: false,\n      disabled: isReadOnly,\n      visible: visible\n    };\n\n    this._addTemplate(options);\n\n    return options;\n  };\n\n  _proto._isVisible = function () {\n    var editor = this.editor;\n    return _TextEditorButton.prototype._isVisible.call(this) && editor.option(\"showDropDownButton\");\n  };\n\n  _proto._legacyRender = function ($editor, $element, isVisible) {\n    $editor.toggleClass(DROP_DOWN_EDITOR_BUTTON_VISIBLE, isVisible);\n\n    if ($element) {\n      $element.removeClass(\"dx-button\").addClass(DROP_DOWN_EDITOR_BUTTON_CLASS);\n    }\n  };\n\n  _proto._isSameTemplate = function () {\n    return this.editor.option(\"dropDownButtonTemplate\") === this.currentTemplate;\n  };\n\n  _proto._addTemplate = function (options) {\n    if (!this._isSameTemplate()) {\n      options.template = this.editor._getTemplateByOption(\"dropDownButtonTemplate\");\n      this.currentTemplate = this.editor.option(\"dropDownButtonTemplate\");\n    }\n  };\n\n  _proto.update = function () {\n    var shouldUpdate = _TextEditorButton.prototype.update.call(this);\n\n    if (shouldUpdate) {\n      var editor = this.editor,\n          instance = this.instance;\n      var $editor = editor.$element();\n\n      var options = this._getOptions();\n\n      null === instance || void 0 === instance ? void 0 : instance.option(options);\n\n      this._legacyRender($editor, null === instance || void 0 === instance ? void 0 : instance.$element(), options.visible);\n    }\n  };\n\n  return DropDownButton;\n}(_button.default);\n\nexports.default = DropDownButton;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/drop_down_editor/ui.drop_down_button.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_extend","_events_engine","_message","_button","_button2","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","DROP_DOWN_EDITOR_BUTTON_CLASS","DROP_DOWN_EDITOR_BUTTON_VISIBLE","BUTTON_MESSAGE","DropDownButton","_TextEditorButton","name","editor","options","_this","call","currentTemplate","_proto","_attachEvents","instance","option","e","_openHandler","on","$element","is","preventDefault","_create","_getOptions","_addToContainer","_createComponent","extend","elementAttr","format","_legacyRender","visible","_isVisible","isReadOnly","focusStateEnabled","hoverStateEnabled","activeStateEnabled","useInkRipple","disabled","_addTemplate","$editor","isVisible","toggleClass","removeClass","addClass","_isSameTemplate","template","_getTemplateByOption","update","shouldUpdate","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_button.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _message = _interopRequireDefault(require(\"../../localization/message\"));\r\nvar _button = _interopRequireDefault(require(\"../text_box/texteditor_button_collection/button\"));\r\nvar _button2 = _interopRequireDefault(require(\"../button\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar DROP_DOWN_EDITOR_BUTTON_CLASS = \"dx-dropdowneditor-button\";\r\nvar DROP_DOWN_EDITOR_BUTTON_VISIBLE = \"dx-dropdowneditor-button-visible\";\r\nvar BUTTON_MESSAGE = \"dxDropDownEditor-selectLabel\";\r\nvar DropDownButton = function(_TextEditorButton) {\r\n    _inheritsLoose(DropDownButton, _TextEditorButton);\r\n\r\n    function DropDownButton(name, editor, options) {\r\n        var _this;\r\n        _this = _TextEditorButton.call(this, name, editor, options) || this;\r\n        _this.currentTemplate = null;\r\n        return _this\r\n    }\r\n    var _proto = DropDownButton.prototype;\r\n    _proto._attachEvents = function(instance) {\r\n        var editor = this.editor;\r\n        instance.option(\"onClick\", function(e) {\r\n            !editor.option(\"openOnFieldClick\") && editor._openHandler(e)\r\n        });\r\n        _events_engine.default.on(instance.$element(), \"mousedown\", function(e) {\r\n            if (editor.$element().is(\".dx-state-focused\")) {\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    };\r\n    _proto._create = function() {\r\n        var editor = this.editor;\r\n        var $element = (0, _renderer.default)(\"<div>\");\r\n        var options = this._getOptions();\r\n        this._addToContainer($element);\r\n        var instance = editor._createComponent($element, _button2.default, (0, _extend.extend)({}, options, {\r\n            elementAttr: {\r\n                \"aria-label\": _message.default.format(BUTTON_MESSAGE)\r\n            }\r\n        }));\r\n        this._legacyRender(editor.$element(), $element, options.visible);\r\n        return {\r\n            $element: $element,\r\n            instance: instance\r\n        }\r\n    };\r\n    _proto._getOptions = function() {\r\n        var editor = this.editor;\r\n        var visible = this._isVisible();\r\n        var isReadOnly = editor.option(\"readOnly\");\r\n        var options = {\r\n            focusStateEnabled: false,\r\n            hoverStateEnabled: false,\r\n            activeStateEnabled: false,\r\n            useInkRipple: false,\r\n            disabled: isReadOnly,\r\n            visible: visible\r\n        };\r\n        this._addTemplate(options);\r\n        return options\r\n    };\r\n    _proto._isVisible = function() {\r\n        var editor = this.editor;\r\n        return _TextEditorButton.prototype._isVisible.call(this) && editor.option(\"showDropDownButton\")\r\n    };\r\n    _proto._legacyRender = function($editor, $element, isVisible) {\r\n        $editor.toggleClass(DROP_DOWN_EDITOR_BUTTON_VISIBLE, isVisible);\r\n        if ($element) {\r\n            $element.removeClass(\"dx-button\").addClass(DROP_DOWN_EDITOR_BUTTON_CLASS)\r\n        }\r\n    };\r\n    _proto._isSameTemplate = function() {\r\n        return this.editor.option(\"dropDownButtonTemplate\") === this.currentTemplate\r\n    };\r\n    _proto._addTemplate = function(options) {\r\n        if (!this._isSameTemplate()) {\r\n            options.template = this.editor._getTemplateByOption(\"dropDownButtonTemplate\");\r\n            this.currentTemplate = this.editor.option(\"dropDownButtonTemplate\")\r\n        }\r\n    };\r\n    _proto.update = function() {\r\n        var shouldUpdate = _TextEditorButton.prototype.update.call(this);\r\n        if (shouldUpdate) {\r\n            var editor = this.editor,\r\n                instance = this.instance;\r\n            var $editor = editor.$element();\r\n            var options = this._getOptions();\r\n            null === instance || void 0 === instance ? void 0 : instance.option(options);\r\n            this._legacyRender($editor, null === instance || void 0 === instance ? void 0 : instance.$element(), options.visible)\r\n        }\r\n    };\r\n    return DropDownButton\r\n}(_button.default);\r\nexports.default = DropDownButton;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}