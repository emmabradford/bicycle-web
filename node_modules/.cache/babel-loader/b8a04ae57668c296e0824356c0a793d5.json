{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space.grouped.strategy.horizontal.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _position = require(\"../../../core/utils/position\");\n\nvar _uiSchedulerWork_spaceGrouped = _interopRequireDefault(require(\"./ui.scheduler.work_space.grouped.strategy\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar HORIZONTAL_GROUPED_ATTR = \"dx-group-row-count\";\n\nvar HorizontalGroupedStrategy = function (_GroupedStrategy) {\n  _inheritsLoose(HorizontalGroupedStrategy, _GroupedStrategy);\n\n  function HorizontalGroupedStrategy() {\n    return _GroupedStrategy.apply(this, arguments) || this;\n  }\n\n  var _proto = HorizontalGroupedStrategy.prototype;\n\n  _proto.prepareCellIndexes = function (cellCoordinates, groupIndex, inAllDay) {\n    var groupByDay = this._workSpace.isGroupedByDate();\n\n    if (!groupByDay) {\n      return {\n        rowIndex: cellCoordinates.rowIndex,\n        cellIndex: cellCoordinates.cellIndex + groupIndex * this._workSpace._getCellCount()\n      };\n    } else {\n      return {\n        rowIndex: cellCoordinates.rowIndex,\n        cellIndex: cellCoordinates.cellIndex * this._workSpace._getGroupCount() + groupIndex\n      };\n    }\n  };\n\n  _proto.calculateCellIndex = function (rowIndex, cellIndex) {\n    cellIndex %= this._workSpace._getCellCount();\n    return this._workSpace._getRowCount() * cellIndex + rowIndex;\n  };\n\n  _proto.getGroupIndex = function (rowIndex, cellIndex) {\n    var groupByDay = this._workSpace.isGroupedByDate();\n\n    var groupCount = this._workSpace._getGroupCount();\n\n    if (groupByDay) {\n      return cellIndex % groupCount;\n    } else {\n      return Math.floor(cellIndex / this._workSpace._getCellCount());\n    }\n  };\n\n  _proto.calculateHeaderCellRepeatCount = function () {\n    return this._workSpace._getGroupCount() || 1;\n  };\n\n  _proto.insertAllDayRowsIntoDateTable = function () {\n    return false;\n  };\n\n  _proto.getTotalCellCount = function (groupCount) {\n    groupCount = groupCount || 1;\n    return this._workSpace._getCellCount() * groupCount;\n  };\n\n  _proto.getTotalRowCount = function () {\n    return this._workSpace._getRowCount();\n  };\n\n  _proto.addAdditionalGroupCellClasses = function (cellClass, index, i, j) {\n    var applyUnconditionally = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\n    cellClass = this._addLastGroupCellClass(cellClass, index, applyUnconditionally);\n    return this._addFirstGroupCellClass(cellClass, index, applyUnconditionally);\n  };\n\n  _proto._addLastGroupCellClass = function (cellClass, index, applyUnconditionally) {\n    if (applyUnconditionally) {\n      return \"\".concat(cellClass, \" \").concat(this.getLastGroupCellClass());\n    }\n\n    var groupByDate = this._workSpace.isGroupedByDate();\n\n    if (groupByDate) {\n      if (index % this._workSpace._getGroupCount() === 0) {\n        return \"\".concat(cellClass, \" \").concat(this.getLastGroupCellClass());\n      }\n    } else {\n      if (index % this._workSpace._getCellCount() === 0) {\n        return \"\".concat(cellClass, \" \").concat(this.getLastGroupCellClass());\n      }\n    }\n\n    return cellClass;\n  };\n\n  _proto._addFirstGroupCellClass = function (cellClass, index, applyUnconditionally) {\n    if (applyUnconditionally) {\n      return \"\".concat(cellClass, \" \").concat(this.getFirstGroupCellClass());\n    }\n\n    var groupByDate = this._workSpace.isGroupedByDate();\n\n    if (groupByDate) {\n      if ((index - 1) % this._workSpace._getGroupCount() === 0) {\n        return \"\".concat(cellClass, \" \").concat(this.getFirstGroupCellClass());\n      }\n    } else {\n      if ((index - 1) % this._workSpace._getCellCount() === 0) {\n        return \"\".concat(cellClass, \" \").concat(this.getFirstGroupCellClass());\n      }\n    }\n\n    return cellClass;\n  };\n\n  _proto.getHorizontalMax = function (groupIndex) {\n    return this._workSpace.getMaxAllowedPosition()[groupIndex];\n  };\n\n  _proto.getVerticalMax = function (groupIndex) {\n    return this._workSpace.getMaxAllowedVerticalPosition(0);\n  };\n\n  _proto.calculateTimeCellRepeatCount = function () {\n    return 1;\n  };\n\n  _proto.getWorkSpaceMinWidth = function () {\n    return (0, _position.getBoundingRect)(this._workSpace.$element().get(0)).width - this._workSpace.getTimePanelWidth();\n  };\n\n  _proto.getAllDayOffset = function () {\n    return this._workSpace.getAllDayHeight();\n  };\n\n  _proto.getAllDayTableHeight = function () {\n    return (0, _position.getBoundingRect)(this._workSpace._$allDayTable.get(0)).height || 0;\n  };\n\n  _proto.getGroupCountAttr = function (groupRowCount, groupRows) {\n    return {\n      attr: HORIZONTAL_GROUPED_ATTR,\n      count: groupRows && groupRows.elements.length\n    };\n  };\n\n  _proto.getLeftOffset = function () {\n    return this._workSpace.getTimePanelWidth();\n  };\n\n  _proto.getGroupBoundsOffset = function (cellCount, $cells, cellWidth, coordinates) {\n    var groupIndex;\n    var cellIndex;\n    var startCellIndex;\n    var startOffset;\n    var endOffset;\n\n    if (this._workSpace.isGroupedByDate()) {\n      startCellIndex = 0;\n      startOffset = $cells.eq(startCellIndex).offset().left - cellWidth / 2;\n      endOffset = $cells.eq(cellCount * this._workSpace._getGroupCount() - 1).offset().left + cellWidth + cellWidth / 2;\n    } else {\n      cellIndex = this._workSpace.getCellIndexByCoordinates(coordinates);\n      groupIndex = coordinates.groupIndex || Math.floor(cellIndex / cellCount);\n      startCellIndex = groupIndex * cellCount;\n      startOffset = $cells.eq(startCellIndex).offset().left - cellWidth / 2;\n      endOffset = $cells.eq(startCellIndex + cellCount - 1).offset().left + cellWidth + cellWidth / 2;\n    }\n\n    return {\n      left: startOffset,\n      right: endOffset,\n      top: 0,\n      bottom: 0\n    };\n  };\n\n  _proto.shiftIndicator = function ($indicator, height, rtlOffset, groupIndex) {\n    var offset = this._getIndicatorOffset(groupIndex);\n\n    var horizontalOffset = rtlOffset ? rtlOffset - offset : offset;\n    $indicator.css(\"left\", horizontalOffset);\n    $indicator.css(\"top\", height);\n  };\n\n  _proto._getIndicatorOffset = function (groupIndex) {\n    var groupByDay = this._workSpace.isGroupedByDate();\n\n    return groupByDay ? this._calculateGroupByDateOffset(groupIndex) : this._calculateOffset(groupIndex);\n  };\n\n  _proto._calculateOffset = function (groupIndex) {\n    return this._workSpace._getCellCount() * this._workSpace.getRoundedCellWidth(groupIndex - 1, 0) * groupIndex + this._workSpace.getIndicatorOffset(groupIndex) + groupIndex;\n  };\n\n  _proto._calculateGroupByDateOffset = function (groupIndex) {\n    return this._workSpace.getIndicatorOffset(0) * this._workSpace._getGroupCount() + this._workSpace.getRoundedCellWidth(groupIndex - 1, 0) * groupIndex;\n  };\n\n  _proto.getShaderOffset = function (i, width) {\n    var offset = this._workSpace._getCellCount() * this._workSpace.getRoundedCellWidth(i - 1) * i;\n    return this._workSpace.option(\"rtlEnabled\") ? (0, _position.getBoundingRect)(this._workSpace._dateTableScrollable.$content().get(0)).width - offset - this._workSpace.getTimePanelWidth() - width : offset;\n  };\n\n  _proto.getShaderTopOffset = function (i) {\n    return -this.getShaderMaxHeight() * (i > 0 ? 1 : 0);\n  };\n\n  _proto.getShaderHeight = function () {\n    var height = this._workSpace.getIndicationHeight();\n\n    return height;\n  };\n\n  _proto.getShaderMaxHeight = function () {\n    return (0, _position.getBoundingRect)(this._workSpace._dateTableScrollable.$content().get(0)).height;\n  };\n\n  _proto.getShaderWidth = function (i) {\n    return this._workSpace.getIndicationWidth(i);\n  };\n\n  _proto.getScrollableScrollTop = function (allDay) {\n    return !allDay ? this._workSpace.getScrollable().scrollTop() : 0;\n  };\n\n  _proto.getGroupIndexByCell = function ($cell) {\n    var rowIndex = $cell.parent().index();\n    var cellIndex = $cell.index();\n    return this.getGroupIndex(rowIndex, cellIndex);\n  };\n\n  return HorizontalGroupedStrategy;\n}(_uiSchedulerWork_spaceGrouped.default);\n\nvar _default = HorizontalGroupedStrategy;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.work_space.grouped.strategy.horizontal.js"],"names":["exports","default","_position","require","_uiSchedulerWork_spaceGrouped","_interopRequireDefault","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","HORIZONTAL_GROUPED_ATTR","HorizontalGroupedStrategy","_GroupedStrategy","apply","arguments","_proto","prepareCellIndexes","cellCoordinates","groupIndex","inAllDay","groupByDay","_workSpace","isGroupedByDate","rowIndex","cellIndex","_getCellCount","_getGroupCount","calculateCellIndex","_getRowCount","getGroupIndex","groupCount","Math","floor","calculateHeaderCellRepeatCount","insertAllDayRowsIntoDateTable","getTotalCellCount","getTotalRowCount","addAdditionalGroupCellClasses","cellClass","index","i","j","applyUnconditionally","length","_addLastGroupCellClass","_addFirstGroupCellClass","concat","getLastGroupCellClass","groupByDate","getFirstGroupCellClass","getHorizontalMax","getMaxAllowedPosition","getVerticalMax","getMaxAllowedVerticalPosition","calculateTimeCellRepeatCount","getWorkSpaceMinWidth","getBoundingRect","$element","get","width","getTimePanelWidth","getAllDayOffset","getAllDayHeight","getAllDayTableHeight","_$allDayTable","height","getGroupCountAttr","groupRowCount","groupRows","attr","count","elements","getLeftOffset","getGroupBoundsOffset","cellCount","$cells","cellWidth","coordinates","startCellIndex","startOffset","endOffset","eq","offset","left","getCellIndexByCoordinates","right","top","bottom","shiftIndicator","$indicator","rtlOffset","_getIndicatorOffset","horizontalOffset","css","_calculateGroupByDateOffset","_calculateOffset","getRoundedCellWidth","getIndicatorOffset","getShaderOffset","option","_dateTableScrollable","$content","getShaderTopOffset","getShaderMaxHeight","getShaderHeight","getIndicationHeight","getShaderWidth","getIndicationWidth","getScrollableScrollTop","allDay","getScrollable","scrollTop","getGroupIndexByCell","$cell","parent","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space.grouped.strategy.horizontal.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _position = require(\"../../../core/utils/position\");\r\nvar _uiSchedulerWork_spaceGrouped = _interopRequireDefault(require(\"./ui.scheduler.work_space.grouped.strategy\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar HORIZONTAL_GROUPED_ATTR = \"dx-group-row-count\";\r\nvar HorizontalGroupedStrategy = function(_GroupedStrategy) {\r\n    _inheritsLoose(HorizontalGroupedStrategy, _GroupedStrategy);\r\n\r\n    function HorizontalGroupedStrategy() {\r\n        return _GroupedStrategy.apply(this, arguments) || this\r\n    }\r\n    var _proto = HorizontalGroupedStrategy.prototype;\r\n    _proto.prepareCellIndexes = function(cellCoordinates, groupIndex, inAllDay) {\r\n        var groupByDay = this._workSpace.isGroupedByDate();\r\n        if (!groupByDay) {\r\n            return {\r\n                rowIndex: cellCoordinates.rowIndex,\r\n                cellIndex: cellCoordinates.cellIndex + groupIndex * this._workSpace._getCellCount()\r\n            }\r\n        } else {\r\n            return {\r\n                rowIndex: cellCoordinates.rowIndex,\r\n                cellIndex: cellCoordinates.cellIndex * this._workSpace._getGroupCount() + groupIndex\r\n            }\r\n        }\r\n    };\r\n    _proto.calculateCellIndex = function(rowIndex, cellIndex) {\r\n        cellIndex %= this._workSpace._getCellCount();\r\n        return this._workSpace._getRowCount() * cellIndex + rowIndex\r\n    };\r\n    _proto.getGroupIndex = function(rowIndex, cellIndex) {\r\n        var groupByDay = this._workSpace.isGroupedByDate();\r\n        var groupCount = this._workSpace._getGroupCount();\r\n        if (groupByDay) {\r\n            return cellIndex % groupCount\r\n        } else {\r\n            return Math.floor(cellIndex / this._workSpace._getCellCount())\r\n        }\r\n    };\r\n    _proto.calculateHeaderCellRepeatCount = function() {\r\n        return this._workSpace._getGroupCount() || 1\r\n    };\r\n    _proto.insertAllDayRowsIntoDateTable = function() {\r\n        return false\r\n    };\r\n    _proto.getTotalCellCount = function(groupCount) {\r\n        groupCount = groupCount || 1;\r\n        return this._workSpace._getCellCount() * groupCount\r\n    };\r\n    _proto.getTotalRowCount = function() {\r\n        return this._workSpace._getRowCount()\r\n    };\r\n    _proto.addAdditionalGroupCellClasses = function(cellClass, index, i, j) {\r\n        var applyUnconditionally = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : false;\r\n        cellClass = this._addLastGroupCellClass(cellClass, index, applyUnconditionally);\r\n        return this._addFirstGroupCellClass(cellClass, index, applyUnconditionally)\r\n    };\r\n    _proto._addLastGroupCellClass = function(cellClass, index, applyUnconditionally) {\r\n        if (applyUnconditionally) {\r\n            return \"\".concat(cellClass, \" \").concat(this.getLastGroupCellClass())\r\n        }\r\n        var groupByDate = this._workSpace.isGroupedByDate();\r\n        if (groupByDate) {\r\n            if (index % this._workSpace._getGroupCount() === 0) {\r\n                return \"\".concat(cellClass, \" \").concat(this.getLastGroupCellClass())\r\n            }\r\n        } else {\r\n            if (index % this._workSpace._getCellCount() === 0) {\r\n                return \"\".concat(cellClass, \" \").concat(this.getLastGroupCellClass())\r\n            }\r\n        }\r\n        return cellClass\r\n    };\r\n    _proto._addFirstGroupCellClass = function(cellClass, index, applyUnconditionally) {\r\n        if (applyUnconditionally) {\r\n            return \"\".concat(cellClass, \" \").concat(this.getFirstGroupCellClass())\r\n        }\r\n        var groupByDate = this._workSpace.isGroupedByDate();\r\n        if (groupByDate) {\r\n            if ((index - 1) % this._workSpace._getGroupCount() === 0) {\r\n                return \"\".concat(cellClass, \" \").concat(this.getFirstGroupCellClass())\r\n            }\r\n        } else {\r\n            if ((index - 1) % this._workSpace._getCellCount() === 0) {\r\n                return \"\".concat(cellClass, \" \").concat(this.getFirstGroupCellClass())\r\n            }\r\n        }\r\n        return cellClass\r\n    };\r\n    _proto.getHorizontalMax = function(groupIndex) {\r\n        return this._workSpace.getMaxAllowedPosition()[groupIndex]\r\n    };\r\n    _proto.getVerticalMax = function(groupIndex) {\r\n        return this._workSpace.getMaxAllowedVerticalPosition(0)\r\n    };\r\n    _proto.calculateTimeCellRepeatCount = function() {\r\n        return 1\r\n    };\r\n    _proto.getWorkSpaceMinWidth = function() {\r\n        return (0, _position.getBoundingRect)(this._workSpace.$element().get(0)).width - this._workSpace.getTimePanelWidth()\r\n    };\r\n    _proto.getAllDayOffset = function() {\r\n        return this._workSpace.getAllDayHeight()\r\n    };\r\n    _proto.getAllDayTableHeight = function() {\r\n        return (0, _position.getBoundingRect)(this._workSpace._$allDayTable.get(0)).height || 0\r\n    };\r\n    _proto.getGroupCountAttr = function(groupRowCount, groupRows) {\r\n        return {\r\n            attr: HORIZONTAL_GROUPED_ATTR,\r\n            count: groupRows && groupRows.elements.length\r\n        }\r\n    };\r\n    _proto.getLeftOffset = function() {\r\n        return this._workSpace.getTimePanelWidth()\r\n    };\r\n    _proto.getGroupBoundsOffset = function(cellCount, $cells, cellWidth, coordinates) {\r\n        var groupIndex;\r\n        var cellIndex;\r\n        var startCellIndex;\r\n        var startOffset;\r\n        var endOffset;\r\n        if (this._workSpace.isGroupedByDate()) {\r\n            startCellIndex = 0;\r\n            startOffset = $cells.eq(startCellIndex).offset().left - cellWidth / 2;\r\n            endOffset = $cells.eq(cellCount * this._workSpace._getGroupCount() - 1).offset().left + cellWidth + cellWidth / 2\r\n        } else {\r\n            cellIndex = this._workSpace.getCellIndexByCoordinates(coordinates);\r\n            groupIndex = coordinates.groupIndex || Math.floor(cellIndex / cellCount);\r\n            startCellIndex = groupIndex * cellCount;\r\n            startOffset = $cells.eq(startCellIndex).offset().left - cellWidth / 2;\r\n            endOffset = $cells.eq(startCellIndex + cellCount - 1).offset().left + cellWidth + cellWidth / 2\r\n        }\r\n        return {\r\n            left: startOffset,\r\n            right: endOffset,\r\n            top: 0,\r\n            bottom: 0\r\n        }\r\n    };\r\n    _proto.shiftIndicator = function($indicator, height, rtlOffset, groupIndex) {\r\n        var offset = this._getIndicatorOffset(groupIndex);\r\n        var horizontalOffset = rtlOffset ? rtlOffset - offset : offset;\r\n        $indicator.css(\"left\", horizontalOffset);\r\n        $indicator.css(\"top\", height)\r\n    };\r\n    _proto._getIndicatorOffset = function(groupIndex) {\r\n        var groupByDay = this._workSpace.isGroupedByDate();\r\n        return groupByDay ? this._calculateGroupByDateOffset(groupIndex) : this._calculateOffset(groupIndex)\r\n    };\r\n    _proto._calculateOffset = function(groupIndex) {\r\n        return this._workSpace._getCellCount() * this._workSpace.getRoundedCellWidth(groupIndex - 1, 0) * groupIndex + this._workSpace.getIndicatorOffset(groupIndex) + groupIndex\r\n    };\r\n    _proto._calculateGroupByDateOffset = function(groupIndex) {\r\n        return this._workSpace.getIndicatorOffset(0) * this._workSpace._getGroupCount() + this._workSpace.getRoundedCellWidth(groupIndex - 1, 0) * groupIndex\r\n    };\r\n    _proto.getShaderOffset = function(i, width) {\r\n        var offset = this._workSpace._getCellCount() * this._workSpace.getRoundedCellWidth(i - 1) * i;\r\n        return this._workSpace.option(\"rtlEnabled\") ? (0, _position.getBoundingRect)(this._workSpace._dateTableScrollable.$content().get(0)).width - offset - this._workSpace.getTimePanelWidth() - width : offset\r\n    };\r\n    _proto.getShaderTopOffset = function(i) {\r\n        return -this.getShaderMaxHeight() * (i > 0 ? 1 : 0)\r\n    };\r\n    _proto.getShaderHeight = function() {\r\n        var height = this._workSpace.getIndicationHeight();\r\n        return height\r\n    };\r\n    _proto.getShaderMaxHeight = function() {\r\n        return (0, _position.getBoundingRect)(this._workSpace._dateTableScrollable.$content().get(0)).height\r\n    };\r\n    _proto.getShaderWidth = function(i) {\r\n        return this._workSpace.getIndicationWidth(i)\r\n    };\r\n    _proto.getScrollableScrollTop = function(allDay) {\r\n        return !allDay ? this._workSpace.getScrollable().scrollTop() : 0\r\n    };\r\n    _proto.getGroupIndexByCell = function($cell) {\r\n        var rowIndex = $cell.parent().index();\r\n        var cellIndex = $cell.index();\r\n        return this.getGroupIndex(rowIndex, cellIndex)\r\n    };\r\n    return HorizontalGroupedStrategy\r\n}(_uiSchedulerWork_spaceGrouped.default);\r\nvar _default = HorizontalGroupedStrategy;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}