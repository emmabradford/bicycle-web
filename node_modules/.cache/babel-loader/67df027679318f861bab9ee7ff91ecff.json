{"ast":null,"code":"/**\r\n * DevExtreme (data/data_source/data_source.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.DataSource = void 0;\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _utils = _interopRequireDefault(require(\"../utils\"));\n\nvar _array_utils = require(\"../array_utils\");\n\nvar _custom_store = _interopRequireDefault(require(\"../custom_store\"));\n\nvar _events_strategy = require(\"../../core/events_strategy\");\n\nvar _errors = _interopRequireDefault(require(\"../errors\"));\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _queue = require(\"../../core/utils/queue\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _operation_manager = _interopRequireDefault(require(\"./operation_manager\"));\n\nvar _utils2 = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && null != iter[Symbol.iterator] || null != iter[\"@@iterator\"]) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar DataSource = _class.default.inherit({\n  ctor: function (options) {\n    var _options$reshapeOnPus,\n        _this = this;\n\n    options = (0, _utils2.normalizeDataSourceOptions)(options);\n    this._eventsStrategy = new _events_strategy.EventsStrategy(this, {\n      syncStrategy: true\n    });\n    this._store = options.store;\n    this._changedTime = 0;\n    var needThrottling = 0 !== options.pushAggregationTimeout;\n\n    if (needThrottling) {\n      var throttlingTimeout = void 0 === options.pushAggregationTimeout ? function () {\n        return 5 * _this._changedTime;\n      } : options.pushAggregationTimeout;\n      var pushDeferred;\n      var lastPushWaiters;\n\n      var throttlingPushHandler = _utils.default.throttleChanges(function (changes) {\n        pushDeferred.resolve();\n\n        var storePushPending = _deferred.when.apply(void 0, _toConsumableArray(lastPushWaiters));\n\n        storePushPending.done(function () {\n          return _this._onPush(changes);\n        });\n        lastPushWaiters = void 0;\n        pushDeferred = void 0;\n      }, throttlingTimeout);\n\n      this._onPushHandler = function (args) {\n        _this._aggregationTimeoutId = throttlingPushHandler(args.changes);\n\n        if (!pushDeferred) {\n          pushDeferred = new _deferred.Deferred();\n        }\n\n        lastPushWaiters = args.waitFor;\n        args.waitFor.push(pushDeferred.promise());\n      };\n\n      this._store.on(\"beforePush\", this._onPushHandler);\n    } else {\n      this._onPushHandler = function (changes) {\n        return _this._onPush(changes);\n      };\n\n      this._store.on(\"push\", this._onPushHandler);\n    }\n\n    this._storeLoadOptions = this._extractLoadOptions(options);\n    this._mapFunc = options.map;\n    this._postProcessFunc = options.postProcess;\n    this._pageIndex = void 0 !== options.pageIndex ? options.pageIndex : 0;\n    this._pageSize = void 0 !== options.pageSize ? options.pageSize : 20;\n    this._loadingCount = 0;\n    this._loadQueue = this._createLoadQueue();\n    this._searchValue = \"searchValue\" in options ? options.searchValue : null;\n    this._searchOperation = options.searchOperation || \"contains\";\n    this._searchExpr = options.searchExpr;\n    this._paginate = options.paginate;\n    this._reshapeOnPush = null !== (_options$reshapeOnPus = options.reshapeOnPush) && void 0 !== _options$reshapeOnPus ? _options$reshapeOnPus : false;\n    (0, _iterator.each)([\"onChanged\", \"onLoadError\", \"onLoadingChanged\", \"onCustomizeLoadResult\", \"onCustomizeStoreLoadOptions\"], function (_, optionName) {\n      if (optionName in options) {\n        _this.on(optionName.substr(2, 1).toLowerCase() + optionName.substr(3), options[optionName]);\n      }\n    });\n    this._operationManager = new _operation_manager.default();\n\n    this._init();\n  },\n  _init: function () {\n    this._items = [];\n    this._userData = {};\n    this._totalCount = -1;\n    this._isLoaded = false;\n\n    if (!(0, _type.isDefined)(this._paginate)) {\n      this._paginate = !this.group();\n    }\n\n    this._isLastPage = !this._paginate;\n  },\n  dispose: function () {\n    var _this$_delayedLoadTas;\n\n    this._store.off(\"beforePush\", this._onPushHandler);\n\n    this._store.off(\"push\", this._onPushHandler);\n\n    this._eventsStrategy.dispose();\n\n    clearTimeout(this._aggregationTimeoutId);\n    delete this._store;\n    null === (_this$_delayedLoadTas = this._delayedLoadTask) || void 0 === _this$_delayedLoadTas ? void 0 : _this$_delayedLoadTas.abort();\n\n    this._operationManager.cancelAll();\n\n    this._disposed = true;\n  },\n  _extractLoadOptions: function (options) {\n    var result = {};\n    var names = [\"sort\", \"filter\", \"select\", \"group\", \"requireTotalCount\"];\n\n    var customNames = this._store._customLoadOptions();\n\n    if (customNames) {\n      names = names.concat(customNames);\n    }\n\n    (0, _iterator.each)(names, function () {\n      result[this] = options[this];\n    });\n    return result;\n  },\n  loadOptions: function () {\n    return this._storeLoadOptions;\n  },\n  items: function () {\n    return this._items;\n  },\n  pageIndex: function (newIndex) {\n    if (!(0, _type.isNumeric)(newIndex)) {\n      return this._pageIndex;\n    }\n\n    this._pageIndex = newIndex;\n    this._isLastPage = !this._paginate;\n  },\n  paginate: function (value) {\n    if (!(0, _type.isBoolean)(value)) {\n      return this._paginate;\n    }\n\n    if (this._paginate !== value) {\n      this._paginate = value;\n      this.pageIndex(0);\n    }\n  },\n  pageSize: function (value) {\n    if (!(0, _type.isNumeric)(value)) {\n      return this._pageSize;\n    }\n\n    this._pageSize = value;\n  },\n  isLastPage: function () {\n    return this._isLastPage;\n  },\n  generateStoreLoadOptionAccessor: function (optionName) {\n    var _this2 = this;\n\n    return function (args) {\n      var normalizedArgs = (0, _utils2.normalizeStoreLoadOptionAccessorArguments)(args);\n\n      if (void 0 === normalizedArgs) {\n        return _this2._storeLoadOptions[optionName];\n      }\n\n      _this2._storeLoadOptions[optionName] = normalizedArgs;\n    };\n  },\n  sort: function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return this.generateStoreLoadOptionAccessor(\"sort\")(args);\n  },\n  filter: function () {\n    var newFilter = (0, _utils2.normalizeStoreLoadOptionAccessorArguments)(arguments);\n\n    if (void 0 === newFilter) {\n      return this._storeLoadOptions.filter;\n    }\n\n    this._storeLoadOptions.filter = newFilter;\n    this.pageIndex(0);\n  },\n  group: function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return this.generateStoreLoadOptionAccessor(\"group\")(args);\n  },\n  select: function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return this.generateStoreLoadOptionAccessor(\"select\")(args);\n  },\n  requireTotalCount: function (value) {\n    if (!(0, _type.isBoolean)(value)) {\n      return this._storeLoadOptions.requireTotalCount;\n    }\n\n    this._storeLoadOptions.requireTotalCount = value;\n  },\n  searchValue: function (value) {\n    if (arguments.length < 1) {\n      return this._searchValue;\n    }\n\n    this._searchValue = value;\n    this.pageIndex(0);\n  },\n  searchOperation: function (op) {\n    if (!(0, _type.isString)(op)) {\n      return this._searchOperation;\n    }\n\n    this._searchOperation = op;\n    this.pageIndex(0);\n  },\n  searchExpr: function (expr) {\n    var argc = arguments.length;\n\n    if (0 === argc) {\n      return this._searchExpr;\n    }\n\n    if (argc > 1) {\n      expr = [].slice.call(arguments);\n    }\n\n    this._searchExpr = expr;\n    this.pageIndex(0);\n  },\n  store: function () {\n    return this._store;\n  },\n  key: function () {\n    var _this$_store;\n\n    return null === (_this$_store = this._store) || void 0 === _this$_store ? void 0 : _this$_store.key();\n  },\n  totalCount: function () {\n    return this._totalCount;\n  },\n  isLoaded: function () {\n    return this._isLoaded;\n  },\n  isLoading: function () {\n    return this._loadingCount > 0;\n  },\n  beginLoading: function () {\n    this._changeLoadingCount(1);\n  },\n  endLoading: function () {\n    this._changeLoadingCount(-1);\n  },\n  _createLoadQueue: function () {\n    return (0, _queue.create)();\n  },\n  _changeLoadingCount: function (increment) {\n    var oldLoading = this.isLoading();\n    this._loadingCount += increment;\n    var newLoading = this.isLoading();\n\n    if (oldLoading ^ newLoading) {\n      this._eventsStrategy.fireEvent(\"loadingChanged\", [newLoading]);\n    }\n  },\n  _scheduleLoadCallbacks: function (deferred) {\n    var _this3 = this;\n\n    this.beginLoading();\n    deferred.always(function () {\n      _this3.endLoading();\n    });\n  },\n  _scheduleFailCallbacks: function (deferred) {\n    var _this4 = this;\n\n    deferred.fail(function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      if (args[0] === _utils2.CANCELED_TOKEN) {\n        return;\n      }\n\n      _this4._eventsStrategy.fireEvent(\"loadError\", args);\n    });\n  },\n  _fireChanged: function (args) {\n    var date = new Date();\n\n    this._eventsStrategy.fireEvent(\"changed\", args);\n\n    this._changedTime = new Date() - date;\n  },\n  _scheduleChangedCallbacks: function (deferred) {\n    var _this5 = this;\n\n    deferred.done(function () {\n      return _this5._fireChanged();\n    });\n  },\n  loadSingle: function (propName, propValue) {\n    var _this6 = this;\n\n    var d = new _deferred.Deferred();\n    var key = this.key();\n    var store = this._store;\n\n    var options = this._createStoreLoadOptions();\n\n    var handleDone = function (data) {\n      if (!(0, _type.isDefined)(data) || (0, _array.isEmpty)(data)) {\n        d.reject(new _errors.default.errors.Error(\"E4009\"));\n      } else {\n        if (!Array.isArray(data)) {\n          data = [data];\n        }\n\n        d.resolve(_this6._applyMapFunction(data)[0]);\n      }\n    };\n\n    this._scheduleFailCallbacks(d);\n\n    if (arguments.length < 2) {\n      propValue = propName;\n      propName = key;\n    }\n\n    delete options.skip;\n    delete options.group;\n    delete options.refresh;\n    delete options.pageIndex;\n    delete options.searchString;\n\n    var shouldForceByKey = function () {\n      return store instanceof _custom_store.default && !store._byKeyViaLoad();\n    };\n\n    (function () {\n      if (propName === key || shouldForceByKey()) {\n        return store.byKey(propValue, options);\n      }\n\n      options.take = 1;\n      options.filter = options.filter ? [options.filter, [propName, propValue]] : [propName, propValue];\n      return store.load(options);\n    })().fail(d.reject).done(handleDone);\n    return d.promise();\n  },\n  load: function () {\n    var _this7 = this;\n\n    var d = new _deferred.Deferred();\n\n    var loadTask = function () {\n      if (_this7._disposed) {\n        return;\n      }\n\n      if (!(0, _utils2.isPending)(d)) {\n        return;\n      }\n\n      return _this7._loadFromStore(loadOperation, d);\n    };\n\n    this._scheduleLoadCallbacks(d);\n\n    this._scheduleFailCallbacks(d);\n\n    this._scheduleChangedCallbacks(d);\n\n    var loadOperation = this._createLoadOperation(d);\n\n    this._eventsStrategy.fireEvent(\"customizeStoreLoadOptions\", [loadOperation]);\n\n    this._loadQueue.add(function () {\n      if (\"number\" === typeof loadOperation.delay) {\n        _this7._delayedLoadTask = (0, _common.executeAsync)(loadTask, loadOperation.delay);\n      } else {\n        loadTask();\n      }\n\n      return d.promise();\n    });\n\n    return d.promise({\n      operationId: loadOperation.operationId\n    });\n  },\n  _onPush: function (changes) {\n    var _this8 = this;\n\n    if (this._reshapeOnPush) {\n      this.load();\n    } else {\n      this._eventsStrategy.fireEvent(\"changing\", [{\n        changes: changes\n      }]);\n\n      var group = this.group();\n      var items = this.items();\n      var groupLevel = 0;\n      var dataSourceChanges = this.paginate() || group ? changes.filter(function (item) {\n        return \"update\" === item.type;\n      }) : changes;\n\n      if (group) {\n        groupLevel = Array.isArray(group) ? group.length : 1;\n      }\n\n      if (this._mapFunc) {\n        dataSourceChanges.forEach(function (item) {\n          if (\"insert\" === item.type) {\n            item.data = _this8._mapFunc(item.data);\n          }\n        });\n      }\n\n      (0, _array_utils.applyBatch)({\n        keyInfo: this.store(),\n        data: items,\n        changes: dataSourceChanges,\n        groupCount: groupLevel,\n        useInsertIndex: true\n      });\n\n      this._fireChanged([{\n        changes: changes\n      }]);\n    }\n  },\n  _createLoadOperation: function (deferred) {\n    var _this9 = this;\n\n    var operationId = this._operationManager.add(deferred);\n\n    var storeLoadOptions = this._createStoreLoadOptions();\n\n    deferred.always(function () {\n      return _this9._operationManager.remove(operationId);\n    });\n    return {\n      operationId: operationId,\n      storeLoadOptions: storeLoadOptions\n    };\n  },\n  reload: function () {\n    var store = this.store();\n\n    if (store instanceof _custom_store.default) {\n      store.clearRawDataCache();\n    }\n\n    this._init();\n\n    return this.load();\n  },\n  cancel: function (operationId) {\n    return this._operationManager.cancel(operationId);\n  },\n  cancelAll: function () {\n    return this._operationManager.cancelAll();\n  },\n  _addSearchOptions: function (storeLoadOptions) {\n    if (this._disposed) {\n      return;\n    }\n\n    if (this.store()._useDefaultSearch) {\n      this._addSearchFilter(storeLoadOptions);\n    } else {\n      storeLoadOptions.searchOperation = this._searchOperation;\n      storeLoadOptions.searchValue = this._searchValue;\n      storeLoadOptions.searchExpr = this._searchExpr;\n    }\n  },\n  _createStoreLoadOptions: function () {\n    var result = (0, _extend.extend)({}, this._storeLoadOptions);\n\n    this._addSearchOptions(result);\n\n    if (this._paginate) {\n      if (this._pageSize) {\n        result.skip = this._pageIndex * this._pageSize;\n        result.take = this._pageSize;\n      }\n    }\n\n    result.userData = this._userData;\n    return result;\n  },\n  _addSearchFilter: function (storeLoadOptions) {\n    var value = this._searchValue;\n    var op = this._searchOperation;\n    var selector = this._searchExpr;\n    var searchFilter = [];\n\n    if (!value) {\n      return;\n    }\n\n    if (!selector) {\n      selector = \"this\";\n    }\n\n    if (!Array.isArray(selector)) {\n      selector = [selector];\n    }\n\n    (0, _iterator.each)(selector, function (i, item) {\n      if (searchFilter.length) {\n        searchFilter.push(\"or\");\n      }\n\n      searchFilter.push([item, op, value]);\n    });\n\n    if (storeLoadOptions.filter) {\n      storeLoadOptions.filter = [searchFilter, storeLoadOptions.filter];\n    } else {\n      storeLoadOptions.filter = searchFilter;\n    }\n  },\n  _loadFromStore: function (loadOptions, pendingDeferred) {\n    var _this10 = this;\n\n    var handleSuccess = function (data, extra) {\n      if (_this10._disposed) {\n        return;\n      }\n\n      if (!(0, _utils2.isPending)(pendingDeferred)) {\n        return;\n      }\n\n      var loadResult = (0, _extend.extend)((0, _utils2.normalizeLoadResult)(data, extra), loadOptions);\n\n      _this10._eventsStrategy.fireEvent(\"customizeLoadResult\", [loadResult]);\n\n      (0, _deferred.when)(loadResult.data).done(function (data) {\n        loadResult.data = data;\n\n        _this10._processStoreLoadResult(loadResult, pendingDeferred);\n      }).fail(pendingDeferred.reject);\n    };\n\n    if (loadOptions.data) {\n      return new _deferred.Deferred().resolve(loadOptions.data).done(handleSuccess);\n    }\n\n    return this.store().load(loadOptions.storeLoadOptions).done(handleSuccess).fail(pendingDeferred.reject);\n  },\n  _processStoreLoadResult: function (loadResult, pendingDeferred) {\n    var _this11 = this;\n\n    var data = loadResult.data;\n    var extra = loadResult.extra;\n    var storeLoadOptions = loadResult.storeLoadOptions;\n\n    var resolvePendingDeferred = function () {\n      _this11._isLoaded = true;\n      _this11._totalCount = isFinite(extra.totalCount) ? extra.totalCount : -1;\n      return pendingDeferred.resolve(data, extra);\n    };\n\n    var proceedLoadingTotalCount = function () {\n      _this11.store().totalCount(storeLoadOptions).done(function (count) {\n        extra.totalCount = count;\n        resolvePendingDeferred();\n      }).fail(pendingDeferred.reject);\n    };\n\n    if (this._disposed) {\n      return;\n    }\n\n    data = this._applyPostProcessFunction(this._applyMapFunction(data));\n\n    if (!(0, _type.isPlainObject)(extra)) {\n      extra = {};\n    }\n\n    this._items = data;\n\n    if (!data.length || !this._paginate || this._pageSize && data.length < this._pageSize) {\n      this._isLastPage = true;\n    }\n\n    if (storeLoadOptions.requireTotalCount && !isFinite(extra.totalCount)) {\n      proceedLoadingTotalCount();\n    } else {\n      resolvePendingDeferred();\n    }\n  },\n  _applyMapFunction: function (data) {\n    if (this._mapFunc) {\n      return (0, _utils2.mapDataRespectingGrouping)(data, this._mapFunc, this.group());\n    }\n\n    return data;\n  },\n  _applyPostProcessFunction: function (data) {\n    if (this._postProcessFunc) {\n      return this._postProcessFunc(data);\n    }\n\n    return data;\n  },\n  on: function (eventName, eventHandler) {\n    this._eventsStrategy.on(eventName, eventHandler);\n\n    return this;\n  },\n  off: function (eventName, eventHandler) {\n    this._eventsStrategy.off(eventName, eventHandler);\n\n    return this;\n  }\n});\n\nexports.DataSource = DataSource;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/data/data_source/data_source.js"],"names":["exports","DataSource","_class","_interopRequireDefault","require","_extend","_common","_iterator","_type","_utils","_array_utils","_custom_store","_events_strategy","_errors","_array","_queue","_deferred","_operation_manager","_utils2","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","default","inherit","ctor","options","_options$reshapeOnPus","_this","normalizeDataSourceOptions","_eventsStrategy","EventsStrategy","syncStrategy","_store","store","_changedTime","needThrottling","pushAggregationTimeout","throttlingTimeout","pushDeferred","lastPushWaiters","throttlingPushHandler","throttleChanges","changes","resolve","storePushPending","when","apply","done","_onPush","_onPushHandler","args","_aggregationTimeoutId","Deferred","waitFor","push","promise","on","_storeLoadOptions","_extractLoadOptions","_mapFunc","map","_postProcessFunc","postProcess","_pageIndex","pageIndex","_pageSize","pageSize","_loadingCount","_loadQueue","_createLoadQueue","_searchValue","searchValue","_searchOperation","searchOperation","_searchExpr","searchExpr","_paginate","paginate","_reshapeOnPush","reshapeOnPush","each","_","optionName","substr","toLowerCase","_operationManager","_init","_items","_userData","_totalCount","_isLoaded","isDefined","group","_isLastPage","dispose","_this$_delayedLoadTas","off","clearTimeout","_delayedLoadTask","abort","cancelAll","_disposed","result","names","customNames","_customLoadOptions","concat","loadOptions","items","newIndex","isNumeric","value","isBoolean","isLastPage","generateStoreLoadOptionAccessor","_this2","normalizedArgs","normalizeStoreLoadOptionAccessorArguments","sort","_len","arguments","_key","filter","newFilter","_len2","_key2","select","_len3","_key3","requireTotalCount","op","isString","expr","argc","key","_this$_store","totalCount","isLoaded","isLoading","beginLoading","_changeLoadingCount","endLoading","create","increment","oldLoading","newLoading","fireEvent","_scheduleLoadCallbacks","deferred","_this3","always","_scheduleFailCallbacks","_this4","fail","_len4","_key4","CANCELED_TOKEN","_fireChanged","date","Date","_scheduleChangedCallbacks","_this5","loadSingle","propName","propValue","_this6","d","_createStoreLoadOptions","handleDone","data","isEmpty","reject","errors","Error","_applyMapFunction","skip","refresh","searchString","shouldForceByKey","_byKeyViaLoad","byKey","take","load","_this7","loadTask","isPending","_loadFromStore","loadOperation","_createLoadOperation","add","delay","executeAsync","operationId","_this8","groupLevel","dataSourceChanges","item","type","forEach","applyBatch","keyInfo","groupCount","useInsertIndex","_this9","storeLoadOptions","remove","reload","clearRawDataCache","cancel","_addSearchOptions","_useDefaultSearch","_addSearchFilter","extend","userData","selector","searchFilter","pendingDeferred","_this10","handleSuccess","extra","loadResult","normalizeLoadResult","_processStoreLoadResult","_this11","resolvePendingDeferred","isFinite","proceedLoadingTotalCount","count","_applyPostProcessFunction","isPlainObject","mapDataRespectingGrouping","eventName","eventHandler"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (data/data_source/data_source.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.DataSource = void 0;\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _utils = _interopRequireDefault(require(\"../utils\"));\r\nvar _array_utils = require(\"../array_utils\");\r\nvar _custom_store = _interopRequireDefault(require(\"../custom_store\"));\r\nvar _events_strategy = require(\"../../core/events_strategy\");\r\nvar _errors = _interopRequireDefault(require(\"../errors\"));\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _queue = require(\"../../core/utils/queue\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _operation_manager = _interopRequireDefault(require(\"./operation_manager\"));\r\nvar _utils2 = require(\"./utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && null != iter[Symbol.iterator] || null != iter[\"@@iterator\"]) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\nvar DataSource = _class.default.inherit({\r\n    ctor: function(options) {\r\n        var _options$reshapeOnPus, _this = this;\r\n        options = (0, _utils2.normalizeDataSourceOptions)(options);\r\n        this._eventsStrategy = new _events_strategy.EventsStrategy(this, {\r\n            syncStrategy: true\r\n        });\r\n        this._store = options.store;\r\n        this._changedTime = 0;\r\n        var needThrottling = 0 !== options.pushAggregationTimeout;\r\n        if (needThrottling) {\r\n            var throttlingTimeout = void 0 === options.pushAggregationTimeout ? function() {\r\n                return 5 * _this._changedTime\r\n            } : options.pushAggregationTimeout;\r\n            var pushDeferred;\r\n            var lastPushWaiters;\r\n            var throttlingPushHandler = _utils.default.throttleChanges(function(changes) {\r\n                pushDeferred.resolve();\r\n                var storePushPending = _deferred.when.apply(void 0, _toConsumableArray(lastPushWaiters));\r\n                storePushPending.done(function() {\r\n                    return _this._onPush(changes)\r\n                });\r\n                lastPushWaiters = void 0;\r\n                pushDeferred = void 0\r\n            }, throttlingTimeout);\r\n            this._onPushHandler = function(args) {\r\n                _this._aggregationTimeoutId = throttlingPushHandler(args.changes);\r\n                if (!pushDeferred) {\r\n                    pushDeferred = new _deferred.Deferred\r\n                }\r\n                lastPushWaiters = args.waitFor;\r\n                args.waitFor.push(pushDeferred.promise())\r\n            };\r\n            this._store.on(\"beforePush\", this._onPushHandler)\r\n        } else {\r\n            this._onPushHandler = function(changes) {\r\n                return _this._onPush(changes)\r\n            };\r\n            this._store.on(\"push\", this._onPushHandler)\r\n        }\r\n        this._storeLoadOptions = this._extractLoadOptions(options);\r\n        this._mapFunc = options.map;\r\n        this._postProcessFunc = options.postProcess;\r\n        this._pageIndex = void 0 !== options.pageIndex ? options.pageIndex : 0;\r\n        this._pageSize = void 0 !== options.pageSize ? options.pageSize : 20;\r\n        this._loadingCount = 0;\r\n        this._loadQueue = this._createLoadQueue();\r\n        this._searchValue = \"searchValue\" in options ? options.searchValue : null;\r\n        this._searchOperation = options.searchOperation || \"contains\";\r\n        this._searchExpr = options.searchExpr;\r\n        this._paginate = options.paginate;\r\n        this._reshapeOnPush = null !== (_options$reshapeOnPus = options.reshapeOnPush) && void 0 !== _options$reshapeOnPus ? _options$reshapeOnPus : false;\r\n        (0, _iterator.each)([\"onChanged\", \"onLoadError\", \"onLoadingChanged\", \"onCustomizeLoadResult\", \"onCustomizeStoreLoadOptions\"], function(_, optionName) {\r\n            if (optionName in options) {\r\n                _this.on(optionName.substr(2, 1).toLowerCase() + optionName.substr(3), options[optionName])\r\n            }\r\n        });\r\n        this._operationManager = new _operation_manager.default;\r\n        this._init()\r\n    },\r\n    _init: function() {\r\n        this._items = [];\r\n        this._userData = {};\r\n        this._totalCount = -1;\r\n        this._isLoaded = false;\r\n        if (!(0, _type.isDefined)(this._paginate)) {\r\n            this._paginate = !this.group()\r\n        }\r\n        this._isLastPage = !this._paginate\r\n    },\r\n    dispose: function() {\r\n        var _this$_delayedLoadTas;\r\n        this._store.off(\"beforePush\", this._onPushHandler);\r\n        this._store.off(\"push\", this._onPushHandler);\r\n        this._eventsStrategy.dispose();\r\n        clearTimeout(this._aggregationTimeoutId);\r\n        delete this._store;\r\n        null === (_this$_delayedLoadTas = this._delayedLoadTask) || void 0 === _this$_delayedLoadTas ? void 0 : _this$_delayedLoadTas.abort();\r\n        this._operationManager.cancelAll();\r\n        this._disposed = true\r\n    },\r\n    _extractLoadOptions: function(options) {\r\n        var result = {};\r\n        var names = [\"sort\", \"filter\", \"select\", \"group\", \"requireTotalCount\"];\r\n        var customNames = this._store._customLoadOptions();\r\n        if (customNames) {\r\n            names = names.concat(customNames)\r\n        }(0, _iterator.each)(names, function() {\r\n            result[this] = options[this]\r\n        });\r\n        return result\r\n    },\r\n    loadOptions: function() {\r\n        return this._storeLoadOptions\r\n    },\r\n    items: function() {\r\n        return this._items\r\n    },\r\n    pageIndex: function(newIndex) {\r\n        if (!(0, _type.isNumeric)(newIndex)) {\r\n            return this._pageIndex\r\n        }\r\n        this._pageIndex = newIndex;\r\n        this._isLastPage = !this._paginate\r\n    },\r\n    paginate: function(value) {\r\n        if (!(0, _type.isBoolean)(value)) {\r\n            return this._paginate\r\n        }\r\n        if (this._paginate !== value) {\r\n            this._paginate = value;\r\n            this.pageIndex(0)\r\n        }\r\n    },\r\n    pageSize: function(value) {\r\n        if (!(0, _type.isNumeric)(value)) {\r\n            return this._pageSize\r\n        }\r\n        this._pageSize = value\r\n    },\r\n    isLastPage: function() {\r\n        return this._isLastPage\r\n    },\r\n    generateStoreLoadOptionAccessor: function(optionName) {\r\n        var _this2 = this;\r\n        return function(args) {\r\n            var normalizedArgs = (0, _utils2.normalizeStoreLoadOptionAccessorArguments)(args);\r\n            if (void 0 === normalizedArgs) {\r\n                return _this2._storeLoadOptions[optionName]\r\n            }\r\n            _this2._storeLoadOptions[optionName] = normalizedArgs\r\n        }\r\n    },\r\n    sort: function() {\r\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n            args[_key] = arguments[_key]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"sort\")(args)\r\n    },\r\n    filter: function() {\r\n        var newFilter = (0, _utils2.normalizeStoreLoadOptionAccessorArguments)(arguments);\r\n        if (void 0 === newFilter) {\r\n            return this._storeLoadOptions.filter\r\n        }\r\n        this._storeLoadOptions.filter = newFilter;\r\n        this.pageIndex(0)\r\n    },\r\n    group: function() {\r\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n            args[_key2] = arguments[_key2]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"group\")(args)\r\n    },\r\n    select: function() {\r\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n            args[_key3] = arguments[_key3]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"select\")(args)\r\n    },\r\n    requireTotalCount: function(value) {\r\n        if (!(0, _type.isBoolean)(value)) {\r\n            return this._storeLoadOptions.requireTotalCount\r\n        }\r\n        this._storeLoadOptions.requireTotalCount = value\r\n    },\r\n    searchValue: function(value) {\r\n        if (arguments.length < 1) {\r\n            return this._searchValue\r\n        }\r\n        this._searchValue = value;\r\n        this.pageIndex(0)\r\n    },\r\n    searchOperation: function(op) {\r\n        if (!(0, _type.isString)(op)) {\r\n            return this._searchOperation\r\n        }\r\n        this._searchOperation = op;\r\n        this.pageIndex(0)\r\n    },\r\n    searchExpr: function(expr) {\r\n        var argc = arguments.length;\r\n        if (0 === argc) {\r\n            return this._searchExpr\r\n        }\r\n        if (argc > 1) {\r\n            expr = [].slice.call(arguments)\r\n        }\r\n        this._searchExpr = expr;\r\n        this.pageIndex(0)\r\n    },\r\n    store: function() {\r\n        return this._store\r\n    },\r\n    key: function() {\r\n        var _this$_store;\r\n        return null === (_this$_store = this._store) || void 0 === _this$_store ? void 0 : _this$_store.key()\r\n    },\r\n    totalCount: function() {\r\n        return this._totalCount\r\n    },\r\n    isLoaded: function() {\r\n        return this._isLoaded\r\n    },\r\n    isLoading: function() {\r\n        return this._loadingCount > 0\r\n    },\r\n    beginLoading: function() {\r\n        this._changeLoadingCount(1)\r\n    },\r\n    endLoading: function() {\r\n        this._changeLoadingCount(-1)\r\n    },\r\n    _createLoadQueue: function() {\r\n        return (0, _queue.create)()\r\n    },\r\n    _changeLoadingCount: function(increment) {\r\n        var oldLoading = this.isLoading();\r\n        this._loadingCount += increment;\r\n        var newLoading = this.isLoading();\r\n        if (oldLoading ^ newLoading) {\r\n            this._eventsStrategy.fireEvent(\"loadingChanged\", [newLoading])\r\n        }\r\n    },\r\n    _scheduleLoadCallbacks: function(deferred) {\r\n        var _this3 = this;\r\n        this.beginLoading();\r\n        deferred.always(function() {\r\n            _this3.endLoading()\r\n        })\r\n    },\r\n    _scheduleFailCallbacks: function(deferred) {\r\n        var _this4 = this;\r\n        deferred.fail(function() {\r\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\r\n                args[_key4] = arguments[_key4]\r\n            }\r\n            if (args[0] === _utils2.CANCELED_TOKEN) {\r\n                return\r\n            }\r\n            _this4._eventsStrategy.fireEvent(\"loadError\", args)\r\n        })\r\n    },\r\n    _fireChanged: function(args) {\r\n        var date = new Date;\r\n        this._eventsStrategy.fireEvent(\"changed\", args);\r\n        this._changedTime = new Date - date\r\n    },\r\n    _scheduleChangedCallbacks: function(deferred) {\r\n        var _this5 = this;\r\n        deferred.done(function() {\r\n            return _this5._fireChanged()\r\n        })\r\n    },\r\n    loadSingle: function(propName, propValue) {\r\n        var _this6 = this;\r\n        var d = new _deferred.Deferred;\r\n        var key = this.key();\r\n        var store = this._store;\r\n        var options = this._createStoreLoadOptions();\r\n        var handleDone = function(data) {\r\n            if (!(0, _type.isDefined)(data) || (0, _array.isEmpty)(data)) {\r\n                d.reject(new _errors.default.errors.Error(\"E4009\"))\r\n            } else {\r\n                if (!Array.isArray(data)) {\r\n                    data = [data]\r\n                }\r\n                d.resolve(_this6._applyMapFunction(data)[0])\r\n            }\r\n        };\r\n        this._scheduleFailCallbacks(d);\r\n        if (arguments.length < 2) {\r\n            propValue = propName;\r\n            propName = key\r\n        }\r\n        delete options.skip;\r\n        delete options.group;\r\n        delete options.refresh;\r\n        delete options.pageIndex;\r\n        delete options.searchString;\r\n        var shouldForceByKey = function() {\r\n            return store instanceof _custom_store.default && !store._byKeyViaLoad()\r\n        };\r\n        (function() {\r\n            if (propName === key || shouldForceByKey()) {\r\n                return store.byKey(propValue, options)\r\n            }\r\n            options.take = 1;\r\n            options.filter = options.filter ? [options.filter, [propName, propValue]] : [propName, propValue];\r\n            return store.load(options)\r\n        })().fail(d.reject).done(handleDone);\r\n        return d.promise()\r\n    },\r\n    load: function() {\r\n        var _this7 = this;\r\n        var d = new _deferred.Deferred;\r\n        var loadTask = function() {\r\n            if (_this7._disposed) {\r\n                return\r\n            }\r\n            if (!(0, _utils2.isPending)(d)) {\r\n                return\r\n            }\r\n            return _this7._loadFromStore(loadOperation, d)\r\n        };\r\n        this._scheduleLoadCallbacks(d);\r\n        this._scheduleFailCallbacks(d);\r\n        this._scheduleChangedCallbacks(d);\r\n        var loadOperation = this._createLoadOperation(d);\r\n        this._eventsStrategy.fireEvent(\"customizeStoreLoadOptions\", [loadOperation]);\r\n        this._loadQueue.add(function() {\r\n            if (\"number\" === typeof loadOperation.delay) {\r\n                _this7._delayedLoadTask = (0, _common.executeAsync)(loadTask, loadOperation.delay)\r\n            } else {\r\n                loadTask()\r\n            }\r\n            return d.promise()\r\n        });\r\n        return d.promise({\r\n            operationId: loadOperation.operationId\r\n        })\r\n    },\r\n    _onPush: function(changes) {\r\n        var _this8 = this;\r\n        if (this._reshapeOnPush) {\r\n            this.load()\r\n        } else {\r\n            this._eventsStrategy.fireEvent(\"changing\", [{\r\n                changes: changes\r\n            }]);\r\n            var group = this.group();\r\n            var items = this.items();\r\n            var groupLevel = 0;\r\n            var dataSourceChanges = this.paginate() || group ? changes.filter(function(item) {\r\n                return \"update\" === item.type\r\n            }) : changes;\r\n            if (group) {\r\n                groupLevel = Array.isArray(group) ? group.length : 1\r\n            }\r\n            if (this._mapFunc) {\r\n                dataSourceChanges.forEach(function(item) {\r\n                    if (\"insert\" === item.type) {\r\n                        item.data = _this8._mapFunc(item.data)\r\n                    }\r\n                })\r\n            }(0, _array_utils.applyBatch)({\r\n                keyInfo: this.store(),\r\n                data: items,\r\n                changes: dataSourceChanges,\r\n                groupCount: groupLevel,\r\n                useInsertIndex: true\r\n            });\r\n            this._fireChanged([{\r\n                changes: changes\r\n            }])\r\n        }\r\n    },\r\n    _createLoadOperation: function(deferred) {\r\n        var _this9 = this;\r\n        var operationId = this._operationManager.add(deferred);\r\n        var storeLoadOptions = this._createStoreLoadOptions();\r\n        deferred.always(function() {\r\n            return _this9._operationManager.remove(operationId)\r\n        });\r\n        return {\r\n            operationId: operationId,\r\n            storeLoadOptions: storeLoadOptions\r\n        }\r\n    },\r\n    reload: function() {\r\n        var store = this.store();\r\n        if (store instanceof _custom_store.default) {\r\n            store.clearRawDataCache()\r\n        }\r\n        this._init();\r\n        return this.load()\r\n    },\r\n    cancel: function(operationId) {\r\n        return this._operationManager.cancel(operationId)\r\n    },\r\n    cancelAll: function() {\r\n        return this._operationManager.cancelAll()\r\n    },\r\n    _addSearchOptions: function(storeLoadOptions) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        if (this.store()._useDefaultSearch) {\r\n            this._addSearchFilter(storeLoadOptions)\r\n        } else {\r\n            storeLoadOptions.searchOperation = this._searchOperation;\r\n            storeLoadOptions.searchValue = this._searchValue;\r\n            storeLoadOptions.searchExpr = this._searchExpr\r\n        }\r\n    },\r\n    _createStoreLoadOptions: function() {\r\n        var result = (0, _extend.extend)({}, this._storeLoadOptions);\r\n        this._addSearchOptions(result);\r\n        if (this._paginate) {\r\n            if (this._pageSize) {\r\n                result.skip = this._pageIndex * this._pageSize;\r\n                result.take = this._pageSize\r\n            }\r\n        }\r\n        result.userData = this._userData;\r\n        return result\r\n    },\r\n    _addSearchFilter: function(storeLoadOptions) {\r\n        var value = this._searchValue;\r\n        var op = this._searchOperation;\r\n        var selector = this._searchExpr;\r\n        var searchFilter = [];\r\n        if (!value) {\r\n            return\r\n        }\r\n        if (!selector) {\r\n            selector = \"this\"\r\n        }\r\n        if (!Array.isArray(selector)) {\r\n            selector = [selector]\r\n        }(0, _iterator.each)(selector, function(i, item) {\r\n            if (searchFilter.length) {\r\n                searchFilter.push(\"or\")\r\n            }\r\n            searchFilter.push([item, op, value])\r\n        });\r\n        if (storeLoadOptions.filter) {\r\n            storeLoadOptions.filter = [searchFilter, storeLoadOptions.filter]\r\n        } else {\r\n            storeLoadOptions.filter = searchFilter\r\n        }\r\n    },\r\n    _loadFromStore: function(loadOptions, pendingDeferred) {\r\n        var _this10 = this;\r\n        var handleSuccess = function(data, extra) {\r\n            if (_this10._disposed) {\r\n                return\r\n            }\r\n            if (!(0, _utils2.isPending)(pendingDeferred)) {\r\n                return\r\n            }\r\n            var loadResult = (0, _extend.extend)((0, _utils2.normalizeLoadResult)(data, extra), loadOptions);\r\n            _this10._eventsStrategy.fireEvent(\"customizeLoadResult\", [loadResult]);\r\n            (0, _deferred.when)(loadResult.data).done(function(data) {\r\n                loadResult.data = data;\r\n                _this10._processStoreLoadResult(loadResult, pendingDeferred)\r\n            }).fail(pendingDeferred.reject)\r\n        };\r\n        if (loadOptions.data) {\r\n            return (new _deferred.Deferred).resolve(loadOptions.data).done(handleSuccess)\r\n        }\r\n        return this.store().load(loadOptions.storeLoadOptions).done(handleSuccess).fail(pendingDeferred.reject)\r\n    },\r\n    _processStoreLoadResult: function(loadResult, pendingDeferred) {\r\n        var _this11 = this;\r\n        var data = loadResult.data;\r\n        var extra = loadResult.extra;\r\n        var storeLoadOptions = loadResult.storeLoadOptions;\r\n        var resolvePendingDeferred = function() {\r\n            _this11._isLoaded = true;\r\n            _this11._totalCount = isFinite(extra.totalCount) ? extra.totalCount : -1;\r\n            return pendingDeferred.resolve(data, extra)\r\n        };\r\n        var proceedLoadingTotalCount = function() {\r\n            _this11.store().totalCount(storeLoadOptions).done(function(count) {\r\n                extra.totalCount = count;\r\n                resolvePendingDeferred()\r\n            }).fail(pendingDeferred.reject)\r\n        };\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        data = this._applyPostProcessFunction(this._applyMapFunction(data));\r\n        if (!(0, _type.isPlainObject)(extra)) {\r\n            extra = {}\r\n        }\r\n        this._items = data;\r\n        if (!data.length || !this._paginate || this._pageSize && data.length < this._pageSize) {\r\n            this._isLastPage = true\r\n        }\r\n        if (storeLoadOptions.requireTotalCount && !isFinite(extra.totalCount)) {\r\n            proceedLoadingTotalCount()\r\n        } else {\r\n            resolvePendingDeferred()\r\n        }\r\n    },\r\n    _applyMapFunction: function(data) {\r\n        if (this._mapFunc) {\r\n            return (0, _utils2.mapDataRespectingGrouping)(data, this._mapFunc, this.group())\r\n        }\r\n        return data\r\n    },\r\n    _applyPostProcessFunction: function(data) {\r\n        if (this._postProcessFunc) {\r\n            return this._postProcessFunc(data)\r\n        }\r\n        return data\r\n    },\r\n    on: function(eventName, eventHandler) {\r\n        this._eventsStrategy.on(eventName, eventHandler);\r\n        return this\r\n    },\r\n    off: function(eventName, eventHandler) {\r\n        this._eventsStrategy.off(eventName, eventHandler);\r\n        return this\r\n    }\r\n});\r\nexports.DataSource = DataSource;\r\n"]},"metadata":{},"sourceType":"script"}