{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space_vertical.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../../core/renderer\"));\n\nvar _iterator = require(\"../../../core/utils/iterator\");\n\nvar _uiSchedulerWork_space = _interopRequireDefault(require(\"./ui.scheduler.work_space.indicator\"));\n\nvar _date = _interopRequireDefault(require(\"../../../localization/date\"));\n\nvar _utils = _interopRequireDefault(require(\"../utils.timeZone\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar SchedulerWorkspaceVertical = function (_SchedulerWorkSpaceIn) {\n  _inheritsLoose(SchedulerWorkspaceVertical, _SchedulerWorkSpaceIn);\n\n  function SchedulerWorkspaceVertical() {\n    return _SchedulerWorkSpaceIn.apply(this, arguments) || this;\n  }\n\n  var _proto = SchedulerWorkspaceVertical.prototype;\n\n  _proto._getCellsBetween = function ($first, $last) {\n    if (this._hasAllDayClass($last)) {\n      return _SchedulerWorkSpaceIn.prototype._getCellsBetween.call(this, $first, $last);\n    }\n\n    var $cells = this._getCells();\n\n    var firstColumn = $first.index();\n    var firstRow = $first.parent().index();\n    var lastColumn = $last.index();\n    var lastRow = $last.parent().index();\n\n    var groupCount = this._getGroupCount();\n\n    var cellCount = groupCount > 0 ? this._getTotalCellCount(groupCount) : this._getCellCount();\n\n    var rowCount = this._getTotalRowCount(groupCount);\n\n    var result = [];\n\n    for (var i = 0; i < cellCount; i++) {\n      for (var j = 0; j < rowCount; j++) {\n        var cell = $cells.get(cellCount * j + i);\n        result.push(cell);\n      }\n    }\n\n    var lastCellGroup = this.getCellData($last).groups;\n    var indexesDifference = this.option(\"showAllDayPanel\") && this._isVerticalGroupedWorkSpace() ? this._getGroupIndexByResourceId(lastCellGroup) + 1 : 0;\n    var newFirstIndex = rowCount * firstColumn + firstRow - indexesDifference;\n    var newLastIndex = rowCount * lastColumn + lastRow - indexesDifference;\n\n    if (newFirstIndex > newLastIndex) {\n      var buffer = newFirstIndex;\n      newFirstIndex = newLastIndex;\n      newLastIndex = buffer;\n    }\n\n    $cells = (0, _renderer.default)(result).slice(newFirstIndex, newLastIndex + 1);\n\n    if (this._getGroupCount()) {\n      var arr = [];\n\n      var focusedGroupIndex = this._getGroupIndexByCell($first);\n\n      (0, _iterator.each)($cells, function (_, cell) {\n        var groupIndex = this._getGroupIndexByCell((0, _renderer.default)(cell));\n\n        if (focusedGroupIndex === groupIndex) {\n          arr.push(cell);\n        }\n      }.bind(this));\n      $cells = (0, _renderer.default)(arr);\n    }\n\n    return $cells;\n  };\n\n  _proto._getCellFromNextColumn = function (direction, isMultiSelection) {\n    var $nextCell = _SchedulerWorkSpaceIn.prototype._getCellFromNextColumn.call(this, direction, isMultiSelection);\n\n    var $focusedCell = this._$focusedCell;\n\n    if ($focusedCell.parent().index() !== $nextCell.parent().index() && isMultiSelection) {\n      $nextCell = $focusedCell;\n    }\n\n    return $nextCell;\n  };\n\n  _proto._getFormat = function () {\n    return this._formatWeekdayAndDay;\n  };\n\n  _proto.renovatedRenderSupported = function () {\n    return true;\n  };\n\n  _proto.generateRenderOptions = function () {\n    var _this = this;\n\n    var startViewDate = _utils.default.getDateWithoutTimezoneChange(this.getStartViewDate());\n\n    var _getTimeText = function (row, column) {\n      var index = row % _this._getRowCount();\n\n      if (index % 2 === 0 && 0 === column) {\n        return _date.default.format(_this._getTimeCellDateCore(startViewDate, row), \"shorttime\");\n      }\n\n      return \"\";\n    };\n\n    var options = _SchedulerWorkSpaceIn.prototype.generateRenderOptions.call(this);\n\n    options.cellDataGetters.push(function (_, rowIndex, cellIndex) {\n      return {\n        value: {\n          text: _getTimeText(rowIndex, cellIndex)\n        }\n      };\n    });\n    return options;\n  };\n\n  return SchedulerWorkspaceVertical;\n}(_uiSchedulerWork_space.default);\n\nvar _default = SchedulerWorkspaceVertical;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/scheduler/workspaces/ui.scheduler.work_space_vertical.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_iterator","_uiSchedulerWork_space","_date","_utils","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","SchedulerWorkspaceVertical","_SchedulerWorkSpaceIn","apply","arguments","_proto","_getCellsBetween","$first","$last","_hasAllDayClass","call","$cells","_getCells","firstColumn","index","firstRow","parent","lastColumn","lastRow","groupCount","_getGroupCount","cellCount","_getTotalCellCount","_getCellCount","rowCount","_getTotalRowCount","result","i","j","cell","get","push","lastCellGroup","getCellData","groups","indexesDifference","option","_isVerticalGroupedWorkSpace","_getGroupIndexByResourceId","newFirstIndex","newLastIndex","buffer","slice","arr","focusedGroupIndex","_getGroupIndexByCell","each","_","groupIndex","bind","_getCellFromNextColumn","direction","isMultiSelection","$nextCell","$focusedCell","_$focusedCell","_getFormat","_formatWeekdayAndDay","renovatedRenderSupported","generateRenderOptions","_this","startViewDate","getDateWithoutTimezoneChange","getStartViewDate","_getTimeText","row","column","_getRowCount","format","_getTimeCellDateCore","options","cellDataGetters","rowIndex","cellIndex","value","text","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/workspaces/ui.scheduler.work_space_vertical.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../../core/renderer\"));\r\nvar _iterator = require(\"../../../core/utils/iterator\");\r\nvar _uiSchedulerWork_space = _interopRequireDefault(require(\"./ui.scheduler.work_space.indicator\"));\r\nvar _date = _interopRequireDefault(require(\"../../../localization/date\"));\r\nvar _utils = _interopRequireDefault(require(\"../utils.timeZone\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar SchedulerWorkspaceVertical = function(_SchedulerWorkSpaceIn) {\r\n    _inheritsLoose(SchedulerWorkspaceVertical, _SchedulerWorkSpaceIn);\r\n\r\n    function SchedulerWorkspaceVertical() {\r\n        return _SchedulerWorkSpaceIn.apply(this, arguments) || this\r\n    }\r\n    var _proto = SchedulerWorkspaceVertical.prototype;\r\n    _proto._getCellsBetween = function($first, $last) {\r\n        if (this._hasAllDayClass($last)) {\r\n            return _SchedulerWorkSpaceIn.prototype._getCellsBetween.call(this, $first, $last)\r\n        }\r\n        var $cells = this._getCells();\r\n        var firstColumn = $first.index();\r\n        var firstRow = $first.parent().index();\r\n        var lastColumn = $last.index();\r\n        var lastRow = $last.parent().index();\r\n        var groupCount = this._getGroupCount();\r\n        var cellCount = groupCount > 0 ? this._getTotalCellCount(groupCount) : this._getCellCount();\r\n        var rowCount = this._getTotalRowCount(groupCount);\r\n        var result = [];\r\n        for (var i = 0; i < cellCount; i++) {\r\n            for (var j = 0; j < rowCount; j++) {\r\n                var cell = $cells.get(cellCount * j + i);\r\n                result.push(cell)\r\n            }\r\n        }\r\n        var lastCellGroup = this.getCellData($last).groups;\r\n        var indexesDifference = this.option(\"showAllDayPanel\") && this._isVerticalGroupedWorkSpace() ? this._getGroupIndexByResourceId(lastCellGroup) + 1 : 0;\r\n        var newFirstIndex = rowCount * firstColumn + firstRow - indexesDifference;\r\n        var newLastIndex = rowCount * lastColumn + lastRow - indexesDifference;\r\n        if (newFirstIndex > newLastIndex) {\r\n            var buffer = newFirstIndex;\r\n            newFirstIndex = newLastIndex;\r\n            newLastIndex = buffer\r\n        }\r\n        $cells = (0, _renderer.default)(result).slice(newFirstIndex, newLastIndex + 1);\r\n        if (this._getGroupCount()) {\r\n            var arr = [];\r\n            var focusedGroupIndex = this._getGroupIndexByCell($first);\r\n            (0, _iterator.each)($cells, function(_, cell) {\r\n                var groupIndex = this._getGroupIndexByCell((0, _renderer.default)(cell));\r\n                if (focusedGroupIndex === groupIndex) {\r\n                    arr.push(cell)\r\n                }\r\n            }.bind(this));\r\n            $cells = (0, _renderer.default)(arr)\r\n        }\r\n        return $cells\r\n    };\r\n    _proto._getCellFromNextColumn = function(direction, isMultiSelection) {\r\n        var $nextCell = _SchedulerWorkSpaceIn.prototype._getCellFromNextColumn.call(this, direction, isMultiSelection);\r\n        var $focusedCell = this._$focusedCell;\r\n        if ($focusedCell.parent().index() !== $nextCell.parent().index() && isMultiSelection) {\r\n            $nextCell = $focusedCell\r\n        }\r\n        return $nextCell\r\n    };\r\n    _proto._getFormat = function() {\r\n        return this._formatWeekdayAndDay\r\n    };\r\n    _proto.renovatedRenderSupported = function() {\r\n        return true\r\n    };\r\n    _proto.generateRenderOptions = function() {\r\n        var _this = this;\r\n        var startViewDate = _utils.default.getDateWithoutTimezoneChange(this.getStartViewDate());\r\n        var _getTimeText = function(row, column) {\r\n            var index = row % _this._getRowCount();\r\n            if (index % 2 === 0 && 0 === column) {\r\n                return _date.default.format(_this._getTimeCellDateCore(startViewDate, row), \"shorttime\")\r\n            }\r\n            return \"\"\r\n        };\r\n        var options = _SchedulerWorkSpaceIn.prototype.generateRenderOptions.call(this);\r\n        options.cellDataGetters.push(function(_, rowIndex, cellIndex) {\r\n            return {\r\n                value: {\r\n                    text: _getTimeText(rowIndex, cellIndex)\r\n                }\r\n            }\r\n        });\r\n        return options\r\n    };\r\n    return SchedulerWorkspaceVertical\r\n}(_uiSchedulerWork_space.default);\r\nvar _default = SchedulerWorkspaceVertical;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}