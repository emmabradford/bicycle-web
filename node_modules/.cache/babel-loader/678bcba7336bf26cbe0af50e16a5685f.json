{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/tooltip_strategies/tooltipStrategyBase.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.TooltipStrategyBase = void 0;\n\nvar _button = _interopRequireDefault(require(\"../../button\"));\n\nvar _function_template = require(\"../../../core/templates/function_template\");\n\nvar _renderer = _interopRequireDefault(require(\"../../../core/renderer\"));\n\nvar _uiList = _interopRequireDefault(require(\"../../list/ui.list.edit\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar TOOLTIP_APPOINTMENT_ITEM = \"dx-tooltip-appointment-item\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT = TOOLTIP_APPOINTMENT_ITEM + \"-content\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT = TOOLTIP_APPOINTMENT_ITEM + \"-content-subject\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE = TOOLTIP_APPOINTMENT_ITEM + \"-content-date\";\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER = TOOLTIP_APPOINTMENT_ITEM + \"-marker\";\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY = TOOLTIP_APPOINTMENT_ITEM + \"-marker-body\";\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button-container\";\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button\";\n\nvar TooltipStrategyBase = function () {\n  function TooltipStrategyBase(options) {\n    this._tooltip = null;\n    this._options = options;\n    this._extraOptions = null;\n  }\n\n  var _proto = TooltipStrategyBase.prototype;\n\n  _proto.show = function (target, dataList, extraOptions) {\n    if (this._canShowTooltip(dataList)) {\n      this.hide();\n      this._extraOptions = extraOptions;\n\n      this._showCore(target, dataList);\n    }\n  };\n\n  _proto._showCore = function (target, dataList) {\n    if (!this._tooltip) {\n      this._tooltip = this._createTooltip(target, dataList);\n    } else {\n      this._shouldUseTarget() && this._tooltip.option(\"target\", target);\n\n      this._list.option(\"dataSource\", dataList);\n    }\n\n    this._prepareBeforeVisibleChanged(dataList);\n\n    this._tooltip.option(\"visible\", true);\n  };\n\n  _proto._prepareBeforeVisibleChanged = function (dataList) {};\n\n  _proto._getContentTemplate = function (dataList) {\n    var _this = this;\n\n    return function (container) {\n      var listElement = (0, _renderer.default)(\"<div>\");\n      (0, _renderer.default)(container).append(listElement);\n      _this._list = _this._createList(listElement, dataList);\n    };\n  };\n\n  _proto.isAlreadyShown = function (target) {\n    if (this._tooltip && this._tooltip.option(\"visible\")) {\n      return this._tooltip.option(\"target\")[0] === target[0];\n    }\n  };\n\n  _proto._onShown = function () {\n    this._list.option(\"focusStateEnabled\", this._extraOptions.focusStateEnabled);\n  };\n\n  _proto.dispose = function () {};\n\n  _proto.hide = function () {\n    if (this._tooltip) {\n      this._tooltip.option(\"visible\", false);\n    }\n  };\n\n  _proto._shouldUseTarget = function () {\n    return true;\n  };\n\n  _proto._createTooltip = function () {};\n\n  _proto._canShowTooltip = function (dataList) {\n    if (!dataList.length) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto._createListOption = function (dataList) {\n    var _this2 = this;\n\n    return {\n      dataSource: dataList,\n      onContentReady: this._onListRender.bind(this),\n      onItemClick: function onItemClick(e) {\n        return _this2._onListItemClick(e);\n      },\n      itemTemplate: function itemTemplate(item, index) {\n        return _this2._renderTemplate(item.appointment, item.targetedAppointment, index, item.color);\n      },\n      _swipeEnabled: false\n    };\n  };\n\n  _proto._onListRender = function () {};\n\n  _proto._createTooltipElement = function (wrapperClass) {\n    return (0, _renderer.default)(\"<div>\").appendTo(this._options.container).addClass(wrapperClass);\n  };\n\n  _proto._createList = function (listElement, dataList) {\n    return this._options.createComponent(listElement, _uiList.default, this._createListOption(dataList));\n  };\n\n  _proto._renderTemplate = function (appointment, targetedAppointment, index, color) {\n    var itemListContent = this._createItemListContent(appointment, targetedAppointment, color);\n\n    this._options.addDefaultTemplates(_defineProperty({}, this._getItemListTemplateName(), new _function_template.FunctionTemplate(function (options) {\n      var $container = (0, _renderer.default)(options.container);\n      $container.append(itemListContent);\n      return $container;\n    })));\n\n    var template = this._options.getAppointmentTemplate(this._getItemListTemplateName() + \"Template\");\n\n    return this._createFunctionTemplate(template, appointment, targetedAppointment, index);\n  };\n\n  _proto._createFunctionTemplate = function (template, data, targetData, index) {\n    var isEmptyDropDownAppointmentTemplate = this._isEmptyDropDownAppointmentTemplate();\n\n    return new _function_template.FunctionTemplate(function (options) {\n      return template.render({\n        model: isEmptyDropDownAppointmentTemplate ? {\n          appointmentData: data,\n          targetedAppointmentData: targetData\n        } : data,\n        container: options.container,\n        index: index\n      });\n    });\n  };\n\n  _proto._getItemListTemplateName = function () {\n    return this._isEmptyDropDownAppointmentTemplate() ? \"appointmentTooltip\" : \"dropDownAppointment\";\n  };\n\n  _proto._isEmptyDropDownAppointmentTemplate = function () {\n    return !this._extraOptions.dropDownAppointmentTemplate || \"dropDownAppointment\" === this._extraOptions.dropDownAppointmentTemplate;\n  };\n\n  _proto._onListItemClick = function (e) {\n    this.hide();\n    this._extraOptions.clickEvent && this._extraOptions.clickEvent(e);\n\n    this._options.showAppointmentPopup(e.itemData.appointment, false, e.itemData.targetedAppointment);\n  };\n\n  _proto._createItemListContent = function (appointment, targetedAppointment, color) {\n    var editing = this._extraOptions.editing;\n    var $itemElement = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM);\n    $itemElement.append(this._createItemListMarker(color));\n    $itemElement.append(this._createItemListInfo(this._options.createFormattedDateText(appointment, targetedAppointment)));\n\n    var disabled = this._options.getAppointmentDisabled(appointment);\n\n    if (!disabled && (editing && true === editing.allowDeleting || true === editing)) {\n      $itemElement.append(this._createDeleteButton(appointment, targetedAppointment));\n    }\n\n    return $itemElement;\n  };\n\n  _proto._createItemListMarker = function (color) {\n    var $marker = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER);\n    var $markerBody = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY);\n    $marker.append($markerBody);\n    color && color.done(function (value) {\n      return $markerBody.css(\"background\", value);\n    });\n    return $marker;\n  };\n\n  _proto._createItemListInfo = function (object) {\n    var result = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT);\n    var $title = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT).text(object.text);\n    var $date = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE).text(object.formatDate);\n    return result.append($title).append($date);\n  };\n\n  _proto._createDeleteButton = function (appointment, targetedAppointment) {\n    var _this3 = this;\n\n    var $container = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER);\n    var $deleteButton = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON);\n    $container.append($deleteButton);\n\n    this._options.createComponent($deleteButton, _button.default, {\n      icon: \"trash\",\n      stylingMode: \"text\",\n      onClick: function onClick(e) {\n        _this3.hide();\n\n        e.event.stopPropagation();\n\n        _this3._options.checkAndDeleteAppointment(appointment, targetedAppointment);\n      }\n    });\n\n    return $container;\n  };\n\n  return TooltipStrategyBase;\n}();\n\nexports.TooltipStrategyBase = TooltipStrategyBase;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js"],"names":["exports","TooltipStrategyBase","_button","_interopRequireDefault","require","_function_template","_renderer","_uiList","obj","__esModule","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","TOOLTIP_APPOINTMENT_ITEM","TOOLTIP_APPOINTMENT_ITEM_CONTENT","TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT","TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE","TOOLTIP_APPOINTMENT_ITEM_MARKER","TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY","TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER","TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON","options","_tooltip","_options","_extraOptions","_proto","prototype","show","target","dataList","extraOptions","_canShowTooltip","hide","_showCore","_createTooltip","_shouldUseTarget","option","_list","_prepareBeforeVisibleChanged","_getContentTemplate","_this","container","listElement","default","append","_createList","isAlreadyShown","_onShown","focusStateEnabled","dispose","length","_createListOption","_this2","dataSource","onContentReady","_onListRender","bind","onItemClick","e","_onListItemClick","itemTemplate","item","index","_renderTemplate","appointment","targetedAppointment","color","_swipeEnabled","_createTooltipElement","wrapperClass","appendTo","addClass","createComponent","itemListContent","_createItemListContent","addDefaultTemplates","_getItemListTemplateName","FunctionTemplate","$container","template","getAppointmentTemplate","_createFunctionTemplate","data","targetData","isEmptyDropDownAppointmentTemplate","_isEmptyDropDownAppointmentTemplate","render","model","appointmentData","targetedAppointmentData","dropDownAppointmentTemplate","clickEvent","showAppointmentPopup","itemData","editing","$itemElement","_createItemListMarker","_createItemListInfo","createFormattedDateText","disabled","getAppointmentDisabled","allowDeleting","_createDeleteButton","$marker","$markerBody","done","css","object","result","$title","text","$date","formatDate","_this3","$deleteButton","icon","stylingMode","onClick","event","stopPropagation","checkAndDeleteAppointment"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/tooltip_strategies/tooltipStrategyBase.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.TooltipStrategyBase = void 0;\r\nvar _button = _interopRequireDefault(require(\"../../button\"));\r\nvar _function_template = require(\"../../../core/templates/function_template\");\r\nvar _renderer = _interopRequireDefault(require(\"../../../core/renderer\"));\r\nvar _uiList = _interopRequireDefault(require(\"../../list/ui.list.edit\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        })\r\n    } else {\r\n        obj[key] = value\r\n    }\r\n    return obj\r\n}\r\nvar TOOLTIP_APPOINTMENT_ITEM = \"dx-tooltip-appointment-item\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT = TOOLTIP_APPOINTMENT_ITEM + \"-content\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT = TOOLTIP_APPOINTMENT_ITEM + \"-content-subject\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE = TOOLTIP_APPOINTMENT_ITEM + \"-content-date\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER = TOOLTIP_APPOINTMENT_ITEM + \"-marker\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY = TOOLTIP_APPOINTMENT_ITEM + \"-marker-body\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button-container\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button\";\r\nvar TooltipStrategyBase = function() {\r\n    function TooltipStrategyBase(options) {\r\n        this._tooltip = null;\r\n        this._options = options;\r\n        this._extraOptions = null\r\n    }\r\n    var _proto = TooltipStrategyBase.prototype;\r\n    _proto.show = function(target, dataList, extraOptions) {\r\n        if (this._canShowTooltip(dataList)) {\r\n            this.hide();\r\n            this._extraOptions = extraOptions;\r\n            this._showCore(target, dataList)\r\n        }\r\n    };\r\n    _proto._showCore = function(target, dataList) {\r\n        if (!this._tooltip) {\r\n            this._tooltip = this._createTooltip(target, dataList)\r\n        } else {\r\n            this._shouldUseTarget() && this._tooltip.option(\"target\", target);\r\n            this._list.option(\"dataSource\", dataList)\r\n        }\r\n        this._prepareBeforeVisibleChanged(dataList);\r\n        this._tooltip.option(\"visible\", true)\r\n    };\r\n    _proto._prepareBeforeVisibleChanged = function(dataList) {};\r\n    _proto._getContentTemplate = function(dataList) {\r\n        var _this = this;\r\n        return function(container) {\r\n            var listElement = (0, _renderer.default)(\"<div>\");\r\n            (0, _renderer.default)(container).append(listElement);\r\n            _this._list = _this._createList(listElement, dataList)\r\n        }\r\n    };\r\n    _proto.isAlreadyShown = function(target) {\r\n        if (this._tooltip && this._tooltip.option(\"visible\")) {\r\n            return this._tooltip.option(\"target\")[0] === target[0]\r\n        }\r\n    };\r\n    _proto._onShown = function() {\r\n        this._list.option(\"focusStateEnabled\", this._extraOptions.focusStateEnabled)\r\n    };\r\n    _proto.dispose = function() {};\r\n    _proto.hide = function() {\r\n        if (this._tooltip) {\r\n            this._tooltip.option(\"visible\", false)\r\n        }\r\n    };\r\n    _proto._shouldUseTarget = function() {\r\n        return true\r\n    };\r\n    _proto._createTooltip = function() {};\r\n    _proto._canShowTooltip = function(dataList) {\r\n        if (!dataList.length) {\r\n            return false\r\n        }\r\n        return true\r\n    };\r\n    _proto._createListOption = function(dataList) {\r\n        var _this2 = this;\r\n        return {\r\n            dataSource: dataList,\r\n            onContentReady: this._onListRender.bind(this),\r\n            onItemClick: function(e) {\r\n                return _this2._onListItemClick(e)\r\n            },\r\n            itemTemplate: function(item, index) {\r\n                return _this2._renderTemplate(item.appointment, item.targetedAppointment, index, item.color)\r\n            },\r\n            _swipeEnabled: false\r\n        }\r\n    };\r\n    _proto._onListRender = function() {};\r\n    _proto._createTooltipElement = function(wrapperClass) {\r\n        return (0, _renderer.default)(\"<div>\").appendTo(this._options.container).addClass(wrapperClass)\r\n    };\r\n    _proto._createList = function(listElement, dataList) {\r\n        return this._options.createComponent(listElement, _uiList.default, this._createListOption(dataList))\r\n    };\r\n    _proto._renderTemplate = function(appointment, targetedAppointment, index, color) {\r\n        var itemListContent = this._createItemListContent(appointment, targetedAppointment, color);\r\n        this._options.addDefaultTemplates(_defineProperty({}, this._getItemListTemplateName(), new _function_template.FunctionTemplate(function(options) {\r\n            var $container = (0, _renderer.default)(options.container);\r\n            $container.append(itemListContent);\r\n            return $container\r\n        })));\r\n        var template = this._options.getAppointmentTemplate(this._getItemListTemplateName() + \"Template\");\r\n        return this._createFunctionTemplate(template, appointment, targetedAppointment, index)\r\n    };\r\n    _proto._createFunctionTemplate = function(template, data, targetData, index) {\r\n        var isEmptyDropDownAppointmentTemplate = this._isEmptyDropDownAppointmentTemplate();\r\n        return new _function_template.FunctionTemplate(function(options) {\r\n            return template.render({\r\n                model: isEmptyDropDownAppointmentTemplate ? {\r\n                    appointmentData: data,\r\n                    targetedAppointmentData: targetData\r\n                } : data,\r\n                container: options.container,\r\n                index: index\r\n            })\r\n        })\r\n    };\r\n    _proto._getItemListTemplateName = function() {\r\n        return this._isEmptyDropDownAppointmentTemplate() ? \"appointmentTooltip\" : \"dropDownAppointment\"\r\n    };\r\n    _proto._isEmptyDropDownAppointmentTemplate = function() {\r\n        return !this._extraOptions.dropDownAppointmentTemplate || \"dropDownAppointment\" === this._extraOptions.dropDownAppointmentTemplate\r\n    };\r\n    _proto._onListItemClick = function(e) {\r\n        this.hide();\r\n        this._extraOptions.clickEvent && this._extraOptions.clickEvent(e);\r\n        this._options.showAppointmentPopup(e.itemData.appointment, false, e.itemData.targetedAppointment)\r\n    };\r\n    _proto._createItemListContent = function(appointment, targetedAppointment, color) {\r\n        var editing = this._extraOptions.editing;\r\n        var $itemElement = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM);\r\n        $itemElement.append(this._createItemListMarker(color));\r\n        $itemElement.append(this._createItemListInfo(this._options.createFormattedDateText(appointment, targetedAppointment)));\r\n        var disabled = this._options.getAppointmentDisabled(appointment);\r\n        if (!disabled && (editing && true === editing.allowDeleting || true === editing)) {\r\n            $itemElement.append(this._createDeleteButton(appointment, targetedAppointment))\r\n        }\r\n        return $itemElement\r\n    };\r\n    _proto._createItemListMarker = function(color) {\r\n        var $marker = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER);\r\n        var $markerBody = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY);\r\n        $marker.append($markerBody);\r\n        color && color.done(function(value) {\r\n            return $markerBody.css(\"background\", value)\r\n        });\r\n        return $marker\r\n    };\r\n    _proto._createItemListInfo = function(object) {\r\n        var result = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT);\r\n        var $title = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT).text(object.text);\r\n        var $date = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE).text(object.formatDate);\r\n        return result.append($title).append($date)\r\n    };\r\n    _proto._createDeleteButton = function(appointment, targetedAppointment) {\r\n        var _this3 = this;\r\n        var $container = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER);\r\n        var $deleteButton = (0, _renderer.default)(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON);\r\n        $container.append($deleteButton);\r\n        this._options.createComponent($deleteButton, _button.default, {\r\n            icon: \"trash\",\r\n            stylingMode: \"text\",\r\n            onClick: function(e) {\r\n                _this3.hide();\r\n                e.event.stopPropagation();\r\n                _this3._options.checkAndDeleteAppointment(appointment, targetedAppointment)\r\n            }\r\n        });\r\n        return $container\r\n    };\r\n    return TooltipStrategyBase\r\n}();\r\nexports.TooltipStrategyBase = TooltipStrategyBase;\r\n"]},"metadata":{},"sourceType":"script"}