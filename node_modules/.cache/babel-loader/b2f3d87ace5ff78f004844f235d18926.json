{"ast":null,"code":"/**\r\n * DevExtreme (ui/overlay/ui.overlay.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\n\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _element = require(\"../../core/element\");\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _empty_template = require(\"../../core/templates/empty_template\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _ready_callbacks = _interopRequireDefault(require(\"../../core/utils/ready_callbacks\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _view_port = require(\"../../core/utils/view_port\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _drag = require(\"../../events/drag\");\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _short = require(\"../../events/short\");\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _visibility_change = require(\"../../events/visibility_change\");\n\nvar _hide_callback = require(\"../../mobile/hide_callback\");\n\nvar _resizable = _interopRequireDefault(require(\"../resizable\"));\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _swatch_container = _interopRequireDefault(require(\"../widget/swatch_container\"));\n\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\n\nvar zIndexPool = _interopRequireWildcard(require(\"./z_index\"));\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar ready = _ready_callbacks.default.add;\nvar window = (0, _window.getWindow)();\nvar viewPortChanged = _view_port.changeCallback;\nvar OVERLAY_CLASS = \"dx-overlay\";\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\nvar OVERLAY_MODAL_CLASS = \"dx-overlay-modal\";\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"];\nvar OVERLAY_STACK = [];\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\nvar TAB_KEY = \"tab\";\nvar POSITION_ALIASES = {\n  top: {\n    my: \"top center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"bottom center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"right center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"left center\",\n    at: \"left center\"\n  },\n  center: {\n    my: \"center\",\n    at: \"center\"\n  },\n  \"right bottom\": {\n    my: \"right bottom\",\n    at: \"right bottom\"\n  },\n  \"right top\": {\n    my: \"right top\",\n    at: \"right top\"\n  },\n  \"left bottom\": {\n    my: \"left bottom\",\n    at: \"left bottom\"\n  },\n  \"left top\": {\n    my: \"left top\",\n    at: \"left top\"\n  }\n};\n\nvar realDevice = _devices.default.real();\n\nvar firefoxDesktop = _browser.default.mozilla && \"desktop\" === realDevice.deviceType;\nvar iOS = \"ios\" === realDevice.platform;\nvar hasSafariAddressBar = _browser.default.safari && \"desktop\" !== realDevice.deviceType;\n\nvar forceRepaint = function ($element) {\n  if (firefoxDesktop) {\n    $element.width();\n  }\n};\n\nvar getElement = function (value) {\n  if ((0, _type.isEvent)(value)) {\n    value = value.target;\n  }\n\n  return (0, _renderer.default)(value);\n};\n\nready(function () {\n  _events_engine.default.subscribeGlobal(_dom_adapter.default.getDocument(), _pointer.default.down, function (e) {\n    for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\n      if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\n        return;\n      }\n    }\n  });\n});\n\nvar Overlay = _ui.default.inherit({\n  _supportedKeys: function () {\n    var offsetSize = 5;\n\n    var move = function (top, left, e) {\n      if (!this.option(\"dragEnabled\")) {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      var allowedOffsets = this._allowedOffsets();\n\n      var offset = {\n        top: (0, _math.fitIntoRange)(top, -allowedOffsets.top, allowedOffsets.bottom),\n        left: (0, _math.fitIntoRange)(left, -allowedOffsets.left, allowedOffsets.right)\n      };\n\n      this._changePosition(offset);\n    };\n\n    return (0, _extend.extend)(this.callBase(), {\n      escape: function () {\n        this.hide();\n      },\n      upArrow: move.bind(this, -offsetSize, 0),\n      downArrow: move.bind(this, offsetSize, 0),\n      leftArrow: move.bind(this, 0, -offsetSize),\n      rightArrow: move.bind(this, 0, offsetSize)\n    });\n  },\n  _getDefaultOptions: function () {\n    var _this = this;\n\n    return (0, _extend.extend)(this.callBase(), {\n      activeStateEnabled: false,\n      visible: false,\n      deferRendering: true,\n      shading: true,\n      shadingColor: \"\",\n      position: {\n        my: \"center\",\n        at: \"center\"\n      },\n      width: function () {\n        return .8 * (0, _renderer.default)(window).width();\n      },\n      minWidth: null,\n      maxWidth: null,\n      height: function () {\n        return .8 * (0, _renderer.default)(window).height();\n      },\n      minHeight: null,\n      maxHeight: null,\n      animation: {\n        show: {\n          type: \"pop\",\n          duration: 300,\n          from: {\n            scale: .55\n          }\n        },\n        hide: {\n          type: \"pop\",\n          duration: 300,\n          to: {\n            opacity: 0,\n            scale: .55\n          },\n          from: {\n            opacity: 1,\n            scale: 1\n          }\n        }\n      },\n      closeOnOutsideClick: false,\n      onShowing: null,\n      onShown: null,\n      onHiding: null,\n      onHidden: null,\n      contentTemplate: \"content\",\n      dragEnabled: false,\n      resizeEnabled: false,\n      onResizeStart: null,\n      onResize: null,\n      onResizeEnd: null,\n      innerOverlay: false,\n      target: void 0,\n      container: void 0,\n      hideTopOverlayHandler: function () {\n        _this.hide();\n      },\n      closeOnTargetScroll: false,\n      onPositioned: null,\n      boundaryOffset: {\n        h: 0,\n        v: 0\n      },\n      propagateOutsideClick: false,\n      ignoreChildEvents: true,\n      _checkParentVisibility: true,\n      _fixedPosition: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return !(0, _window.hasWindow)();\n      },\n      options: {\n        width: null,\n        height: null,\n        animation: null,\n        _checkParentVisibility: false\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      animation: true\n    });\n  },\n  _wrapper: function () {\n    return this._$wrapper;\n  },\n  _container: function () {\n    return this._$content;\n  },\n  _eventBindingTarget: function () {\n    return this._$content;\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initActions();\n\n    this._initCloseOnOutsideClickHandler();\n\n    this._initTabTerminatorHandler();\n\n    this._$wrapper = (0, _renderer.default)(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\n    this._$content = (0, _renderer.default)(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\n\n    this._initInnerOverlayClass();\n\n    var $element = this.$element();\n\n    this._$wrapper.addClass($element.attr(\"class\"));\n\n    $element.addClass(OVERLAY_CLASS);\n\n    this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\n\n    _events_engine.default.on(this._$wrapper, \"MSPointerDown\", _common.noop);\n\n    _events_engine.default.on(this._$wrapper, \"focusin\", function (e) {\n      e.stopPropagation();\n    });\n\n    this._toggleViewPortSubscription(true);\n\n    this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"));\n  },\n  _initOptions: function (options) {\n    this._initTarget(options.target);\n\n    var container = void 0 === options.container ? this.option(\"container\") : options.container;\n\n    this._initContainer(container);\n\n    this.callBase(options);\n  },\n  _initInnerOverlayClass: function () {\n    this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"));\n  },\n  _initTarget: function (target) {\n    if (!(0, _type.isDefined)(target)) {\n      return;\n    }\n\n    var options = this.option();\n    (0, _iterator.each)([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], function (_, path) {\n      var pathParts = path.split(\".\");\n      var option = options;\n\n      while (option) {\n        if (1 === pathParts.length) {\n          if ((0, _type.isPlainObject)(option)) {\n            option[pathParts.shift()] = target;\n          }\n\n          break;\n        } else {\n          option = option[pathParts.shift()];\n        }\n      }\n    });\n  },\n  _initContainer: function (container) {\n    container = void 0 === container ? (0, _view_port.value)() : container;\n    var $element = this.$element();\n    var $container = $element.closest(container);\n\n    if (!$container.length) {\n      $container = (0, _renderer.default)(container).first();\n    }\n\n    this._$container = $container.length ? $container : $element.parent();\n  },\n  _initHideTopOverlayHandler: function (handler) {\n    this._hideTopOverlayHandler = handler;\n  },\n  _initActions: function () {\n    var _this2 = this;\n\n    this._actions = {};\n    (0, _iterator.each)(ACTIONS, function (_, action) {\n      _this2._actions[action] = _this2._createActionByOption(action, {\n        excludeValidators: [\"disabled\", \"readOnly\"]\n      }) || _common.noop;\n    });\n  },\n  _initCloseOnOutsideClickHandler: function () {\n    var that = this;\n\n    this._proxiedDocumentDownHandler = function () {\n      return that._documentDownHandler.apply(that, arguments);\n    };\n  },\n  _documentDownHandler: function (e) {\n    if (this._showAnimationProcessing) {\n      this._stopAnimation();\n    }\n\n    var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n    if ((0, _type.isFunction)(closeOnOutsideClick)) {\n      closeOnOutsideClick = closeOnOutsideClick(e);\n    }\n\n    var $container = this._$content;\n    var isAttachedTarget = (0, _renderer.default)(window.document).is(e.target) || (0, _dom.contains)(window.document, e.target);\n    var isInnerOverlay = (0, _renderer.default)(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length;\n    var outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || (0, _dom.contains)($container.get(0), e.target));\n\n    if (outsideClick && closeOnOutsideClick) {\n      this._outsideClickHandler(e);\n    }\n\n    return this.option(\"propagateOutsideClick\");\n  },\n  _outsideClickHandler: function (e) {\n    if (this.option(\"shading\")) {\n      e.preventDefault();\n    }\n\n    this.hide();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initTemplates: function () {\n    this._templateManager.addDefaultTemplates({\n      content: new _empty_template.EmptyTemplate()\n    });\n\n    this.callBase();\n  },\n  _isTopOverlay: function () {\n    var overlayStack = this._overlayStack();\n\n    for (var i = overlayStack.length - 1; i >= 0; i--) {\n      var tabbableElements = overlayStack[i]._findTabbableBounds();\n\n      if (tabbableElements.first || tabbableElements.last) {\n        return overlayStack[i] === this;\n      }\n    }\n\n    return false;\n  },\n  _overlayStack: function () {\n    return OVERLAY_STACK;\n  },\n  _zIndexInitValue: function () {\n    return Overlay.baseZIndex();\n  },\n  _toggleViewPortSubscription: function (toggle) {\n    viewPortChanged.remove(this._viewPortChangeHandle);\n\n    if (toggle) {\n      this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\n      viewPortChanged.add(this._viewPortChangeHandle);\n    }\n  },\n  _viewPortChangeHandler: function () {\n    this._initContainer(this.option(\"container\"));\n\n    this._refresh();\n  },\n  _renderVisibilityAnimate: function (visible) {\n    this._stopAnimation();\n\n    return visible ? this._show() : this._hide();\n  },\n  _normalizePosition: function () {\n    var position = this.option(\"position\");\n    this._position = \"function\" === typeof position ? position() : position;\n  },\n  _getAnimationConfig: function () {\n    var animation = this.option(\"animation\");\n\n    if ((0, _type.isFunction)(animation)) {\n      animation = animation.call(this);\n    }\n\n    return animation;\n  },\n  _show: function () {\n    var _this3 = this;\n\n    var that = this;\n    var deferred = new _deferred.Deferred();\n    this._parentHidden = this._isParentHidden();\n    deferred.done(function () {\n      delete that._parentHidden;\n    });\n\n    if (this._parentHidden) {\n      this._isHidden = true;\n      return deferred.resolve();\n    }\n\n    if (this._currentVisible) {\n      return new _deferred.Deferred().resolve().promise();\n    }\n\n    this._currentVisible = true;\n    this._isShown = false;\n\n    this._normalizePosition();\n\n    var animation = that._getAnimationConfig() || {};\n\n    var showAnimation = this._normalizeAnimation(animation.show, \"to\");\n\n    var startShowAnimation = showAnimation && showAnimation.start || _common.noop;\n    var completeShowAnimation = showAnimation && showAnimation.complete || _common.noop;\n\n    if (this._isHidingActionCanceled) {\n      delete this._isHidingActionCanceled;\n      deferred.resolve();\n    } else {\n      var show = function () {\n        _this3._renderVisibility(true);\n\n        if (_this3._isShowingActionCanceled) {\n          delete _this3._isShowingActionCanceled;\n          deferred.resolve();\n          return;\n        }\n\n        _this3._animate(showAnimation, function () {\n          if (that.option(\"focusStateEnabled\")) {\n            _events_engine.default.trigger(that._focusTarget(), \"focus\");\n          }\n\n          completeShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = false;\n          that._isShown = true;\n\n          that._actions.onShown();\n\n          that._toggleSafariScrolling(false);\n\n          deferred.resolve();\n        }, function () {\n          startShowAnimation.apply(this, arguments);\n          that._showAnimationProcessing = true;\n        });\n      };\n\n      if (this.option(\"templatesRenderAsynchronously\")) {\n        this._stopShowTimer();\n\n        this._asyncShowTimeout = setTimeout(show);\n      } else {\n        show();\n      }\n    }\n\n    return deferred.promise();\n  },\n  _normalizeAnimation: function (animation, prop) {\n    if (animation) {\n      animation = (0, _extend.extend)({\n        type: \"slide\"\n      }, animation);\n\n      if (animation[prop] && \"object\" === _typeof(animation[prop])) {\n        (0, _extend.extend)(animation[prop], {\n          position: this._position\n        });\n      }\n    }\n\n    return animation;\n  },\n  _hide: function () {\n    if (!this._currentVisible) {\n      return new _deferred.Deferred().resolve().promise();\n    }\n\n    this._currentVisible = false;\n    var that = this;\n    var deferred = new _deferred.Deferred();\n    var animation = that._getAnimationConfig() || {};\n\n    var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\n\n    var startHideAnimation = hideAnimation && hideAnimation.start || _common.noop;\n    var completeHideAnimation = hideAnimation && hideAnimation.complete || _common.noop;\n    var hidingArgs = {\n      cancel: false\n    };\n\n    if (this._isShowingActionCanceled) {\n      deferred.resolve();\n    } else {\n      this._actions.onHiding(hidingArgs);\n\n      that._toggleSafariScrolling(true);\n\n      if (hidingArgs.cancel) {\n        this._isHidingActionCanceled = true;\n        this.option(\"visible\", true);\n        deferred.resolve();\n      } else {\n        this._forceFocusLost();\n\n        this._toggleShading(false);\n\n        this._toggleSubscriptions(false);\n\n        this._stopShowTimer();\n\n        this._animate(hideAnimation, function () {\n          var _that$_actions;\n\n          that._$content.css(\"pointerEvents\", \"\");\n\n          that._renderVisibility(false);\n\n          completeHideAnimation.apply(this, arguments);\n          that._hideAnimationProcessing = false;\n          null === (_that$_actions = that._actions) || void 0 === _that$_actions ? void 0 : _that$_actions.onHidden();\n          deferred.resolve();\n        }, function () {\n          that._$content.css(\"pointerEvents\", \"none\");\n\n          startHideAnimation.apply(this, arguments);\n          that._hideAnimationProcessing = true;\n        });\n      }\n    }\n\n    return deferred.promise();\n  },\n  _forceFocusLost: function () {\n    var activeElement = _dom_adapter.default.getActiveElement();\n\n    var shouldResetActiveElement = !!this._$content.find(activeElement).length;\n\n    if (shouldResetActiveElement) {\n      (0, _dom.resetActiveElement)();\n    }\n  },\n  _animate: function (animation, completeCallback, startCallback) {\n    if (animation) {\n      startCallback = startCallback || animation.start || _common.noop;\n\n      _fx.default.animate(this._$content, (0, _extend.extend)({}, animation, {\n        start: startCallback,\n        complete: completeCallback\n      }));\n    } else {\n      completeCallback();\n    }\n  },\n  _stopAnimation: function () {\n    _fx.default.stop(this._$content, true);\n  },\n  _renderVisibility: function (visible) {\n    if (visible && this._isParentHidden()) {\n      return;\n    }\n\n    this._currentVisible = visible;\n\n    this._stopAnimation();\n\n    if (!visible) {\n      (0, _visibility_change.triggerHidingEvent)(this._$content);\n    }\n\n    this._toggleVisibility(visible);\n\n    this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\n\n    this._updateZIndexStackPosition(visible);\n\n    if (visible) {\n      this._renderContent();\n\n      var showingArgs = {\n        cancel: false\n      };\n\n      this._actions.onShowing(showingArgs);\n\n      if (showingArgs.cancel) {\n        this._toggleVisibility(false);\n\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\n\n        this._updateZIndexStackPosition(false);\n\n        this._moveFromContainer();\n\n        this._isShowingActionCanceled = true;\n        this.option(\"visible\", false);\n        return;\n      }\n\n      this._moveToContainer();\n\n      this._renderGeometry();\n\n      (0, _visibility_change.triggerShownEvent)(this._$content);\n      (0, _visibility_change.triggerResizeEvent)(this._$content);\n    } else {\n      this._moveFromContainer();\n    }\n\n    this._toggleShading(visible);\n\n    this._toggleSubscriptions(visible);\n  },\n  _updateZIndexStackPosition: function (pushToStack) {\n    var overlayStack = this._overlayStack();\n\n    var index = (0, _array.inArray)(this, overlayStack);\n\n    if (pushToStack) {\n      if (index === -1) {\n        this._zIndex = zIndexPool.create(this._zIndexInitValue());\n        overlayStack.push(this);\n      }\n\n      this._$wrapper.css(\"zIndex\", this._zIndex);\n\n      this._$content.css(\"zIndex\", this._zIndex);\n    } else {\n      if (index !== -1) {\n        overlayStack.splice(index, 1);\n        zIndexPool.remove(this._zIndex);\n      }\n    }\n  },\n  _toggleShading: function (visible) {\n    this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\n\n    this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\n\n    this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\n\n    this._toggleTabTerminator(visible && this.option(\"shading\"));\n  },\n  _initTabTerminatorHandler: function () {\n    var that = this;\n\n    this._proxiedTabTerminatorHandler = function () {\n      that._tabKeyHandler.apply(that, arguments);\n    };\n  },\n  _toggleTabTerminator: function (enabled) {\n    var eventName = (0, _index.addNamespace)(\"keydown\", this.NAME);\n\n    if (enabled) {\n      _events_engine.default.on(_dom_adapter.default.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    } else {\n      _events_engine.default.off(_dom_adapter.default.getDocument(), eventName, this._proxiedTabTerminatorHandler);\n    }\n  },\n  _findTabbableBounds: function () {\n    var $elements = this._$wrapper.find(\"*\");\n\n    var elementsCount = $elements.length - 1;\n    var result = {\n      first: null,\n      last: null\n    };\n\n    for (var i = 0; i <= elementsCount; i++) {\n      if (!result.first && $elements.eq(i).is(_selectors.tabbable)) {\n        result.first = $elements.eq(i);\n      }\n\n      if (!result.last && $elements.eq(elementsCount - i).is(_selectors.tabbable)) {\n        result.last = $elements.eq(elementsCount - i);\n      }\n\n      if (result.first && result.last) {\n        break;\n      }\n    }\n\n    return result;\n  },\n  _tabKeyHandler: function (e) {\n    if ((0, _index.normalizeKeyName)(e) !== TAB_KEY || !this._isTopOverlay()) {\n      return;\n    }\n\n    var tabbableElements = this._findTabbableBounds();\n\n    var $firstTabbable = tabbableElements.first;\n    var $lastTabbable = tabbableElements.last;\n    var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\n    var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\n    var isEmptyTabList = 0 === tabbableElements.length;\n    var isOutsideTarget = !(0, _dom.contains)(this._$wrapper.get(0), e.target);\n\n    if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\n      e.preventDefault();\n      var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\n\n      _events_engine.default.trigger($focusElement, \"focusin\");\n\n      _events_engine.default.trigger($focusElement, \"focus\");\n    }\n  },\n  _toggleSubscriptions: function (enabled) {\n    if ((0, _window.hasWindow)()) {\n      this._toggleHideTopOverlayCallback(enabled);\n\n      this._toggleParentsScrollSubscription(enabled);\n    }\n  },\n  _toggleHideTopOverlayCallback: function (subscribe) {\n    if (!this._hideTopOverlayHandler) {\n      return;\n    }\n\n    if (subscribe) {\n      _hide_callback.hideCallback.add(this._hideTopOverlayHandler);\n    } else {\n      _hide_callback.hideCallback.remove(this._hideTopOverlayHandler);\n    }\n  },\n  _toggleParentsScrollSubscription: function (subscribe) {\n    var _this4 = this;\n\n    if (!this._position) {\n      return;\n    }\n\n    var target = this._position.of || (0, _renderer.default)();\n    var closeOnScroll = this.option(\"closeOnTargetScroll\");\n    var $parents = getElement(target).parents();\n    var scrollEvent = (0, _index.addNamespace)(\"scroll\", this.NAME);\n\n    if (\"desktop\" === _devices.default.real().deviceType) {\n      $parents = $parents.add(window);\n    }\n\n    this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function (e) {\n      _this4._targetParentsScrollHandler(e);\n    };\n\n    _events_engine.default.off((0, _renderer.default)().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\n\n    if (subscribe && closeOnScroll) {\n      _events_engine.default.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\n\n      this._$prevTargetParents = $parents;\n    }\n  },\n  _targetParentsScrollHandler: function (e) {\n    var closeHandled = false;\n    var closeOnScroll = this.option(\"closeOnTargetScroll\");\n\n    if ((0, _type.isFunction)(closeOnScroll)) {\n      closeHandled = closeOnScroll(e);\n    }\n\n    if (!closeHandled && !this._showAnimationProcessing) {\n      this.hide();\n    }\n  },\n  _render: function () {\n    this.callBase();\n\n    this._appendContentToElement();\n\n    this._renderVisibilityAnimate(this.option(\"visible\"));\n  },\n  _appendContentToElement: function () {\n    if (!this._$content.parent().is(this.$element())) {\n      this._$content.appendTo(this.$element());\n    }\n  },\n  _renderContent: function () {\n    var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\n\n    var isParentHidden = this.option(\"visible\") && this._isParentHidden();\n\n    if (isParentHidden) {\n      this._isHidden = true;\n      return;\n    }\n\n    if (this._contentAlreadyRendered || shouldDeferRendering) {\n      return;\n    }\n\n    this._contentAlreadyRendered = true;\n\n    this._appendContentToElement();\n\n    this.callBase();\n  },\n  _isParentHidden: function () {\n    if (!this.option(\"_checkParentVisibility\")) {\n      return false;\n    }\n\n    if (void 0 !== this._parentHidden) {\n      return this._parentHidden;\n    }\n\n    var $parent = this.$element().parent();\n\n    if ($parent.is(\":visible\")) {\n      return false;\n    }\n\n    var isHidden = false;\n    $parent.add($parent.parents()).each(function () {\n      var $element = (0, _renderer.default)(this);\n\n      if (\"none\" === $element.css(\"display\")) {\n        isHidden = true;\n        return false;\n      }\n    });\n    return isHidden || !_dom_adapter.default.getBody().contains($parent.get(0));\n  },\n  _renderContentImpl: function () {\n    var _this5 = this;\n\n    var whenContentRendered = new _deferred.Deferred();\n    var contentTemplateOption = this.option(\"contentTemplate\");\n\n    var contentTemplate = this._getTemplate(contentTemplateOption);\n\n    var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\n    contentTemplate && contentTemplate.render({\n      container: (0, _element.getPublicElement)(this.$content()),\n      noModel: true,\n      transclude: transclude,\n      onRendered: function () {\n        whenContentRendered.resolve();\n      }\n    });\n\n    this._renderDrag();\n\n    this._renderResize();\n\n    this._renderScrollTerminator();\n\n    whenContentRendered.done(function () {\n      if (_this5.option(\"visible\")) {\n        _this5._moveToContainer();\n      }\n    });\n    return whenContentRendered.promise();\n  },\n  _renderDrag: function () {\n    var $dragTarget = this._getDragTarget();\n\n    if (!$dragTarget) {\n      return;\n    }\n\n    var startEventName = (0, _index.addNamespace)(_drag.start, this.NAME);\n    var updateEventName = (0, _index.addNamespace)(_drag.move, this.NAME);\n\n    _events_engine.default.off($dragTarget, startEventName);\n\n    _events_engine.default.off($dragTarget, updateEventName);\n\n    if (!this.option(\"dragEnabled\")) {\n      return;\n    }\n\n    _events_engine.default.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\n\n    _events_engine.default.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this));\n  },\n  _renderResize: function () {\n    this._resizable = this._createComponent(this._$content, _resizable.default, {\n      handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\n      onResizeEnd: this._resizeEndHandler.bind(this),\n      onResize: this._actions.onResize.bind(this),\n      onResizeStart: this._actions.onResizeStart.bind(this),\n      minHeight: 100,\n      minWidth: 100,\n      area: this._getDragResizeContainer()\n    });\n  },\n  _resizeEndHandler: function () {\n    this._positionChangeHandled = true;\n\n    var width = this._resizable.option(\"width\");\n\n    var height = this._resizable.option(\"height\");\n\n    width && this.option(\"width\", width);\n    height && this.option(\"height\", height);\n\n    this._actions.onResizeEnd();\n  },\n  _renderScrollTerminator: function () {\n    var $scrollTerminator = this._wrapper();\n\n    var terminatorEventName = (0, _index.addNamespace)(_drag.move, this.NAME);\n\n    _events_engine.default.off($scrollTerminator, terminatorEventName);\n\n    _events_engine.default.on($scrollTerminator, terminatorEventName, {\n      validate: function () {\n        return true;\n      },\n      getDirection: function () {\n        return \"both\";\n      },\n      _toggleGestureCover: function (toggle) {\n        if (!toggle) {\n          this._toggleGestureCoverImpl(toggle);\n        }\n      },\n      _clearSelection: _common.noop,\n      isNative: true\n    }, function (e) {\n      var originalEvent = e.originalEvent.originalEvent;\n\n      var _ref = originalEvent || {},\n          type = _ref.type;\n\n      var isWheel = \"wheel\" === type;\n      var isMouseMove = \"mousemove\" === type;\n      var isScrollByWheel = isWheel && !(0, _index.isCommandKeyPressed)(e);\n      e._cancelPreventDefault = true;\n\n      if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\n        e.preventDefault();\n      }\n    });\n  },\n  _getDragTarget: function () {\n    return this.$content();\n  },\n  _dragStartHandler: function (e) {\n    e.targetElements = [];\n    this._prevOffset = {\n      x: 0,\n      y: 0\n    };\n\n    var allowedOffsets = this._allowedOffsets();\n\n    e.maxTopOffset = allowedOffsets.top;\n    e.maxBottomOffset = allowedOffsets.bottom;\n    e.maxLeftOffset = allowedOffsets.left;\n    e.maxRightOffset = allowedOffsets.right;\n  },\n  _getDragResizeContainer: function () {\n    var isContainerDefined = (0, _view_port.originalViewPort)().get(0) || this.option(\"container\");\n    var $container = !isContainerDefined ? (0, _renderer.default)(window) : this._$container;\n    return $container;\n  },\n  _deltaSize: function () {\n    var $content = this._$content;\n\n    var $container = this._getDragResizeContainer();\n\n    var contentWidth = $content.outerWidth();\n    var contentHeight = $content.outerHeight();\n    var containerWidth = $container.outerWidth();\n    var containerHeight = $container.outerHeight();\n\n    if (this._isWindow($container)) {\n      var document = _dom_adapter.default.getDocument();\n\n      var fullPageHeight = Math.max((0, _renderer.default)(document).outerHeight(), containerHeight);\n      var fullPageWidth = Math.max((0, _renderer.default)(document).outerWidth(), containerWidth);\n      containerHeight = fullPageHeight;\n      containerWidth = fullPageWidth;\n    }\n\n    return {\n      width: containerWidth - contentWidth,\n      height: containerHeight - contentHeight\n    };\n  },\n  _dragUpdateHandler: function (e) {\n    var offset = e.offset;\n    var prevOffset = this._prevOffset;\n    var targetOffset = {\n      top: offset.y - prevOffset.y,\n      left: offset.x - prevOffset.x\n    };\n\n    this._changePosition(targetOffset);\n\n    this._prevOffset = offset;\n  },\n  _changePosition: function (offset) {\n    var position = (0, _translator.locate)(this._$content);\n    (0, _translator.move)(this._$content, {\n      left: position.left + offset.left,\n      top: position.top + offset.top\n    });\n    this._positionChangeHandled = true;\n  },\n  _allowedOffsets: function () {\n    var position = (0, _translator.locate)(this._$content);\n\n    var deltaSize = this._deltaSize();\n\n    var isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0;\n    var shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? (0, _translator.locate)(this._$wrapper) : {\n      top: 0,\n      left: 0\n    };\n    var boundaryOffset = this.option(\"boundaryOffset\");\n    return {\n      top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\n      bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\n      left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\n      right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\n    };\n  },\n  _moveFromContainer: function () {\n    this._$content.appendTo(this.$element());\n\n    this._detachWrapperToContainer();\n  },\n  _detachWrapperToContainer: function () {\n    this._$wrapper.detach();\n  },\n  _moveToContainer: function () {\n    this._attachWrapperToContainer();\n\n    this._$content.appendTo(this._$wrapper);\n  },\n  _attachWrapperToContainer: function () {\n    var $element = this.$element();\n    var containerDefined = void 0 !== this.option(\"container\");\n    var renderContainer = containerDefined ? this._$container : _swatch_container.default.getSwatchContainer($element);\n\n    if (renderContainer && renderContainer[0] === $element.parent()[0]) {\n      renderContainer = $element;\n    }\n\n    this._$wrapper.appendTo(renderContainer);\n  },\n  _fixHeightAfterSafariAddressBarResizing: function () {\n    if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\n      this._$wrapper.css(\"minHeight\", window.innerHeight);\n    }\n  },\n  _renderGeometry: function (isDimensionChanged) {\n    if (this.option(\"visible\") && (0, _window.hasWindow)()) {\n      this._renderGeometryImpl(isDimensionChanged);\n    }\n  },\n  _renderGeometryImpl: function (isDimensionChanged) {\n    this._stopAnimation();\n\n    this._normalizePosition();\n\n    this._renderWrapper();\n\n    this._fixHeightAfterSafariAddressBarResizing();\n\n    this._renderDimensions();\n\n    var resultPosition = this._renderPosition();\n\n    this._actions.onPositioned({\n      position: resultPosition\n    });\n  },\n  _fixWrapperPosition: function () {\n    this._$wrapper.css(\"position\", this._useFixedPosition() ? \"fixed\" : \"absolute\");\n  },\n  _useFixedPosition: function () {\n    return this._shouldFixBodyPosition() || this.option(\"_fixedPosition\");\n  },\n  _shouldFixBodyPosition: function () {\n    var $container = this._getContainer();\n\n    return this._isWindow($container) && (!iOS || void 0 !== this._bodyScrollTop);\n  },\n  _toggleSafariScrolling: function (scrollingEnabled) {\n    if (iOS && this._shouldFixBodyPosition()) {\n      var body = _dom_adapter.default.getBody();\n\n      if (scrollingEnabled) {\n        (0, _renderer.default)(body).removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        window.scrollTo(0, this._bodyScrollTop);\n        this._bodyScrollTop = void 0;\n      } else {\n        if (this.option(\"visible\")) {\n          this._bodyScrollTop = window.pageYOffset;\n          (0, _renderer.default)(body).addClass(PREVENT_SAFARI_SCROLLING_CLASS);\n        }\n      }\n    }\n  },\n  _renderWrapper: function () {\n    this._fixWrapperPosition();\n\n    this._renderWrapperDimensions();\n\n    this._renderWrapperPosition();\n  },\n  _renderWrapperDimensions: function () {\n    var wrapperWidth;\n    var wrapperHeight;\n\n    var $container = this._getContainer();\n\n    if (!$container) {\n      return;\n    }\n\n    var isWindow = this._isWindow($container);\n\n    wrapperWidth = isWindow ? \"\" : $container.outerWidth(), wrapperHeight = isWindow ? \"\" : $container.outerHeight();\n\n    this._$wrapper.css({\n      width: wrapperWidth,\n      height: wrapperHeight\n    });\n  },\n  _isWindow: function ($element) {\n    return !!$element && (0, _type.isWindow)($element.get(0));\n  },\n  _renderWrapperPosition: function () {\n    var $container = this._getContainer();\n\n    if ($container) {\n      _position.default.setup(this._$wrapper, {\n        my: \"top left\",\n        at: \"top left\",\n        of: $container\n      });\n    }\n  },\n  _getContainer: function () {\n    var position = this._position;\n    var container = this.option(\"container\");\n    var positionOf = null;\n\n    if (!container && position) {\n      positionOf = (0, _type.isEvent)(position.of) ? window : position.of || window;\n    }\n\n    return getElement(container || positionOf);\n  },\n  _renderDimensions: function () {\n    var content = this._$content.get(0);\n\n    this._$content.css({\n      minWidth: this._getOptionValue(\"minWidth\", content),\n      maxWidth: this._getOptionValue(\"maxWidth\", content),\n      minHeight: this._getOptionValue(\"minHeight\", content),\n      maxHeight: this._getOptionValue(\"maxHeight\", content),\n      width: this._getOptionValue(\"width\", content),\n      height: this._getOptionValue(\"height\", content)\n    });\n  },\n  _renderPosition: function () {\n    if (this._positionChangeHandled) {\n      var allowedOffsets = this._allowedOffsets();\n\n      this._changePosition({\n        top: (0, _math.fitIntoRange)(0, -allowedOffsets.top, allowedOffsets.bottom),\n        left: (0, _math.fitIntoRange)(0, -allowedOffsets.left, allowedOffsets.right)\n      });\n    } else {\n      this._renderOverlayBoundaryOffset();\n\n      (0, _translator.resetPosition)(this._$content);\n\n      var position = this._transformStringPosition(this._position, POSITION_ALIASES);\n\n      var resultPosition = _position.default.setup(this._$content, position);\n\n      forceRepaint(this._$content);\n      return resultPosition;\n    }\n  },\n  _transformStringPosition: function (position, positionAliases) {\n    if ((0, _type.isString)(position)) {\n      position = (0, _extend.extend)({}, positionAliases[position]);\n    }\n\n    return position;\n  },\n  _renderOverlayBoundaryOffset: function () {\n    var boundaryOffset = this.option(\"boundaryOffset\");\n\n    this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\");\n  },\n  _focusTarget: function () {\n    return this._$content;\n  },\n  _attachKeyboardEvents: function () {\n    var _this6 = this;\n\n    this._keyboardListenerId = _short.keyboard.on(this._$content, null, function (opts) {\n      return _this6._keyboardHandler(opts);\n    });\n  },\n  _keyboardHandler: function (options) {\n    var e = options.originalEvent;\n    var $target = (0, _renderer.default)(e.target);\n\n    if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\n      this.callBase.apply(this, arguments);\n    }\n  },\n  _isVisible: function () {\n    return this.option(\"visible\");\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      if (this.option(\"visible\")) {\n        this._renderVisibilityAnimate(visible);\n      }\n    } else {\n      this._renderVisibilityAnimate(visible);\n    }\n  },\n  _dimensionChanged: function () {\n    this._renderGeometry(true);\n  },\n  _clean: function () {\n    if (!this._contentAlreadyRendered) {\n      this.$content().empty();\n    }\n\n    this._renderVisibility(false);\n\n    this._stopShowTimer();\n\n    this._cleanFocusState();\n  },\n  _stopShowTimer: function () {\n    if (this._asyncShowTimeout) {\n      clearTimeout(this._asyncShowTimeout);\n    }\n\n    this._asyncShowTimeout = null;\n  },\n  _dispose: function () {\n    _fx.default.stop(this._$content, false);\n\n    clearTimeout(this._deferShowTimer);\n\n    this._toggleViewPortSubscription(false);\n\n    this._toggleSubscriptions(false);\n\n    this._updateZIndexStackPosition(false);\n\n    this._toggleTabTerminator(false);\n\n    this._toggleSafariScrolling(true);\n\n    this._actions = null;\n    this.callBase();\n    zIndexPool.remove(this._zIndex);\n\n    this._$wrapper.remove();\n\n    this._$content.remove();\n  },\n  _toggleDisabledState: function (value) {\n    this.callBase.apply(this, arguments);\n\n    this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value));\n  },\n  _toggleRTLDirection: function (rtl) {\n    this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl);\n  },\n  _optionChanged: function (args) {\n    var _this7 = this;\n\n    var value = args.value;\n\n    if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"dragEnabled\":\n        this._renderDrag();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"resizeEnabled\":\n        this._renderResize();\n\n        this._renderGeometry();\n\n        break;\n\n      case \"shading\":\n      case \"shadingColor\":\n        this._toggleShading(this.option(\"visible\"));\n\n        break;\n\n      case \"width\":\n      case \"height\":\n      case \"minWidth\":\n      case \"maxWidth\":\n      case \"minHeight\":\n      case \"maxHeight\":\n      case \"boundaryOffset\":\n        this._renderGeometry();\n\n        break;\n\n      case \"position\":\n        this._positionChangeHandled = false;\n\n        this._renderGeometry();\n\n        break;\n\n      case \"visible\":\n        this._renderVisibilityAnimate(value).done(function () {\n          if (!_this7._animateDeferred) {\n            return;\n          }\n\n          _this7._animateDeferred.resolveWith(_this7);\n        });\n\n        break;\n\n      case \"target\":\n        this._initTarget(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"container\":\n        this._initContainer(value);\n\n        this._invalidate();\n\n        break;\n\n      case \"innerOverlay\":\n        this._initInnerOverlayClass();\n\n        break;\n\n      case \"deferRendering\":\n      case \"contentTemplate\":\n        this._contentAlreadyRendered = false;\n\n        this._clean();\n\n        this._invalidate();\n\n        break;\n\n      case \"hideTopOverlayHandler\":\n        this._toggleHideTopOverlayCallback(false);\n\n        this._initHideTopOverlayHandler(args.value);\n\n        this._toggleHideTopOverlayCallback(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnTargetScroll\":\n        this._toggleParentsScrollSubscription(this.option(\"visible\"));\n\n        break;\n\n      case \"closeOnOutsideClick\":\n      case \"animation\":\n      case \"propagateOutsideClick\":\n        break;\n\n      case \"rtlEnabled\":\n        this._contentAlreadyRendered = false;\n        this.callBase(args);\n        break;\n\n      case \"_fixedPosition\":\n        this._fixWrapperPosition();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  toggle: function (showing) {\n    var _this8 = this;\n\n    showing = void 0 === showing ? !this.option(\"visible\") : showing;\n    var result = new _deferred.Deferred();\n\n    if (showing === this.option(\"visible\")) {\n      return result.resolveWith(this, [showing]).promise();\n    }\n\n    var animateDeferred = new _deferred.Deferred();\n    this._animateDeferred = animateDeferred;\n    this.option(\"visible\", showing);\n    animateDeferred.promise().done(function () {\n      delete _this8._animateDeferred;\n      result.resolveWith(_this8, [_this8.option(\"visible\")]);\n    });\n    return result.promise();\n  },\n  $content: function () {\n    return this._$content;\n  },\n  show: function () {\n    return this.toggle(true);\n  },\n  hide: function () {\n    return this.toggle(false);\n  },\n  content: function () {\n    return (0, _element.getPublicElement)(this._$content);\n  },\n  repaint: function () {\n    if (this._contentAlreadyRendered) {\n      this._renderGeometry();\n\n      (0, _visibility_change.triggerResizeEvent)(this._$content);\n    } else {\n      this.callBase();\n    }\n  }\n});\n\nOverlay.baseZIndex = function (zIndex) {\n  return zIndexPool.base(zIndex);\n};\n\n(0, _component_registrator.default)(\"dxOverlay\", Overlay);\nvar _default = Overlay;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/home/emma/node_modules/devextreme/ui/overlay/ui.overlay.js"],"names":["exports","default","_fx","_interopRequireDefault","require","_position","_translator","_component_registrator","_devices","_dom_adapter","_element","_renderer","_empty_template","_array","_browser","_common","_deferred","_dom","_extend","_iterator","_math","_ready_callbacks","_type","_view_port","_window","_events_engine","_drag","_pointer","_short","_index","_visibility_change","_hide_callback","_resizable","_selectors","_swatch_container","_ui","zIndexPool","_interopRequireWildcard","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","_typeof","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","ready","add","window","getWindow","viewPortChanged","changeCallback","OVERLAY_CLASS","OVERLAY_WRAPPER_CLASS","OVERLAY_CONTENT_CLASS","OVERLAY_SHADER_CLASS","OVERLAY_MODAL_CLASS","INNER_OVERLAY_CLASS","INVISIBLE_STATE_CLASS","ANONYMOUS_TEMPLATE_NAME","RTL_DIRECTION_CLASS","ACTIONS","OVERLAY_STACK","DISABLED_STATE_CLASS","PREVENT_SAFARI_SCROLLING_CLASS","TAB_KEY","POSITION_ALIASES","top","my","at","bottom","right","left","center","realDevice","real","firefoxDesktop","mozilla","deviceType","iOS","platform","hasSafariAddressBar","safari","forceRepaint","$element","width","getElement","value","isEvent","target","subscribeGlobal","getDocument","down","e","i","length","_proxiedDocumentDownHandler","Overlay","inherit","_supportedKeys","offsetSize","move","option","preventDefault","stopPropagation","allowedOffsets","_allowedOffsets","offset","fitIntoRange","_changePosition","extend","callBase","escape","hide","upArrow","bind","downArrow","leftArrow","rightArrow","_getDefaultOptions","_this","activeStateEnabled","visible","deferRendering","shading","shadingColor","position","minWidth","maxWidth","height","minHeight","maxHeight","animation","show","type","duration","from","scale","to","opacity","closeOnOutsideClick","onShowing","onShown","onHiding","onHidden","contentTemplate","dragEnabled","resizeEnabled","onResizeStart","onResize","onResizeEnd","innerOverlay","container","hideTopOverlayHandler","closeOnTargetScroll","onPositioned","boundaryOffset","h","v","propagateOutsideClick","ignoreChildEvents","_checkParentVisibility","_fixedPosition","_defaultOptionsRules","concat","device","hasWindow","options","_setOptionsByReference","_optionsByReference","_wrapper","_$wrapper","_container","_$content","_eventBindingTarget","_init","_initActions","_initCloseOnOutsideClickHandler","_initTabTerminatorHandler","addClass","_initInnerOverlayClass","attr","on","noop","_toggleViewPortSubscription","_initHideTopOverlayHandler","_initOptions","_initTarget","_initContainer","toggleClass","isDefined","each","_","path","pathParts","split","isPlainObject","shift","$container","closest","first","_$container","parent","handler","_hideTopOverlayHandler","_this2","_actions","action","_createActionByOption","excludeValidators","that","_documentDownHandler","apply","arguments","_showAnimationProcessing","_stopAnimation","isFunction","isAttachedTarget","document","is","contains","isInnerOverlay","outsideClick","_outsideClickHandler","_getAnonymousTemplateName","_initTemplates","_templateManager","addDefaultTemplates","content","EmptyTemplate","_isTopOverlay","overlayStack","_overlayStack","tabbableElements","_findTabbableBounds","last","_zIndexInitValue","baseZIndex","toggle","remove","_viewPortChangeHandle","_viewPortChangeHandler","_refresh","_renderVisibilityAnimate","_show","_hide","_normalizePosition","_getAnimationConfig","_this3","deferred","Deferred","_parentHidden","_isParentHidden","done","_isHidden","resolve","_currentVisible","promise","_isShown","showAnimation","_normalizeAnimation","startShowAnimation","start","completeShowAnimation","complete","_isHidingActionCanceled","_renderVisibility","_isShowingActionCanceled","_animate","trigger","_focusTarget","_toggleSafariScrolling","_stopShowTimer","_asyncShowTimeout","setTimeout","prop","hideAnimation","startHideAnimation","completeHideAnimation","hidingArgs","cancel","_forceFocusLost","_toggleShading","_toggleSubscriptions","_that$_actions","css","_hideAnimationProcessing","activeElement","getActiveElement","shouldResetActiveElement","find","resetActiveElement","completeCallback","startCallback","animate","stop","triggerHidingEvent","_toggleVisibility","_updateZIndexStackPosition","_renderContent","showingArgs","_moveFromContainer","_moveToContainer","_renderGeometry","triggerShownEvent","triggerResizeEvent","pushToStack","index","inArray","_zIndex","create","push","splice","_toggleTabTerminator","_proxiedTabTerminatorHandler","_tabKeyHandler","enabled","eventName","addNamespace","NAME","off","$elements","elementsCount","result","eq","tabbable","normalizeKeyName","$firstTabbable","$lastTabbable","isTabOnLast","shiftKey","isShiftTabOnFirst","isEmptyTabList","isOutsideTarget","$focusElement","_toggleHideTopOverlayCallback","_toggleParentsScrollSubscription","subscribe","hideCallback","_this4","of","closeOnScroll","$parents","parents","scrollEvent","_proxiedTargetParentsScrollHandler","_targetParentsScrollHandler","_$prevTargetParents","closeHandled","_render","_appendContentToElement","appendTo","shouldDeferRendering","isParentHidden","_contentAlreadyRendered","$parent","isHidden","getBody","_renderContentImpl","_this5","whenContentRendered","contentTemplateOption","_getTemplate","transclude","anonymousTemplateName","render","getPublicElement","$content","noModel","onRendered","_renderDrag","_renderResize","_renderScrollTerminator","$dragTarget","_getDragTarget","startEventName","updateEventName","_dragStartHandler","_dragUpdateHandler","_createComponent","handles","_resizeEndHandler","area","_getDragResizeContainer","_positionChangeHandled","$scrollTerminator","terminatorEventName","validate","getDirection","_toggleGestureCover","_toggleGestureCoverImpl","_clearSelection","isNative","originalEvent","_ref","isWheel","isMouseMove","isScrollByWheel","isCommandKeyPressed","_cancelPreventDefault","cancelable","targetElements","_prevOffset","x","y","maxTopOffset","maxBottomOffset","maxLeftOffset","maxRightOffset","isContainerDefined","originalViewPort","_deltaSize","contentWidth","outerWidth","contentHeight","outerHeight","containerWidth","containerHeight","_isWindow","fullPageHeight","Math","max","fullPageWidth","prevOffset","targetOffset","locate","deltaSize","isAllowedDrag","shaderOffset","_getContainer","_detachWrapperToContainer","detach","_attachWrapperToContainer","containerDefined","renderContainer","getSwatchContainer","_fixHeightAfterSafariAddressBarResizing","innerHeight","isDimensionChanged","_renderGeometryImpl","_renderWrapper","_renderDimensions","resultPosition","_renderPosition","_fixWrapperPosition","_useFixedPosition","_shouldFixBodyPosition","_bodyScrollTop","scrollingEnabled","body","removeClass","scrollTo","pageYOffset","_renderWrapperDimensions","_renderWrapperPosition","wrapperWidth","wrapperHeight","isWindow","setup","positionOf","_getOptionValue","_renderOverlayBoundaryOffset","resetPosition","_transformStringPosition","positionAliases","isString","_attachKeyboardEvents","_this6","_keyboardListenerId","keyboard","opts","_keyboardHandler","$target","_isVisible","_visibilityChanged","_dimensionChanged","_clean","empty","_cleanFocusState","clearTimeout","_dispose","_deferShowTimer","_toggleDisabledState","Boolean","_toggleRTLDirection","rtl","_optionChanged","args","_this7","name","_animateDeferred","resolveWith","_invalidate","showing","_this8","animateDeferred","repaint","zIndex","base","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/overlay/ui.overlay.js)\r\n * Version: 20.2.7\r\n * Build date: Thu Apr 22 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\r\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _element = require(\"../../core/element\");\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _empty_template = require(\"../../core/templates/empty_template\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _ready_callbacks = _interopRequireDefault(require(\"../../core/utils/ready_callbacks\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _view_port = require(\"../../core/utils/view_port\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _drag = require(\"../../events/drag\");\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _short = require(\"../../events/short\");\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _visibility_change = require(\"../../events/visibility_change\");\r\nvar _hide_callback = require(\"../../mobile/hide_callback\");\r\nvar _resizable = _interopRequireDefault(require(\"../resizable\"));\r\nvar _selectors = require(\"../widget/selectors\");\r\nvar _swatch_container = _interopRequireDefault(require(\"../widget/swatch_container\"));\r\nvar _ui = _interopRequireDefault(require(\"../widget/ui.widget\"));\r\nvar zIndexPool = _interopRequireWildcard(require(\"./z_index\"));\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar ready = _ready_callbacks.default.add;\r\nvar window = (0, _window.getWindow)();\r\nvar viewPortChanged = _view_port.changeCallback;\r\nvar OVERLAY_CLASS = \"dx-overlay\";\r\nvar OVERLAY_WRAPPER_CLASS = \"dx-overlay-wrapper\";\r\nvar OVERLAY_CONTENT_CLASS = \"dx-overlay-content\";\r\nvar OVERLAY_SHADER_CLASS = \"dx-overlay-shader\";\r\nvar OVERLAY_MODAL_CLASS = \"dx-overlay-modal\";\r\nvar INNER_OVERLAY_CLASS = \"dx-inner-overlay\";\r\nvar INVISIBLE_STATE_CLASS = \"dx-state-invisible\";\r\nvar ANONYMOUS_TEMPLATE_NAME = \"content\";\r\nvar RTL_DIRECTION_CLASS = \"dx-rtl\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onHiding\", \"onHidden\", \"onPositioned\", \"onResizeStart\", \"onResize\", \"onResizeEnd\"];\r\nvar OVERLAY_STACK = [];\r\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\r\nvar PREVENT_SAFARI_SCROLLING_CLASS = \"dx-prevent-safari-scrolling\";\r\nvar TAB_KEY = \"tab\";\r\nvar POSITION_ALIASES = {\r\n    top: {\r\n        my: \"top center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"bottom center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"right center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"left center\",\r\n        at: \"left center\"\r\n    },\r\n    center: {\r\n        my: \"center\",\r\n        at: \"center\"\r\n    },\r\n    \"right bottom\": {\r\n        my: \"right bottom\",\r\n        at: \"right bottom\"\r\n    },\r\n    \"right top\": {\r\n        my: \"right top\",\r\n        at: \"right top\"\r\n    },\r\n    \"left bottom\": {\r\n        my: \"left bottom\",\r\n        at: \"left bottom\"\r\n    },\r\n    \"left top\": {\r\n        my: \"left top\",\r\n        at: \"left top\"\r\n    }\r\n};\r\nvar realDevice = _devices.default.real();\r\nvar firefoxDesktop = _browser.default.mozilla && \"desktop\" === realDevice.deviceType;\r\nvar iOS = \"ios\" === realDevice.platform;\r\nvar hasSafariAddressBar = _browser.default.safari && \"desktop\" !== realDevice.deviceType;\r\nvar forceRepaint = function($element) {\r\n    if (firefoxDesktop) {\r\n        $element.width()\r\n    }\r\n};\r\nvar getElement = function(value) {\r\n    if ((0, _type.isEvent)(value)) {\r\n        value = value.target\r\n    }\r\n    return (0, _renderer.default)(value)\r\n};\r\nready(function() {\r\n    _events_engine.default.subscribeGlobal(_dom_adapter.default.getDocument(), _pointer.default.down, function(e) {\r\n        for (var i = OVERLAY_STACK.length - 1; i >= 0; i--) {\r\n            if (!OVERLAY_STACK[i]._proxiedDocumentDownHandler(e)) {\r\n                return\r\n            }\r\n        }\r\n    })\r\n});\r\nvar Overlay = _ui.default.inherit({\r\n    _supportedKeys: function() {\r\n        var offsetSize = 5;\r\n        var move = function(top, left, e) {\r\n            if (!this.option(\"dragEnabled\")) {\r\n                return\r\n            }\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var allowedOffsets = this._allowedOffsets();\r\n            var offset = {\r\n                top: (0, _math.fitIntoRange)(top, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: (0, _math.fitIntoRange)(left, -allowedOffsets.left, allowedOffsets.right)\r\n            };\r\n            this._changePosition(offset)\r\n        };\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            escape: function() {\r\n                this.hide()\r\n            },\r\n            upArrow: move.bind(this, -offsetSize, 0),\r\n            downArrow: move.bind(this, offsetSize, 0),\r\n            leftArrow: move.bind(this, 0, -offsetSize),\r\n            rightArrow: move.bind(this, 0, offsetSize)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        var _this = this;\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            activeStateEnabled: false,\r\n            visible: false,\r\n            deferRendering: true,\r\n            shading: true,\r\n            shadingColor: \"\",\r\n            position: {\r\n                my: \"center\",\r\n                at: \"center\"\r\n            },\r\n            width: function() {\r\n                return .8 * (0, _renderer.default)(window).width()\r\n            },\r\n            minWidth: null,\r\n            maxWidth: null,\r\n            height: function() {\r\n                return .8 * (0, _renderer.default)(window).height()\r\n            },\r\n            minHeight: null,\r\n            maxHeight: null,\r\n            animation: {\r\n                show: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    from: {\r\n                        scale: .55\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"pop\",\r\n                    duration: 300,\r\n                    to: {\r\n                        opacity: 0,\r\n                        scale: .55\r\n                    },\r\n                    from: {\r\n                        opacity: 1,\r\n                        scale: 1\r\n                    }\r\n                }\r\n            },\r\n            closeOnOutsideClick: false,\r\n            onShowing: null,\r\n            onShown: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            contentTemplate: \"content\",\r\n            dragEnabled: false,\r\n            resizeEnabled: false,\r\n            onResizeStart: null,\r\n            onResize: null,\r\n            onResizeEnd: null,\r\n            innerOverlay: false,\r\n            target: void 0,\r\n            container: void 0,\r\n            hideTopOverlayHandler: function() {\r\n                _this.hide()\r\n            },\r\n            closeOnTargetScroll: false,\r\n            onPositioned: null,\r\n            boundaryOffset: {\r\n                h: 0,\r\n                v: 0\r\n            },\r\n            propagateOutsideClick: false,\r\n            ignoreChildEvents: true,\r\n            _checkParentVisibility: true,\r\n            _fixedPosition: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !(0, _window.hasWindow)()\r\n            },\r\n            options: {\r\n                width: null,\r\n                height: null,\r\n                animation: null,\r\n                _checkParentVisibility: false\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            animation: true\r\n        })\r\n    },\r\n    _wrapper: function() {\r\n        return this._$wrapper\r\n    },\r\n    _container: function() {\r\n        return this._$content\r\n    },\r\n    _eventBindingTarget: function() {\r\n        return this._$content\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions();\r\n        this._initCloseOnOutsideClickHandler();\r\n        this._initTabTerminatorHandler();\r\n        this._$wrapper = (0, _renderer.default)(\"<div>\").addClass(OVERLAY_WRAPPER_CLASS);\r\n        this._$content = (0, _renderer.default)(\"<div>\").addClass(OVERLAY_CONTENT_CLASS);\r\n        this._initInnerOverlayClass();\r\n        var $element = this.$element();\r\n        this._$wrapper.addClass($element.attr(\"class\"));\r\n        $element.addClass(OVERLAY_CLASS);\r\n        this._$wrapper.attr(\"data-bind\", \"dxControlsDescendantBindings: true\");\r\n        _events_engine.default.on(this._$wrapper, \"MSPointerDown\", _common.noop);\r\n        _events_engine.default.on(this._$wrapper, \"focusin\", function(e) {\r\n            e.stopPropagation()\r\n        });\r\n        this._toggleViewPortSubscription(true);\r\n        this._initHideTopOverlayHandler(this.option(\"hideTopOverlayHandler\"))\r\n    },\r\n    _initOptions: function(options) {\r\n        this._initTarget(options.target);\r\n        var container = void 0 === options.container ? this.option(\"container\") : options.container;\r\n        this._initContainer(container);\r\n        this.callBase(options)\r\n    },\r\n    _initInnerOverlayClass: function() {\r\n        this._$content.toggleClass(INNER_OVERLAY_CLASS, this.option(\"innerOverlay\"))\r\n    },\r\n    _initTarget: function(target) {\r\n        if (!(0, _type.isDefined)(target)) {\r\n            return\r\n        }\r\n        var options = this.option();\r\n        (0, _iterator.each)([\"position.of\", \"animation.show.from.position.of\", \"animation.show.to.position.of\", \"animation.hide.from.position.of\", \"animation.hide.to.position.of\"], function(_, path) {\r\n            var pathParts = path.split(\".\");\r\n            var option = options;\r\n            while (option) {\r\n                if (1 === pathParts.length) {\r\n                    if ((0, _type.isPlainObject)(option)) {\r\n                        option[pathParts.shift()] = target\r\n                    }\r\n                    break\r\n                } else {\r\n                    option = option[pathParts.shift()]\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _initContainer: function(container) {\r\n        container = void 0 === container ? (0, _view_port.value)() : container;\r\n        var $element = this.$element();\r\n        var $container = $element.closest(container);\r\n        if (!$container.length) {\r\n            $container = (0, _renderer.default)(container).first()\r\n        }\r\n        this._$container = $container.length ? $container : $element.parent()\r\n    },\r\n    _initHideTopOverlayHandler: function(handler) {\r\n        this._hideTopOverlayHandler = handler\r\n    },\r\n    _initActions: function() {\r\n        var _this2 = this;\r\n        this._actions = {};\r\n        (0, _iterator.each)(ACTIONS, function(_, action) {\r\n            _this2._actions[action] = _this2._createActionByOption(action, {\r\n                excludeValidators: [\"disabled\", \"readOnly\"]\r\n            }) || _common.noop\r\n        })\r\n    },\r\n    _initCloseOnOutsideClickHandler: function() {\r\n        var that = this;\r\n        this._proxiedDocumentDownHandler = function() {\r\n            return that._documentDownHandler.apply(that, arguments)\r\n        }\r\n    },\r\n    _documentDownHandler: function(e) {\r\n        if (this._showAnimationProcessing) {\r\n            this._stopAnimation()\r\n        }\r\n        var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n        if ((0, _type.isFunction)(closeOnOutsideClick)) {\r\n            closeOnOutsideClick = closeOnOutsideClick(e)\r\n        }\r\n        var $container = this._$content;\r\n        var isAttachedTarget = (0, _renderer.default)(window.document).is(e.target) || (0, _dom.contains)(window.document, e.target);\r\n        var isInnerOverlay = (0, _renderer.default)(e.target).closest(\".\" + INNER_OVERLAY_CLASS).length;\r\n        var outsideClick = isAttachedTarget && !isInnerOverlay && !($container.is(e.target) || (0, _dom.contains)($container.get(0), e.target));\r\n        if (outsideClick && closeOnOutsideClick) {\r\n            this._outsideClickHandler(e)\r\n        }\r\n        return this.option(\"propagateOutsideClick\")\r\n    },\r\n    _outsideClickHandler: function(e) {\r\n        if (this.option(\"shading\")) {\r\n            e.preventDefault()\r\n        }\r\n        this.hide()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initTemplates: function() {\r\n        this._templateManager.addDefaultTemplates({\r\n            content: new _empty_template.EmptyTemplate\r\n        });\r\n        this.callBase()\r\n    },\r\n    _isTopOverlay: function() {\r\n        var overlayStack = this._overlayStack();\r\n        for (var i = overlayStack.length - 1; i >= 0; i--) {\r\n            var tabbableElements = overlayStack[i]._findTabbableBounds();\r\n            if (tabbableElements.first || tabbableElements.last) {\r\n                return overlayStack[i] === this\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _overlayStack: function() {\r\n        return OVERLAY_STACK\r\n    },\r\n    _zIndexInitValue: function() {\r\n        return Overlay.baseZIndex()\r\n    },\r\n    _toggleViewPortSubscription: function(toggle) {\r\n        viewPortChanged.remove(this._viewPortChangeHandle);\r\n        if (toggle) {\r\n            this._viewPortChangeHandle = this._viewPortChangeHandler.bind(this);\r\n            viewPortChanged.add(this._viewPortChangeHandle)\r\n        }\r\n    },\r\n    _viewPortChangeHandler: function() {\r\n        this._initContainer(this.option(\"container\"));\r\n        this._refresh()\r\n    },\r\n    _renderVisibilityAnimate: function(visible) {\r\n        this._stopAnimation();\r\n        return visible ? this._show() : this._hide()\r\n    },\r\n    _normalizePosition: function() {\r\n        var position = this.option(\"position\");\r\n        this._position = \"function\" === typeof position ? position() : position\r\n    },\r\n    _getAnimationConfig: function() {\r\n        var animation = this.option(\"animation\");\r\n        if ((0, _type.isFunction)(animation)) {\r\n            animation = animation.call(this)\r\n        }\r\n        return animation\r\n    },\r\n    _show: function() {\r\n        var _this3 = this;\r\n        var that = this;\r\n        var deferred = new _deferred.Deferred;\r\n        this._parentHidden = this._isParentHidden();\r\n        deferred.done(function() {\r\n            delete that._parentHidden\r\n        });\r\n        if (this._parentHidden) {\r\n            this._isHidden = true;\r\n            return deferred.resolve()\r\n        }\r\n        if (this._currentVisible) {\r\n            return (new _deferred.Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = true;\r\n        this._isShown = false;\r\n        this._normalizePosition();\r\n        var animation = that._getAnimationConfig() || {};\r\n        var showAnimation = this._normalizeAnimation(animation.show, \"to\");\r\n        var startShowAnimation = showAnimation && showAnimation.start || _common.noop;\r\n        var completeShowAnimation = showAnimation && showAnimation.complete || _common.noop;\r\n        if (this._isHidingActionCanceled) {\r\n            delete this._isHidingActionCanceled;\r\n            deferred.resolve()\r\n        } else {\r\n            var show = function() {\r\n                _this3._renderVisibility(true);\r\n                if (_this3._isShowingActionCanceled) {\r\n                    delete _this3._isShowingActionCanceled;\r\n                    deferred.resolve();\r\n                    return\r\n                }\r\n                _this3._animate(showAnimation, function() {\r\n                    if (that.option(\"focusStateEnabled\")) {\r\n                        _events_engine.default.trigger(that._focusTarget(), \"focus\")\r\n                    }\r\n                    completeShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = false;\r\n                    that._isShown = true;\r\n                    that._actions.onShown();\r\n                    that._toggleSafariScrolling(false);\r\n                    deferred.resolve()\r\n                }, function() {\r\n                    startShowAnimation.apply(this, arguments);\r\n                    that._showAnimationProcessing = true\r\n                })\r\n            };\r\n            if (this.option(\"templatesRenderAsynchronously\")) {\r\n                this._stopShowTimer();\r\n                this._asyncShowTimeout = setTimeout(show)\r\n            } else {\r\n                show()\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _normalizeAnimation: function(animation, prop) {\r\n        if (animation) {\r\n            animation = (0, _extend.extend)({\r\n                type: \"slide\"\r\n            }, animation);\r\n            if (animation[prop] && \"object\" === _typeof(animation[prop])) {\r\n                (0, _extend.extend)(animation[prop], {\r\n                    position: this._position\r\n                })\r\n            }\r\n        }\r\n        return animation\r\n    },\r\n    _hide: function() {\r\n        if (!this._currentVisible) {\r\n            return (new _deferred.Deferred).resolve().promise()\r\n        }\r\n        this._currentVisible = false;\r\n        var that = this;\r\n        var deferred = new _deferred.Deferred;\r\n        var animation = that._getAnimationConfig() || {};\r\n        var hideAnimation = this._normalizeAnimation(animation.hide, \"from\");\r\n        var startHideAnimation = hideAnimation && hideAnimation.start || _common.noop;\r\n        var completeHideAnimation = hideAnimation && hideAnimation.complete || _common.noop;\r\n        var hidingArgs = {\r\n            cancel: false\r\n        };\r\n        if (this._isShowingActionCanceled) {\r\n            deferred.resolve()\r\n        } else {\r\n            this._actions.onHiding(hidingArgs);\r\n            that._toggleSafariScrolling(true);\r\n            if (hidingArgs.cancel) {\r\n                this._isHidingActionCanceled = true;\r\n                this.option(\"visible\", true);\r\n                deferred.resolve()\r\n            } else {\r\n                this._forceFocusLost();\r\n                this._toggleShading(false);\r\n                this._toggleSubscriptions(false);\r\n                this._stopShowTimer();\r\n                this._animate(hideAnimation, function() {\r\n                    var _that$_actions;\r\n                    that._$content.css(\"pointerEvents\", \"\");\r\n                    that._renderVisibility(false);\r\n                    completeHideAnimation.apply(this, arguments);\r\n                    that._hideAnimationProcessing = false;\r\n                    null === (_that$_actions = that._actions) || void 0 === _that$_actions ? void 0 : _that$_actions.onHidden();\r\n                    deferred.resolve()\r\n                }, function() {\r\n                    that._$content.css(\"pointerEvents\", \"none\");\r\n                    startHideAnimation.apply(this, arguments);\r\n                    that._hideAnimationProcessing = true\r\n                })\r\n            }\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _forceFocusLost: function() {\r\n        var activeElement = _dom_adapter.default.getActiveElement();\r\n        var shouldResetActiveElement = !!this._$content.find(activeElement).length;\r\n        if (shouldResetActiveElement) {\r\n            (0, _dom.resetActiveElement)()\r\n        }\r\n    },\r\n    _animate: function(animation, completeCallback, startCallback) {\r\n        if (animation) {\r\n            startCallback = startCallback || animation.start || _common.noop;\r\n            _fx.default.animate(this._$content, (0, _extend.extend)({}, animation, {\r\n                start: startCallback,\r\n                complete: completeCallback\r\n            }))\r\n        } else {\r\n            completeCallback()\r\n        }\r\n    },\r\n    _stopAnimation: function() {\r\n        _fx.default.stop(this._$content, true)\r\n    },\r\n    _renderVisibility: function(visible) {\r\n        if (visible && this._isParentHidden()) {\r\n            return\r\n        }\r\n        this._currentVisible = visible;\r\n        this._stopAnimation();\r\n        if (!visible) {\r\n            (0, _visibility_change.triggerHidingEvent)(this._$content)\r\n        }\r\n        this._toggleVisibility(visible);\r\n        this._$content.toggleClass(INVISIBLE_STATE_CLASS, !visible);\r\n        this._updateZIndexStackPosition(visible);\r\n        if (visible) {\r\n            this._renderContent();\r\n            var showingArgs = {\r\n                cancel: false\r\n            };\r\n            this._actions.onShowing(showingArgs);\r\n            if (showingArgs.cancel) {\r\n                this._toggleVisibility(false);\r\n                this._$content.toggleClass(INVISIBLE_STATE_CLASS, true);\r\n                this._updateZIndexStackPosition(false);\r\n                this._moveFromContainer();\r\n                this._isShowingActionCanceled = true;\r\n                this.option(\"visible\", false);\r\n                return\r\n            }\r\n            this._moveToContainer();\r\n            this._renderGeometry();\r\n            (0, _visibility_change.triggerShownEvent)(this._$content);\r\n            (0, _visibility_change.triggerResizeEvent)(this._$content)\r\n        } else {\r\n            this._moveFromContainer()\r\n        }\r\n        this._toggleShading(visible);\r\n        this._toggleSubscriptions(visible)\r\n    },\r\n    _updateZIndexStackPosition: function(pushToStack) {\r\n        var overlayStack = this._overlayStack();\r\n        var index = (0, _array.inArray)(this, overlayStack);\r\n        if (pushToStack) {\r\n            if (index === -1) {\r\n                this._zIndex = zIndexPool.create(this._zIndexInitValue());\r\n                overlayStack.push(this)\r\n            }\r\n            this._$wrapper.css(\"zIndex\", this._zIndex);\r\n            this._$content.css(\"zIndex\", this._zIndex)\r\n        } else {\r\n            if (index !== -1) {\r\n                overlayStack.splice(index, 1);\r\n                zIndexPool.remove(this._zIndex)\r\n            }\r\n        }\r\n    },\r\n    _toggleShading: function(visible) {\r\n        this._$wrapper.toggleClass(OVERLAY_MODAL_CLASS, this.option(\"shading\") && !this.option(\"container\"));\r\n        this._$wrapper.toggleClass(OVERLAY_SHADER_CLASS, visible && this.option(\"shading\"));\r\n        this._$wrapper.css(\"backgroundColor\", this.option(\"shading\") ? this.option(\"shadingColor\") : \"\");\r\n        this._toggleTabTerminator(visible && this.option(\"shading\"))\r\n    },\r\n    _initTabTerminatorHandler: function() {\r\n        var that = this;\r\n        this._proxiedTabTerminatorHandler = function() {\r\n            that._tabKeyHandler.apply(that, arguments)\r\n        }\r\n    },\r\n    _toggleTabTerminator: function(enabled) {\r\n        var eventName = (0, _index.addNamespace)(\"keydown\", this.NAME);\r\n        if (enabled) {\r\n            _events_engine.default.on(_dom_adapter.default.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        } else {\r\n            _events_engine.default.off(_dom_adapter.default.getDocument(), eventName, this._proxiedTabTerminatorHandler)\r\n        }\r\n    },\r\n    _findTabbableBounds: function() {\r\n        var $elements = this._$wrapper.find(\"*\");\r\n        var elementsCount = $elements.length - 1;\r\n        var result = {\r\n            first: null,\r\n            last: null\r\n        };\r\n        for (var i = 0; i <= elementsCount; i++) {\r\n            if (!result.first && $elements.eq(i).is(_selectors.tabbable)) {\r\n                result.first = $elements.eq(i)\r\n            }\r\n            if (!result.last && $elements.eq(elementsCount - i).is(_selectors.tabbable)) {\r\n                result.last = $elements.eq(elementsCount - i)\r\n            }\r\n            if (result.first && result.last) {\r\n                break\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _tabKeyHandler: function(e) {\r\n        if ((0, _index.normalizeKeyName)(e) !== TAB_KEY || !this._isTopOverlay()) {\r\n            return\r\n        }\r\n        var tabbableElements = this._findTabbableBounds();\r\n        var $firstTabbable = tabbableElements.first;\r\n        var $lastTabbable = tabbableElements.last;\r\n        var isTabOnLast = !e.shiftKey && e.target === $lastTabbable.get(0);\r\n        var isShiftTabOnFirst = e.shiftKey && e.target === $firstTabbable.get(0);\r\n        var isEmptyTabList = 0 === tabbableElements.length;\r\n        var isOutsideTarget = !(0, _dom.contains)(this._$wrapper.get(0), e.target);\r\n        if (isTabOnLast || isShiftTabOnFirst || isEmptyTabList || isOutsideTarget) {\r\n            e.preventDefault();\r\n            var $focusElement = e.shiftKey ? $lastTabbable : $firstTabbable;\r\n            _events_engine.default.trigger($focusElement, \"focusin\");\r\n            _events_engine.default.trigger($focusElement, \"focus\")\r\n        }\r\n    },\r\n    _toggleSubscriptions: function(enabled) {\r\n        if ((0, _window.hasWindow)()) {\r\n            this._toggleHideTopOverlayCallback(enabled);\r\n            this._toggleParentsScrollSubscription(enabled)\r\n        }\r\n    },\r\n    _toggleHideTopOverlayCallback: function(subscribe) {\r\n        if (!this._hideTopOverlayHandler) {\r\n            return\r\n        }\r\n        if (subscribe) {\r\n            _hide_callback.hideCallback.add(this._hideTopOverlayHandler)\r\n        } else {\r\n            _hide_callback.hideCallback.remove(this._hideTopOverlayHandler)\r\n        }\r\n    },\r\n    _toggleParentsScrollSubscription: function(subscribe) {\r\n        var _this4 = this;\r\n        if (!this._position) {\r\n            return\r\n        }\r\n        var target = this._position.of || (0, _renderer.default)();\r\n        var closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        var $parents = getElement(target).parents();\r\n        var scrollEvent = (0, _index.addNamespace)(\"scroll\", this.NAME);\r\n        if (\"desktop\" === _devices.default.real().deviceType) {\r\n            $parents = $parents.add(window)\r\n        }\r\n        this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function(e) {\r\n            _this4._targetParentsScrollHandler(e)\r\n        };\r\n        _events_engine.default.off((0, _renderer.default)().add(this._$prevTargetParents), scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n        if (subscribe && closeOnScroll) {\r\n            _events_engine.default.on($parents, scrollEvent, this._proxiedTargetParentsScrollHandler);\r\n            this._$prevTargetParents = $parents\r\n        }\r\n    },\r\n    _targetParentsScrollHandler: function(e) {\r\n        var closeHandled = false;\r\n        var closeOnScroll = this.option(\"closeOnTargetScroll\");\r\n        if ((0, _type.isFunction)(closeOnScroll)) {\r\n            closeHandled = closeOnScroll(e)\r\n        }\r\n        if (!closeHandled && !this._showAnimationProcessing) {\r\n            this.hide()\r\n        }\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._appendContentToElement();\r\n        this._renderVisibilityAnimate(this.option(\"visible\"))\r\n    },\r\n    _appendContentToElement: function() {\r\n        if (!this._$content.parent().is(this.$element())) {\r\n            this._$content.appendTo(this.$element())\r\n        }\r\n    },\r\n    _renderContent: function() {\r\n        var shouldDeferRendering = !this._currentVisible && this.option(\"deferRendering\");\r\n        var isParentHidden = this.option(\"visible\") && this._isParentHidden();\r\n        if (isParentHidden) {\r\n            this._isHidden = true;\r\n            return\r\n        }\r\n        if (this._contentAlreadyRendered || shouldDeferRendering) {\r\n            return\r\n        }\r\n        this._contentAlreadyRendered = true;\r\n        this._appendContentToElement();\r\n        this.callBase()\r\n    },\r\n    _isParentHidden: function() {\r\n        if (!this.option(\"_checkParentVisibility\")) {\r\n            return false\r\n        }\r\n        if (void 0 !== this._parentHidden) {\r\n            return this._parentHidden\r\n        }\r\n        var $parent = this.$element().parent();\r\n        if ($parent.is(\":visible\")) {\r\n            return false\r\n        }\r\n        var isHidden = false;\r\n        $parent.add($parent.parents()).each(function() {\r\n            var $element = (0, _renderer.default)(this);\r\n            if (\"none\" === $element.css(\"display\")) {\r\n                isHidden = true;\r\n                return false\r\n            }\r\n        });\r\n        return isHidden || !_dom_adapter.default.getBody().contains($parent.get(0))\r\n    },\r\n    _renderContentImpl: function() {\r\n        var _this5 = this;\r\n        var whenContentRendered = new _deferred.Deferred;\r\n        var contentTemplateOption = this.option(\"contentTemplate\");\r\n        var contentTemplate = this._getTemplate(contentTemplateOption);\r\n        var transclude = this._templateManager.anonymousTemplateName === contentTemplateOption;\r\n        contentTemplate && contentTemplate.render({\r\n            container: (0, _element.getPublicElement)(this.$content()),\r\n            noModel: true,\r\n            transclude: transclude,\r\n            onRendered: function() {\r\n                whenContentRendered.resolve()\r\n            }\r\n        });\r\n        this._renderDrag();\r\n        this._renderResize();\r\n        this._renderScrollTerminator();\r\n        whenContentRendered.done(function() {\r\n            if (_this5.option(\"visible\")) {\r\n                _this5._moveToContainer()\r\n            }\r\n        });\r\n        return whenContentRendered.promise()\r\n    },\r\n    _renderDrag: function() {\r\n        var $dragTarget = this._getDragTarget();\r\n        if (!$dragTarget) {\r\n            return\r\n        }\r\n        var startEventName = (0, _index.addNamespace)(_drag.start, this.NAME);\r\n        var updateEventName = (0, _index.addNamespace)(_drag.move, this.NAME);\r\n        _events_engine.default.off($dragTarget, startEventName);\r\n        _events_engine.default.off($dragTarget, updateEventName);\r\n        if (!this.option(\"dragEnabled\")) {\r\n            return\r\n        }\r\n        _events_engine.default.on($dragTarget, startEventName, this._dragStartHandler.bind(this));\r\n        _events_engine.default.on($dragTarget, updateEventName, this._dragUpdateHandler.bind(this))\r\n    },\r\n    _renderResize: function() {\r\n        this._resizable = this._createComponent(this._$content, _resizable.default, {\r\n            handles: this.option(\"resizeEnabled\") ? \"all\" : \"none\",\r\n            onResizeEnd: this._resizeEndHandler.bind(this),\r\n            onResize: this._actions.onResize.bind(this),\r\n            onResizeStart: this._actions.onResizeStart.bind(this),\r\n            minHeight: 100,\r\n            minWidth: 100,\r\n            area: this._getDragResizeContainer()\r\n        })\r\n    },\r\n    _resizeEndHandler: function() {\r\n        this._positionChangeHandled = true;\r\n        var width = this._resizable.option(\"width\");\r\n        var height = this._resizable.option(\"height\");\r\n        width && this.option(\"width\", width);\r\n        height && this.option(\"height\", height);\r\n        this._actions.onResizeEnd()\r\n    },\r\n    _renderScrollTerminator: function() {\r\n        var $scrollTerminator = this._wrapper();\r\n        var terminatorEventName = (0, _index.addNamespace)(_drag.move, this.NAME);\r\n        _events_engine.default.off($scrollTerminator, terminatorEventName);\r\n        _events_engine.default.on($scrollTerminator, terminatorEventName, {\r\n            validate: function() {\r\n                return true\r\n            },\r\n            getDirection: function() {\r\n                return \"both\"\r\n            },\r\n            _toggleGestureCover: function(toggle) {\r\n                if (!toggle) {\r\n                    this._toggleGestureCoverImpl(toggle)\r\n                }\r\n            },\r\n            _clearSelection: _common.noop,\r\n            isNative: true\r\n        }, function(e) {\r\n            var originalEvent = e.originalEvent.originalEvent;\r\n            var _ref = originalEvent || {},\r\n                type = _ref.type;\r\n            var isWheel = \"wheel\" === type;\r\n            var isMouseMove = \"mousemove\" === type;\r\n            var isScrollByWheel = isWheel && !(0, _index.isCommandKeyPressed)(e);\r\n            e._cancelPreventDefault = true;\r\n            if (originalEvent && false !== e.cancelable && (!isMouseMove && !isWheel || isScrollByWheel)) {\r\n                e.preventDefault()\r\n            }\r\n        })\r\n    },\r\n    _getDragTarget: function() {\r\n        return this.$content()\r\n    },\r\n    _dragStartHandler: function(e) {\r\n        e.targetElements = [];\r\n        this._prevOffset = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        var allowedOffsets = this._allowedOffsets();\r\n        e.maxTopOffset = allowedOffsets.top;\r\n        e.maxBottomOffset = allowedOffsets.bottom;\r\n        e.maxLeftOffset = allowedOffsets.left;\r\n        e.maxRightOffset = allowedOffsets.right\r\n    },\r\n    _getDragResizeContainer: function() {\r\n        var isContainerDefined = (0, _view_port.originalViewPort)().get(0) || this.option(\"container\");\r\n        var $container = !isContainerDefined ? (0, _renderer.default)(window) : this._$container;\r\n        return $container\r\n    },\r\n    _deltaSize: function() {\r\n        var $content = this._$content;\r\n        var $container = this._getDragResizeContainer();\r\n        var contentWidth = $content.outerWidth();\r\n        var contentHeight = $content.outerHeight();\r\n        var containerWidth = $container.outerWidth();\r\n        var containerHeight = $container.outerHeight();\r\n        if (this._isWindow($container)) {\r\n            var document = _dom_adapter.default.getDocument();\r\n            var fullPageHeight = Math.max((0, _renderer.default)(document).outerHeight(), containerHeight);\r\n            var fullPageWidth = Math.max((0, _renderer.default)(document).outerWidth(), containerWidth);\r\n            containerHeight = fullPageHeight;\r\n            containerWidth = fullPageWidth\r\n        }\r\n        return {\r\n            width: containerWidth - contentWidth,\r\n            height: containerHeight - contentHeight\r\n        }\r\n    },\r\n    _dragUpdateHandler: function(e) {\r\n        var offset = e.offset;\r\n        var prevOffset = this._prevOffset;\r\n        var targetOffset = {\r\n            top: offset.y - prevOffset.y,\r\n            left: offset.x - prevOffset.x\r\n        };\r\n        this._changePosition(targetOffset);\r\n        this._prevOffset = offset\r\n    },\r\n    _changePosition: function(offset) {\r\n        var position = (0, _translator.locate)(this._$content);\r\n        (0, _translator.move)(this._$content, {\r\n            left: position.left + offset.left,\r\n            top: position.top + offset.top\r\n        });\r\n        this._positionChangeHandled = true\r\n    },\r\n    _allowedOffsets: function() {\r\n        var position = (0, _translator.locate)(this._$content);\r\n        var deltaSize = this._deltaSize();\r\n        var isAllowedDrag = deltaSize.height >= 0 && deltaSize.width >= 0;\r\n        var shaderOffset = this.option(\"shading\") && !this.option(\"container\") && !this._isWindow(this._getContainer()) ? (0, _translator.locate)(this._$wrapper) : {\r\n            top: 0,\r\n            left: 0\r\n        };\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        return {\r\n            top: isAllowedDrag ? position.top + shaderOffset.top + boundaryOffset.v : 0,\r\n            bottom: isAllowedDrag ? -position.top - shaderOffset.top + deltaSize.height - boundaryOffset.v : 0,\r\n            left: isAllowedDrag ? position.left + shaderOffset.left + boundaryOffset.h : 0,\r\n            right: isAllowedDrag ? -position.left - shaderOffset.left + deltaSize.width - boundaryOffset.h : 0\r\n        }\r\n    },\r\n    _moveFromContainer: function() {\r\n        this._$content.appendTo(this.$element());\r\n        this._detachWrapperToContainer()\r\n    },\r\n    _detachWrapperToContainer: function() {\r\n        this._$wrapper.detach()\r\n    },\r\n    _moveToContainer: function() {\r\n        this._attachWrapperToContainer();\r\n        this._$content.appendTo(this._$wrapper)\r\n    },\r\n    _attachWrapperToContainer: function() {\r\n        var $element = this.$element();\r\n        var containerDefined = void 0 !== this.option(\"container\");\r\n        var renderContainer = containerDefined ? this._$container : _swatch_container.default.getSwatchContainer($element);\r\n        if (renderContainer && renderContainer[0] === $element.parent()[0]) {\r\n            renderContainer = $element\r\n        }\r\n        this._$wrapper.appendTo(renderContainer)\r\n    },\r\n    _fixHeightAfterSafariAddressBarResizing: function() {\r\n        if (this._isWindow(this._getContainer()) && hasSafariAddressBar) {\r\n            this._$wrapper.css(\"minHeight\", window.innerHeight)\r\n        }\r\n    },\r\n    _renderGeometry: function(isDimensionChanged) {\r\n        if (this.option(\"visible\") && (0, _window.hasWindow)()) {\r\n            this._renderGeometryImpl(isDimensionChanged)\r\n        }\r\n    },\r\n    _renderGeometryImpl: function(isDimensionChanged) {\r\n        this._stopAnimation();\r\n        this._normalizePosition();\r\n        this._renderWrapper();\r\n        this._fixHeightAfterSafariAddressBarResizing();\r\n        this._renderDimensions();\r\n        var resultPosition = this._renderPosition();\r\n        this._actions.onPositioned({\r\n            position: resultPosition\r\n        })\r\n    },\r\n    _fixWrapperPosition: function() {\r\n        this._$wrapper.css(\"position\", this._useFixedPosition() ? \"fixed\" : \"absolute\")\r\n    },\r\n    _useFixedPosition: function() {\r\n        return this._shouldFixBodyPosition() || this.option(\"_fixedPosition\")\r\n    },\r\n    _shouldFixBodyPosition: function() {\r\n        var $container = this._getContainer();\r\n        return this._isWindow($container) && (!iOS || void 0 !== this._bodyScrollTop)\r\n    },\r\n    _toggleSafariScrolling: function(scrollingEnabled) {\r\n        if (iOS && this._shouldFixBodyPosition()) {\r\n            var body = _dom_adapter.default.getBody();\r\n            if (scrollingEnabled) {\r\n                (0, _renderer.default)(body).removeClass(PREVENT_SAFARI_SCROLLING_CLASS);\r\n                window.scrollTo(0, this._bodyScrollTop);\r\n                this._bodyScrollTop = void 0\r\n            } else {\r\n                if (this.option(\"visible\")) {\r\n                    this._bodyScrollTop = window.pageYOffset;\r\n                    (0, _renderer.default)(body).addClass(PREVENT_SAFARI_SCROLLING_CLASS)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _renderWrapper: function() {\r\n        this._fixWrapperPosition();\r\n        this._renderWrapperDimensions();\r\n        this._renderWrapperPosition()\r\n    },\r\n    _renderWrapperDimensions: function() {\r\n        var wrapperWidth;\r\n        var wrapperHeight;\r\n        var $container = this._getContainer();\r\n        if (!$container) {\r\n            return\r\n        }\r\n        var isWindow = this._isWindow($container);\r\n        wrapperWidth = isWindow ? \"\" : $container.outerWidth(), wrapperHeight = isWindow ? \"\" : $container.outerHeight();\r\n        this._$wrapper.css({\r\n            width: wrapperWidth,\r\n            height: wrapperHeight\r\n        })\r\n    },\r\n    _isWindow: function($element) {\r\n        return !!$element && (0, _type.isWindow)($element.get(0))\r\n    },\r\n    _renderWrapperPosition: function() {\r\n        var $container = this._getContainer();\r\n        if ($container) {\r\n            _position.default.setup(this._$wrapper, {\r\n                my: \"top left\",\r\n                at: \"top left\",\r\n                of: $container\r\n            })\r\n        }\r\n    },\r\n    _getContainer: function() {\r\n        var position = this._position;\r\n        var container = this.option(\"container\");\r\n        var positionOf = null;\r\n        if (!container && position) {\r\n            positionOf = (0, _type.isEvent)(position.of) ? window : position.of || window\r\n        }\r\n        return getElement(container || positionOf)\r\n    },\r\n    _renderDimensions: function() {\r\n        var content = this._$content.get(0);\r\n        this._$content.css({\r\n            minWidth: this._getOptionValue(\"minWidth\", content),\r\n            maxWidth: this._getOptionValue(\"maxWidth\", content),\r\n            minHeight: this._getOptionValue(\"minHeight\", content),\r\n            maxHeight: this._getOptionValue(\"maxHeight\", content),\r\n            width: this._getOptionValue(\"width\", content),\r\n            height: this._getOptionValue(\"height\", content)\r\n        })\r\n    },\r\n    _renderPosition: function() {\r\n        if (this._positionChangeHandled) {\r\n            var allowedOffsets = this._allowedOffsets();\r\n            this._changePosition({\r\n                top: (0, _math.fitIntoRange)(0, -allowedOffsets.top, allowedOffsets.bottom),\r\n                left: (0, _math.fitIntoRange)(0, -allowedOffsets.left, allowedOffsets.right)\r\n            })\r\n        } else {\r\n            this._renderOverlayBoundaryOffset();\r\n            (0, _translator.resetPosition)(this._$content);\r\n            var position = this._transformStringPosition(this._position, POSITION_ALIASES);\r\n            var resultPosition = _position.default.setup(this._$content, position);\r\n            forceRepaint(this._$content);\r\n            return resultPosition\r\n        }\r\n    },\r\n    _transformStringPosition: function(position, positionAliases) {\r\n        if ((0, _type.isString)(position)) {\r\n            position = (0, _extend.extend)({}, positionAliases[position])\r\n        }\r\n        return position\r\n    },\r\n    _renderOverlayBoundaryOffset: function() {\r\n        var boundaryOffset = this.option(\"boundaryOffset\");\r\n        this._$content.css(\"margin\", boundaryOffset.v + \"px \" + boundaryOffset.h + \"px\")\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$content\r\n    },\r\n    _attachKeyboardEvents: function() {\r\n        var _this6 = this;\r\n        this._keyboardListenerId = _short.keyboard.on(this._$content, null, function(opts) {\r\n            return _this6._keyboardHandler(opts)\r\n        })\r\n    },\r\n    _keyboardHandler: function(options) {\r\n        var e = options.originalEvent;\r\n        var $target = (0, _renderer.default)(e.target);\r\n        if ($target.is(this._$content) || !this.option(\"ignoreChildEvents\")) {\r\n            this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.option(\"visible\")\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            if (this.option(\"visible\")) {\r\n                this._renderVisibilityAnimate(visible)\r\n            }\r\n        } else {\r\n            this._renderVisibilityAnimate(visible)\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._renderGeometry(true)\r\n    },\r\n    _clean: function() {\r\n        if (!this._contentAlreadyRendered) {\r\n            this.$content().empty()\r\n        }\r\n        this._renderVisibility(false);\r\n        this._stopShowTimer();\r\n        this._cleanFocusState()\r\n    },\r\n    _stopShowTimer: function() {\r\n        if (this._asyncShowTimeout) {\r\n            clearTimeout(this._asyncShowTimeout)\r\n        }\r\n        this._asyncShowTimeout = null\r\n    },\r\n    _dispose: function() {\r\n        _fx.default.stop(this._$content, false);\r\n        clearTimeout(this._deferShowTimer);\r\n        this._toggleViewPortSubscription(false);\r\n        this._toggleSubscriptions(false);\r\n        this._updateZIndexStackPosition(false);\r\n        this._toggleTabTerminator(false);\r\n        this._toggleSafariScrolling(true);\r\n        this._actions = null;\r\n        this.callBase();\r\n        zIndexPool.remove(this._zIndex);\r\n        this._$wrapper.remove();\r\n        this._$content.remove()\r\n    },\r\n    _toggleDisabledState: function(value) {\r\n        this.callBase.apply(this, arguments);\r\n        this._$content.toggleClass(DISABLED_STATE_CLASS, Boolean(value))\r\n    },\r\n    _toggleRTLDirection: function(rtl) {\r\n        this._$content.toggleClass(RTL_DIRECTION_CLASS, rtl)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this7 = this;\r\n        var value = args.value;\r\n        if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"dragEnabled\":\r\n                this._renderDrag();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"resizeEnabled\":\r\n                this._renderResize();\r\n                this._renderGeometry();\r\n                break;\r\n            case \"shading\":\r\n            case \"shadingColor\":\r\n                this._toggleShading(this.option(\"visible\"));\r\n                break;\r\n            case \"width\":\r\n            case \"height\":\r\n            case \"minWidth\":\r\n            case \"maxWidth\":\r\n            case \"minHeight\":\r\n            case \"maxHeight\":\r\n            case \"boundaryOffset\":\r\n                this._renderGeometry();\r\n                break;\r\n            case \"position\":\r\n                this._positionChangeHandled = false;\r\n                this._renderGeometry();\r\n                break;\r\n            case \"visible\":\r\n                this._renderVisibilityAnimate(value).done(function() {\r\n                    if (!_this7._animateDeferred) {\r\n                        return\r\n                    }\r\n                    _this7._animateDeferred.resolveWith(_this7)\r\n                });\r\n                break;\r\n            case \"target\":\r\n                this._initTarget(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"container\":\r\n                this._initContainer(value);\r\n                this._invalidate();\r\n                break;\r\n            case \"innerOverlay\":\r\n                this._initInnerOverlayClass();\r\n                break;\r\n            case \"deferRendering\":\r\n            case \"contentTemplate\":\r\n                this._contentAlreadyRendered = false;\r\n                this._clean();\r\n                this._invalidate();\r\n                break;\r\n            case \"hideTopOverlayHandler\":\r\n                this._toggleHideTopOverlayCallback(false);\r\n                this._initHideTopOverlayHandler(args.value);\r\n                this._toggleHideTopOverlayCallback(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnTargetScroll\":\r\n                this._toggleParentsScrollSubscription(this.option(\"visible\"));\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n            case \"animation\":\r\n            case \"propagateOutsideClick\":\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._contentAlreadyRendered = false;\r\n                this.callBase(args);\r\n                break;\r\n            case \"_fixedPosition\":\r\n                this._fixWrapperPosition();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    toggle: function(showing) {\r\n        var _this8 = this;\r\n        showing = void 0 === showing ? !this.option(\"visible\") : showing;\r\n        var result = new _deferred.Deferred;\r\n        if (showing === this.option(\"visible\")) {\r\n            return result.resolveWith(this, [showing]).promise()\r\n        }\r\n        var animateDeferred = new _deferred.Deferred;\r\n        this._animateDeferred = animateDeferred;\r\n        this.option(\"visible\", showing);\r\n        animateDeferred.promise().done(function() {\r\n            delete _this8._animateDeferred;\r\n            result.resolveWith(_this8, [_this8.option(\"visible\")])\r\n        });\r\n        return result.promise()\r\n    },\r\n    $content: function() {\r\n        return this._$content\r\n    },\r\n    show: function() {\r\n        return this.toggle(true)\r\n    },\r\n    hide: function() {\r\n        return this.toggle(false)\r\n    },\r\n    content: function() {\r\n        return (0, _element.getPublicElement)(this._$content)\r\n    },\r\n    repaint: function() {\r\n        if (this._contentAlreadyRendered) {\r\n            this._renderGeometry();\r\n            (0, _visibility_change.triggerResizeEvent)(this._$content)\r\n        } else {\r\n            this.callBase()\r\n        }\r\n    }\r\n});\r\nOverlay.baseZIndex = function(zIndex) {\r\n    return zIndexPool.base(zIndex)\r\n};\r\n(0, _component_registrator.default)(\"dxOverlay\", Overlay);\r\nvar _default = Overlay;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}